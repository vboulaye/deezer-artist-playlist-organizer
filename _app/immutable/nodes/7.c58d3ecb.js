import{d as fl,w as se}from"../chunks/paths.5fe76e18.js";import{g as hl,c as Qt,r as dl}from"../chunks/DeezerCall.9ff30d90.js";import{g as pe,P as ml,b as _l,h as Ce}from"../chunks/PlaylistApplicationShell.2769534f.js";import{s as kt,C as G,L as Ht,H as St,M as jt,h as T,G as Ot,d,N as mt,i as E,r as K,D as ft,f as k,a as N,g as w,c as S,R as Vt,j as p,S as xt,I as tt,K as ee,F as Wt,T as Xe,U as Ee,l as vt,m as bt,x as g,n as Et,w as ue,y as ce,z as fe,A as he,J as gl,k as pl,p as Qe,O as ct,V as Xt,P as xe,Q as tl,e as oe,W as ie,X as vl,Y as Ae}from"../chunks/scheduler.e7e5d74b.js";import{S as wt,i as $t,g as Gt,t as z,c as Kt,a as O,b as M,d as R,m as V,e as F,j as bl,k as kl,o as el}from"../chunks/index.380c371d.js";import{p as wl,e as te,u as $l,o as yl}from"../chunks/ProgressBar.svelte_svelte_type_style_lang.75f139db.js";import{i as Tl}from"../chunks/navigation.846c5cb5.js";import{a as Zt,s as Be,g as Pl}from"../chunks/index.221127f6.js";var ve={exports:{}};function ll(){var n=Object.create(null),t=0,e=0,a=0,r=!1;this.put=function(l,i,o,u){if(r&&console.log("caching: %s = %j (@%s)",l,i,o),typeof o<"u"&&(typeof o!="number"||isNaN(o)||o<=0))throw new Error("Cache timeout must be a positive number");if(typeof u<"u"&&typeof u!="function")throw new Error("Cache timeout callback must be a function");var h=n[l];h?clearTimeout(h.timeout):a++;var c={value:i,expire:o+Date.now()};return isNaN(c.expire)||(c.timeout=setTimeout((function(){s(l),u&&u(l,i)}).bind(this),o)),n[l]=c,i},this.del=function(l){var i=!0,o=n[l];return o?(clearTimeout(o.timeout),!isNaN(o.expire)&&o.expire<Date.now()&&(i=!1)):i=!1,i&&s(l),i};function s(l){a--,delete n[l]}this.clear=function(){for(var l in n)clearTimeout(n[l].timeout);a=0,n=Object.create(null),r&&(t=0,e=0)},this.get=function(l){var i=n[l];if(typeof i<"u"){if(isNaN(i.expire)||i.expire>=Date.now())return r&&t++,i.value;r&&e++,a--,delete n[l]}else r&&e++;return null},this.size=function(){return a},this.memsize=function(){var l=0,i;for(i in n)l++;return l},this.debug=function(l){r=l},this.hits=function(){return t},this.misses=function(){return e},this.keys=function(){return Object.keys(n)},this.exportJson=function(){var l={};for(var i in n){var o=n[i];l[i]={value:o.value,expire:o.expire||"NaN"}}return JSON.stringify(l)},this.importJson=function(l,i){var o=JSON.parse(l),u=Date.now(),h=i&&i.skipDuplicates;for(var c in o)if(o.hasOwnProperty(c)){if(h){var f=n[c];if(f){r&&console.log("Skipping duplicate imported key '%s'",c);continue}}var y=o[c],m=y.expire-u;if(m<=0){this.del(c);continue}m=m>0?m:void 0,this.put(c,y.value,m)}return this.size()}}ve.exports=new ll;ve.exports.Cache=ll;var Cl=ve.exports;const Ne=hl(Cl);class nl{constructor(t,e){this.cacheName=t,this.ttl=e}get(t){return Ne.get(this.buildKey(t))}buildKey(t){return this.cacheName+"~"+t}put(t,e){Ne.put(this.buildKey(t),e,this.ttl)}}const Se=new nl("ARTIST",3600*1e3),Oe=new nl("ARTIST-DISCOGRAPHY",3600*1e3);async function El(n){const t=Se.get(n);if(t)return t;const e=await Qt({apiPath:"/artist/"+n});return Se.put(n,e),e}async function al(n){return await pe({apiPath:"/album/"+n+"/tracks",index:0,limit:100})}async function sl(n){const t=Oe.get(n);if(t)return t;const e=await pe({apiPath:"/artist/"+n+"/albums",index:0,limit:100}),a=await Promise.all(e.data.map(async r=>{const s=await al(r.id);return{...r,tracks:s.data}}));return Oe.put(n,a),a}const Al=!1;async function Bl(n){if(n==="NEW"){const t=new Date().toISOString(),e=await Qt({apiPath:"/user/me/playlists",searchParams:{request_method:"POST",title:`New Playlist ${t}`,description:`Playlist created with deezer-artist-playlist-organizer on the ${t}`,public:!0}});throw dl(302,"./"+e.id)}return n}async function Nl({params:n}){const t=await Bl(n.id),e=await Qt({apiPath:`/playlist/${t}`}),a=e.tracks.data.reduce((l,i)=>(l[i.artist.id]||(l[i.artist.id]={artist:i.artist,count:0}),l[i.artist.id].count++,l),{}),r=Object.values(a).sort((l,i)=>i.count-l.count);if(e.nb_tracks>400){const l=await pe({apiPath:`/playlist/${t}/tracks`,limit:100,index:e.tracks.data.length});e.tracks.data=[...e.tracks.data,...l.data]}const s=Promise.all(r.map(async l=>await El(l.artist.id)));return{playlist:e,topArtists:s}}const ea=Object.freeze(Object.defineProperty({__proto__:null,load:Nl,ssr:Al},Symbol.toStringTag,{value:"Module"}));function Sl(n){let t,e,a='<path fill="currentColor" d="M128 20a108 108 0 1 0 108 108A108.12 108.12 0 0 0 128 20Zm0 192a84 84 0 1 1 84-84a84.09 84.09 0 0 1-84 84Zm40-84a12 12 0 0 1-5.12 9.83l-40 28A12 12 0 0 1 104 156v-56a12 12 0 0 1 18.88-9.83l40 28A12 12 0 0 1 168 128Z"/>',r=[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},n[0]],s={};for(let l=0;l<r.length;l+=1)s=G(s,r[l]);return{c(){t=Ht("svg"),e=new St(!0),this.h()},l(l){t=jt(l,"svg",{viewBox:!0,width:!0,height:!0});var i=T(t);e=Ot(i,!0),i.forEach(d),this.h()},h(){e.a=null,mt(t,s)},m(l,i){E(l,t,i),e.m(a,t)},p(l,[i]){mt(t,s=Zt(r,[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},i&1&&l[0]]))},i:K,o:K,d(l){l&&d(t)}}}function Ol(n,t,e){return n.$$set=a=>{e(0,t=G(G({},t),ft(a)))},t=ft(t),[t]}class zl extends wt{constructor(t){super(),$t(this,t,Ol,Sl,kt,{})}}function Il(n){let t,e,a='<path fill="currentColor" d="M128 20a108 108 0 1 0 108 108A108.12 108.12 0 0 0 128 20Zm0 192a84 84 0 1 1 84-84a84.09 84.09 0 0 1-84 84ZM116 96v64a12 12 0 0 1-24 0V96a12 12 0 0 1 24 0Zm48 0v64a12 12 0 0 1-24 0V96a12 12 0 0 1 24 0Z"/>',r=[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},n[0]],s={};for(let l=0;l<r.length;l+=1)s=G(s,r[l]);return{c(){t=Ht("svg"),e=new St(!0),this.h()},l(l){t=jt(l,"svg",{viewBox:!0,width:!0,height:!0});var i=T(t);e=Ot(i,!0),i.forEach(d),this.h()},h(){e.a=null,mt(t,s)},m(l,i){E(l,t,i),e.m(a,t)},p(l,[i]){mt(t,s=Zt(r,[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},i&1&&l[0]]))},i:K,o:K,d(l){l&&d(t)}}}function Dl(n,t,e){return n.$$set=a=>{e(0,t=G(G({},t),ft(a)))},t=ft(t),[t]}class Hl extends wt{constructor(t){super(),$t(this,t,Dl,Il,kt,{})}}function jl(n){let t,e,a,r,s;return e=new Hl({}),{c(){t=k("span"),M(e.$$.fragment),this.h()},l(l){t=w(l,"SPAN",{role:!0});var i=T(t);R(e.$$.fragment,i),i.forEach(d),this.h()},h(){p(t,"role","button")},m(l,i){E(l,t,i),V(e,t,null),a=!0,r||(s=tt(t,"click",n[4]),r=!0)},p:K,i(l){a||(O(e.$$.fragment,l),a=!0)},o(l){z(e.$$.fragment,l),a=!1},d(l){l&&d(t),F(e),r=!1,s()}}}function Zl(n){let t,e,a,r,s;return e=new zl({}),{c(){t=k("span"),M(e.$$.fragment),this.h()},l(l){t=w(l,"SPAN",{role:!0});var i=T(t);R(e.$$.fragment,i),i.forEach(d),this.h()},h(){p(t,"role","button")},m(l,i){E(l,t,i),V(e,t,null),a=!0,r||(s=tt(t,"click",n[4]),r=!0)},p:K,i(l){a||(O(e.$$.fragment,l),a=!0)},o(l){z(e.$$.fragment,l),a=!1},d(l){l&&d(t),F(e),r=!1,s()}}}function Ll(n){let t,e,a=!0,r,s,l,i,o,u,h;const c=[Zl,jl],f=[];function y(m,b){return m[0]?0:1}return l=y(n),i=f[l]=c[l](n),{c(){t=k("audio"),r=N(),s=k("span"),i.c(),this.h()},l(m){t=w(m,"AUDIO",{src:!0}),T(t).forEach(d),r=S(m),s=w(m,"SPAN",{});var b=T(s);i.l(b),b.forEach(d),this.h()},h(){Vt(t.src,e=n[1])||p(t,"src",e),t.loop=n[2],xt(s,"text-gray-500",!n[3])},m(m,b){E(m,t,b),E(m,r,b),E(m,s,b),f[l].m(s,null),o=!0,u||(h=[tt(t,"play",n[5]),tt(t,"pause",n[5])],u=!0)},p(m,[b]){(!o||b&2&&!Vt(t.src,e=m[1]))&&p(t,"src",e),(!o||b&4)&&(t.loop=m[2]),b&1&&a!==(a=m[0])&&t[a?"pause":"play"]();let P=l;l=y(m),l===P?f[l].p(m,b):(Gt(),z(f[P],1,1,()=>{f[P]=null}),Kt(),i=f[l],i?i.p(m,b):(i=f[l]=c[l](m),i.c()),O(i,1),i.m(s,null)),(!o||b&8)&&xt(s,"text-gray-500",!m[3])},i(m){o||(O(i),o=!0)},o(m){z(i),o=!1},d(m){m&&(d(t),d(r),d(s)),f[l].d(),u=!1,ee(h)}}}function Ul(n,t,e){let{src:a}=t,{loop:r=!1}=t,{enabled:s=!0}=t,{paused:l=!0}=t;function i(){s&&e(0,l=!l)}function o(){l=this.paused,e(0,l)}return n.$$set=u=>{"src"in u&&e(1,a=u.src),"loop"in u&&e(2,r=u.loop),"enabled"in u&&e(3,s=u.enabled),"paused"in u&&e(0,l=u.paused)},[l,a,r,s,i,o]}class Ml extends wt{constructor(t){super(),$t(this,t,Ul,Ll,kt,{src:1,loop:2,enabled:3,paused:0})}}function ze(n,t,e){const a=n.slice();return a[37]=t[e],a}const Rl=n=>({option:n[0]&16512,classesButton:n[0]&512}),Ie=n=>({option:n[37],classesButton:n[9],onSelection:n[15]});function Vl(n){let t,e,a;return{c(){t=k("div"),e=vt(n[1]),this.h()},l(r){t=w(r,"DIV",{class:!0});var s=T(t);e=bt(s,n[1]),s.forEach(d),this.h()},h(){p(t,"class",a="autocomplete-empty "+n[8])},m(r,s){E(r,t,s),g(t,e)},p(r,s){s[0]&2&&Et(e,r[1]),s[0]&256&&a!==(a="autocomplete-empty "+r[8])&&p(t,"class",a)},i:K,o:K,d(r){r&&d(t)}}}function Fl(n){let t,e,a=[],r=new Map,s,l,i,o=te(n[7].slice(0,n[14]));const u=h=>h[37];for(let h=0;h<o.length;h+=1){let c=ze(n,o,h),f=u(c);r.set(f,a[h]=De(f,c))}return{c(){t=k("nav"),e=k("ul");for(let h=0;h<a.length;h+=1)a[h].c();this.h()},l(h){t=w(h,"NAV",{class:!0});var c=T(t);e=w(c,"UL",{class:!0});var f=T(e);for(let y=0;y<a.length;y+=1)a[y].l(f);f.forEach(d),c.forEach(d),this.h()},h(){p(e,"class",s="autocomplete-list "+n[11]),p(t,"class",l="autocomplete-nav "+n[12])},m(h,c){E(h,t,c),g(t,e);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(e,null);i=!0},p(h,c){c[0]&134268644&&(o=te(h[7].slice(0,h[14])),Gt(),a=$l(a,c,u,1,h,o,r,e,yl,De,null,ze),Kt()),(!i||c[0]&2048&&s!==(s="autocomplete-list "+h[11]))&&p(e,"class",s),(!i||c[0]&4096&&l!==(l="autocomplete-nav "+h[12]))&&p(t,"class",l)},i(h){if(!i){for(let c=0;c<o.length;c+=1)O(a[c]);i=!0}},o(h){for(let c=0;c<a.length;c+=1)z(a[c]);i=!1},d(h){h&&d(t);for(let c=0;c<a.length;c+=1)a[c].d()}}}function Jl(n){let t,e,a=n[37].label+"",r,s,l;function i(){return n[31](n[37])}return{c(){t=k("button"),e=new St(!1),this.h()},l(o){t=w(o,"BUTTON",{class:!0,type:!0});var u=T(t);e=Ot(u,!1),u.forEach(d),this.h()},h(){e.a=null,p(t,"class",r="autocomplete-button "+n[9]),p(t,"type","button")},m(o,u){E(o,t,u),e.m(a,t),s||(l=[tt(t,"click",i),tt(t,"click",n[29]),tt(t,"keypress",n[30])],s=!0)},p(o,u){n=o,u[0]&16512&&a!==(a=n[37].label+"")&&e.p(a),u[0]&512&&r!==(r="autocomplete-button "+n[9])&&p(t,"class",r)},d(o){o&&d(t),s=!1,ee(l)}}}function De(n,t){let e,a,r,s,l,i;const o=t[28].optionButton,u=ue(o,t,t[27],Ie),h=u||Jl(t);return{key:n,first:null,c(){e=k("li"),h&&h.c(),a=N(),this.h()},l(c){e=w(c,"LI",{class:!0});var f=T(e);h&&h.l(f),a=S(f),f.forEach(d),this.h()},h(){p(e,"class",r="autocomplete-item "+t[10]),this.first=e},m(c,f){E(c,e,f),h&&h.m(e,null),g(e,a),i=!0},p(c,f){t=c,u?u.p&&(!i||f[0]&134234752)&&ce(u,o,t,t[27],i?he(o,t[27],f,Rl):fe(t[27]),Ie):h&&h.p&&(!i||f[0]&17024)&&h.p(t,i?f:[-1,-1]),(!i||f[0]&1024&&r!==(r="autocomplete-item "+t[10]))&&p(e,"class",r)},i(c){i||(O(h,c),c&&gl(()=>{i&&(l&&l.end(1),s=bl(e,t[0],{transition:t[3],params:t[4],enabled:t[2]}),s.start())}),i=!0)},o(c){z(h,c),s&&s.invalidate(),c&&(l=kl(e,t[0],{transition:t[5],params:t[6],enabled:t[2]})),i=!1},d(c){c&&d(e),h&&h.d(c),c&&l&&l.end()}}}function ql(n){let t,e,a,r,s;const l=[Fl,Vl],i=[];function o(u,h){return u[7].length>0?0:1}return e=o(n),a=i[e]=l[e](n),{c(){t=k("div"),a.c(),this.h()},l(u){t=w(u,"DIV",{class:!0,"data-testid":!0});var h=T(t);a.l(h),h.forEach(d),this.h()},h(){p(t,"class",r="autocomplete "+n[13]),p(t,"data-testid","autocomplete")},m(u,h){E(u,t,h),i[e].m(t,null),s=!0},p(u,h){let c=e;e=o(u),e===c?i[e].p(u,h):(Gt(),z(i[c],1,1,()=>{i[c]=null}),Kt(),a=i[e],a?a.p(u,h):(a=i[e]=l[e](u),a.c()),O(a,1),a.m(t,null)),(!s||h[0]&8192&&r!==(r="autocomplete "+u[13]))&&p(t,"class",r)},i(u){s||(O(a),s=!0)},o(u){z(a),s=!1},d(u){u&&d(t),i[e].d()}}}function il(n,t){const{transition:e,params:a,enabled:r}=t;return r?e(n,a):"duration"in a?e(n,{duration:0}):{duration:0}}function Gl(n,t,e){let a,r,s,l,i,o,u,h,c,f;Wt(n,wl,$=>e(32,f=$));let{$$slots:y={},$$scope:m}=t;const b=Xe();let{input:P=void 0}=t,{options:C=[]}=t,{limit:A=void 0}=t,{allowlist:_=[]}=t,{denylist:B=[]}=t,{emptyState:H="No Results Found."}=t,{regionNav:Z=""}=t,{regionList:X="list-nav"}=t,{regionItem:nt=""}=t,{regionButton:ot="w-full"}=t,{regionEmpty:J="text-center"}=t,{transitions:At=!f}=t,{transitionIn:at=Be}=t,{transitionInParams:st={duration:200}}=t,{transitionOut:_t=Be}=t,{transitionOutParams:gt={duration:200}}=t;function Q($,U){let ht=[...C];$.length&&(ht=ht.filter(dt=>$.includes(dt.value))),U.length&&(ht=ht.filter(dt=>!U.includes(dt.value))),!$.length&&!U.length&&(ht=C),e(26,a=ht)}function yt(){let $=[...a];return $=$.filter(U=>{const ht=String(P).toLowerCase().trim();if(JSON.stringify([U.label,U.value,U.keywords]).toLowerCase().includes(ht))return U}),$}function it($){b("selection",$)}function Pt($){Ee.call(this,n,$)}function Bt($){Ee.call(this,n,$)}const et=$=>it($);return n.$$set=$=>{e(36,t=G(G({},t),ft($))),"input"in $&&e(16,P=$.input),"options"in $&&e(17,C=$.options),"limit"in $&&e(18,A=$.limit),"allowlist"in $&&e(19,_=$.allowlist),"denylist"in $&&e(20,B=$.denylist),"emptyState"in $&&e(1,H=$.emptyState),"regionNav"in $&&e(21,Z=$.regionNav),"regionList"in $&&e(22,X=$.regionList),"regionItem"in $&&e(23,nt=$.regionItem),"regionButton"in $&&e(24,ot=$.regionButton),"regionEmpty"in $&&e(25,J=$.regionEmpty),"transitions"in $&&e(2,At=$.transitions),"transitionIn"in $&&e(3,at=$.transitionIn),"transitionInParams"in $&&e(4,st=$.transitionInParams),"transitionOut"in $&&e(5,_t=$.transitionOut),"transitionOutParams"in $&&e(6,gt=$.transitionOutParams),"$$scope"in $&&e(27,m=$.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&131072&&e(26,a=C),n.$$.dirty[0]&1572864&&Q(_,B),n.$$.dirty[0]&67174400&&e(7,r=P?yt():a),n.$$.dirty[0]&262272&&e(14,s=A!==void 0?A:r.length),e(13,l=`${t.class??""}`),n.$$.dirty[0]&2097152&&e(12,i=`${Z}`),n.$$.dirty[0]&4194304&&e(11,o=`${X}`),n.$$.dirty[0]&8388608&&e(10,u=`${nt}`),n.$$.dirty[0]&16777216&&e(9,h=`${ot}`),n.$$.dirty[0]&33554432&&e(8,c=`${J}`)},t=ft(t),[il,H,At,at,st,_t,gt,r,c,h,u,o,i,l,s,it,P,C,A,_,B,Z,X,nt,ot,J,a,m,y,Pt,Bt,et]}class Kl extends wt{constructor(t){super(),$t(this,t,Gl,ql,kt,{dynamicTransition:0,input:16,options:17,limit:18,allowlist:19,denylist:20,emptyState:1,regionNav:21,regionList:22,regionItem:23,regionButton:24,regionEmpty:25,transitions:2,transitionIn:3,transitionInParams:4,transitionOut:5,transitionOutParams:6},null,[-1,-1])}get dynamicTransition(){return il}}function Yl(n){let t,e;const a=n[1].default,r=ue(a,n,n[0],null);return{c(){t=k("span"),r&&r.c(),this.h()},l(s){t=w(s,"SPAN",{class:!0});var l=T(t);r&&r.l(l),l.forEach(d),this.h()},h(){p(t,"class","flex gap-x-2 items-center mx-2")},m(s,l){E(s,t,l),r&&r.m(t,null),e=!0},p(s,[l]){r&&r.p&&(!e||l&1)&&ce(r,a,s,s[0],e?he(a,s[0],l,null):fe(s[0]),null)},i(s){e||(O(r,s),e=!0)},o(s){z(r,s),e=!1},d(s){s&&d(t),r&&r.d(s)}}}function Wl(n,t,e){let{$$slots:a={},$$scope:r}=t;return n.$$set=s=>{"$$scope"in s&&e(0,r=s.$$scope)},[r,a]}class le extends wt{constructor(t){super(),$t(this,t,Wl,Yl,kt,{})}}function Xl(n){let t,e,a,r;const s=n[2].default,l=ue(s,n,n[1],null);return{c(){t=k("td"),e=k("div"),l&&l.c(),this.h()},l(i){t=w(i,"TD",{style:!0});var o=T(t);e=w(o,"DIV",{class:!0});var u=T(e);l&&l.l(u),u.forEach(d),o.forEach(d),this.h()},h(){p(e,"class",a="flex items-center justify-"+n[0]+" gap-x-2 h-full"),pl(t,"vertical-align","middle")},m(i,o){E(i,t,o),g(t,e),l&&l.m(e,null),r=!0},p(i,[o]){l&&l.p&&(!r||o&2)&&ce(l,s,i,i[1],r?he(s,i[1],o,null):fe(i[1]),null),(!r||o&1&&a!==(a="flex items-center justify-"+i[0]+" gap-x-2 h-full"))&&p(e,"class",a)},i(i){r||(O(l,i),r=!0)},o(i){z(l,i),r=!1},d(i){i&&d(t),l&&l.d(i)}}}function Ql(n,t,e){let{$$slots:a={},$$scope:r}=t,{justify:s="center"}=t;return n.$$set=l=>{"justify"in l&&e(0,s=l.justify),"$$scope"in l&&e(1,r=l.$$scope)},[s,r,a]}class qt extends wt{constructor(t){super(),$t(this,t,Ql,Xl,kt,{justify:0})}}function xl(n){let t,e,a='<path fill="currentColor" d="M216 36H68.53a20.09 20.09 0 0 0-17.15 9.71L5.71 121.83a12 12 0 0 0 0 12.34l45.67 76.12A20.09 20.09 0 0 0 68.53 220H216a20 20 0 0 0 20-20V56a20 20 0 0 0-20-20Zm-4 160H70.8L30 128l40.8-68H212Zm-108.49-52.49L119 128l-15.52-15.51a12 12 0 0 1 17-17L136 111l15.51-15.52a12 12 0 0 1 17 17L153 128l15.52 15.51a12 12 0 0 1-17 17L136 145l-15.51 15.52a12 12 0 0 1-17-17Z"/>',r=[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},n[0]],s={};for(let l=0;l<r.length;l+=1)s=G(s,r[l]);return{c(){t=Ht("svg"),e=new St(!0),this.h()},l(l){t=jt(l,"svg",{viewBox:!0,width:!0,height:!0});var i=T(t);e=Ot(i,!0),i.forEach(d),this.h()},h(){e.a=null,mt(t,s)},m(l,i){E(l,t,i),e.m(a,t)},p(l,[i]){mt(t,s=Zt(r,[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},i&1&&l[0]]))},i:K,o:K,d(l){l&&d(t)}}}function tn(n,t,e){return n.$$set=a=>{e(0,t=G(G({},t),ft(a)))},t=ft(t),[t]}class en extends wt{constructor(t){super(),$t(this,t,tn,xl,kt,{})}}function ln(n){let t,e,a='<path fill="currentColor" d="M160 36a92.09 92.09 0 0 0-81 48.36A68 68 0 1 0 72 220h88a92 92 0 0 0 0-184Zm0 160H72a44 44 0 0 1-1.82-88A91.86 91.86 0 0 0 68 128a12 12 0 0 0 24 0a68 68 0 1 1 68 68Zm40.49-92.49a12 12 0 0 1 0 17l-48 48a12 12 0 0 1-17 0l-24-24a12 12 0 1 1 17-17L144 143l39.51-39.52a12 12 0 0 1 16.98.03Z"/>',r=[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},n[0]],s={};for(let l=0;l<r.length;l+=1)s=G(s,r[l]);return{c(){t=Ht("svg"),e=new St(!0),this.h()},l(l){t=jt(l,"svg",{viewBox:!0,width:!0,height:!0});var i=T(t);e=Ot(i,!0),i.forEach(d),this.h()},h(){e.a=null,mt(t,s)},m(l,i){E(l,t,i),e.m(a,t)},p(l,[i]){mt(t,s=Zt(r,[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},i&1&&l[0]]))},i:K,o:K,d(l){l&&d(t)}}}function nn(n,t,e){return n.$$set=a=>{e(0,t=G(G({},t),ft(a)))},t=ft(t),[t]}class He extends wt{constructor(t){super(),$t(this,t,nn,ln,kt,{})}}function an(n){let t,e,a='<path fill="currentColor" d="M136.37 187.53a12 12 0 0 1 0 17l-5.94 5.94a60 60 0 0 1-84.88-84.88l24.12-24.11A60 60 0 0 1 152 99a12 12 0 1 1-16 18a36 36 0 0 0-49.37 1.47l-24.1 24.08a36 36 0 0 0 50.92 50.92l5.94-5.94a12 12 0 0 1 16.98 0Zm74.08-142a60.09 60.09 0 0 0-84.88 0l-5.94 5.94a12 12 0 0 0 17 17l5.94-5.94a36 36 0 0 1 50.92 50.92l-24.11 24.12A36 36 0 0 1 120 139a12 12 0 1 0-16 18a60 60 0 0 0 82.3-2.43l24.12-24.11a60.09 60.09 0 0 0 .03-84.91Z"/>',r=[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},n[0]],s={};for(let l=0;l<r.length;l+=1)s=G(s,r[l]);return{c(){t=Ht("svg"),e=new St(!0),this.h()},l(l){t=jt(l,"svg",{viewBox:!0,width:!0,height:!0});var i=T(t);e=Ot(i,!0),i.forEach(d),this.h()},h(){e.a=null,mt(t,s)},m(l,i){E(l,t,i),e.m(a,t)},p(l,[i]){mt(t,s=Zt(r,[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},i&1&&l[0]]))},i:K,o:K,d(l){l&&d(t)}}}function sn(n,t,e){return n.$$set=a=>{e(0,t=G(G({},t),ft(a)))},t=ft(t),[t]}class rn extends wt{constructor(t){super(),$t(this,t,sn,an,kt,{})}}function on(n){let t,e,a='<path fill="currentColor" d="M180 128a12 12 0 0 1-12 12H88a12 12 0 0 1 0-24h80a12 12 0 0 1 12 12Zm56 0A108 108 0 1 1 128 20a108.12 108.12 0 0 1 108 108Zm-24 0a84 84 0 1 0-84 84a84.09 84.09 0 0 0 84-84Z"/>',r=[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},n[0]],s={};for(let l=0;l<r.length;l+=1)s=G(s,r[l]);return{c(){t=Ht("svg"),e=new St(!0),this.h()},l(l){t=jt(l,"svg",{viewBox:!0,width:!0,height:!0});var i=T(t);e=Ot(i,!0),i.forEach(d),this.h()},h(){e.a=null,mt(t,s)},m(l,i){E(l,t,i),e.m(a,t)},p(l,[i]){mt(t,s=Zt(r,[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},i&1&&l[0]]))},i:K,o:K,d(l){l&&d(t)}}}function un(n,t,e){return n.$$set=a=>{e(0,t=G(G({},t),ft(a)))},t=ft(t),[t]}class rl extends wt{constructor(t){super(),$t(this,t,un,on,kt,{})}}function cn(n){let t,e,a='<path fill="currentColor" d="M128 20a108 108 0 1 0 108 108A108.12 108.12 0 0 0 128 20Zm0 192a84 84 0 1 1 84-84a84.09 84.09 0 0 1-84 84Zm52-84a12 12 0 0 1-12 12h-28v28a12 12 0 0 1-24 0v-28H88a12 12 0 0 1 0-24h28V88a12 12 0 0 1 24 0v28h28a12 12 0 0 1 12 12Z"/>',r=[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},n[0]],s={};for(let l=0;l<r.length;l+=1)s=G(s,r[l]);return{c(){t=Ht("svg"),e=new St(!0),this.h()},l(l){t=jt(l,"svg",{viewBox:!0,width:!0,height:!0});var i=T(t);e=Ot(i,!0),i.forEach(d),this.h()},h(){e.a=null,mt(t,s)},m(l,i){E(l,t,i),e.m(a,t)},p(l,[i]){mt(t,s=Zt(r,[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},i&1&&l[0]]))},i:K,o:K,d(l){l&&d(t)}}}function fn(n,t,e){return n.$$set=a=>{e(0,t=G(G({},t),ft(a)))},t=ft(t),[t]}class be extends wt{constructor(t){super(),$t(this,t,fn,cn,kt,{})}}function hn(n){let t,e,a='<path fill="currentColor" d="M128 128a12 12 0 0 1-12 12H48a12 12 0 0 1 0-24h68a12 12 0 0 1 12 12ZM48 76h132a12 12 0 0 0 0-24H48a12 12 0 0 0 0 24Zm52 104H48a12 12 0 0 0 0 24h52a12 12 0 0 0 0-24Zm132.49-20.49a12 12 0 0 0-17 0L196 179v-67a12 12 0 0 0-24 0v67l-19.51-19.52a12 12 0 0 0-17 17l40 40a12 12 0 0 0 17 0l40-40a12 12 0 0 0 0-16.97Z"/>',r=[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},n[0]],s={};for(let l=0;l<r.length;l+=1)s=G(s,r[l]);return{c(){t=Ht("svg"),e=new St(!0),this.h()},l(l){t=jt(l,"svg",{viewBox:!0,width:!0,height:!0});var i=T(t);e=Ot(i,!0),i.forEach(d),this.h()},h(){e.a=null,mt(t,s)},m(l,i){E(l,t,i),e.m(a,t)},p(l,[i]){mt(t,s=Zt(r,[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},i&1&&l[0]]))},i:K,o:K,d(l){l&&d(t)}}}function dn(n,t,e){return n.$$set=a=>{e(0,t=G(G({},t),ft(a)))},t=ft(t),[t]}class mn extends wt{constructor(t){super(),$t(this,t,dn,hn,kt,{})}}function _n(n){let t,e,a='<path fill="currentColor" d="M36 128a12 12 0 0 1 12-12h68a12 12 0 0 1 0 24H48a12 12 0 0 1-12-12Zm12-52h52a12 12 0 0 0 0-24H48a12 12 0 0 0 0 24Zm132 104H48a12 12 0 0 0 0 24h132a12 12 0 0 0 0-24Zm52.49-100.49l-40-40a12 12 0 0 0-17 0l-40 40a12 12 0 0 0 17 17L172 77v67a12 12 0 0 0 24 0V77l19.51 19.52a12 12 0 0 0 17-17Z"/>',r=[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},n[0]],s={};for(let l=0;l<r.length;l+=1)s=G(s,r[l]);return{c(){t=Ht("svg"),e=new St(!0),this.h()},l(l){t=jt(l,"svg",{viewBox:!0,width:!0,height:!0});var i=T(t);e=Ot(i,!0),i.forEach(d),this.h()},h(){e.a=null,mt(t,s)},m(l,i){E(l,t,i),e.m(a,t)},p(l,[i]){mt(t,s=Zt(r,[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},i&1&&l[0]]))},i:K,o:K,d(l){l&&d(t)}}}function gn(n,t,e){return n.$$set=a=>{e(0,t=G(G({},t),ft(a)))},t=ft(t),[t]}class pn extends wt{constructor(t){super(),$t(this,t,gn,_n,kt,{})}}function je(n,t){t.update(e=>(e.forEach(a=>{a.track.artist.id===n&&(a.selected=!1)}),e))}async function re(n,t){const e=await sl(n);t.update(a=>{const r=e.sort((l,i)=>l.release_date.localeCompare(i.release_date)).flatMap(l=>{const{tracks:i,...o}=l;return l.tracks.map(u=>({...u,album:o}))});r.forEach(l=>{const i=a.find(o=>o.track.id===l.id);i?(i.track.album=l.album,i.selected=!0):a.push({track:l,inPlaylist:!1,selected:!0})});function s(l){return r.findIndex(i=>i.id===l.track.id)}return a.sort((l,i)=>{const o=s(l),u=s(i);return o-u}),a})}function vn(n,t){t.update(e=>(e.forEach(a=>{a.track.album.id===n&&(a.selected=!1)}),e))}async function bn(n,t){const e=await al(n.id);t.update(a=>{e.data.forEach(o=>{const u=a.find(h=>h.track.id===o.id);o.album=n,u?(u.track.album=o.album,u.selected=!0):a.push({track:o,inPlaylist:!1,selected:!0})});function r(o){return e.data.findIndex(u=>u.id===o.track.id)+1}function s(o){return a.findIndex(u=>u.track.id===o.track.id)+1}const l=a.findIndex(o=>o.track.album.id===n.id);function i(o){const u=r(o);return u===0?s(o)*1e4:l*1e4+u}return console.log({startIndex:l}),a.sort((o,u)=>{const h=l*1e4+i(o),c=l*1e4+i(u);return h-c}),a})}function kn(n){let t,e,a,r,s,l,i,o,u,h,c;const f=n[4].default,y=ue(f,n,n[3],null);return s=new be({}),o=new rl({}),{c(){t=k("span"),y&&y.c(),e=N(),a=k("span"),r=k("button"),M(s.$$.fragment),l=N(),i=k("button"),M(o.$$.fragment),this.h()},l(m){t=w(m,"SPAN",{class:!0});var b=T(t);y&&y.l(b),e=S(b),a=w(b,"SPAN",{class:!0});var P=T(a);r=w(P,"BUTTON",{class:!0,title:!0});var C=T(r);R(s.$$.fragment,C),C.forEach(d),l=S(P),i=w(P,"BUTTON",{class:!0,title:!0});var A=T(i);R(o.$$.fragment,A),A.forEach(d),P.forEach(d),b.forEach(d),this.h()},h(){p(r,"class","!p-0 "),p(r,"title",n[0]),p(i,"class","!p-0"),p(i,"title","deselect all album titles from the playlist"),p(a,"class","btn-group-vertical btn btn-sm gap-y-1"),p(t,"class","flex flex-row justify-between w-full items-center gap-x-2")},m(m,b){E(m,t,b),y&&y.m(t,null),g(t,e),g(t,a),g(a,r),V(s,r,null),g(a,l),g(a,i),V(o,i,null),u=!0,h||(c=[tt(r,"click",n[5]),tt(i,"click",n[6])],h=!0)},p(m,[b]){y&&y.p&&(!u||b&8)&&ce(y,f,m,m[3],u?he(f,m[3],b,null):fe(m[3]),null),(!u||b&1)&&p(r,"title",m[0])},i(m){u||(O(y,m),O(s.$$.fragment,m),O(o.$$.fragment,m),u=!0)},o(m){z(y,m),z(s.$$.fragment,m),z(o.$$.fragment,m),u=!1},d(m){m&&d(t),y&&y.d(m),F(s),F(o),h=!1,ee(c)}}}function wn(n,t,e){let{$$slots:a={},$$scope:r}=t;const s=Xe();let{addTitle:l="add all album titles to the playlist"}=t,{removeTitle:i="deselect all album titles from the playlist"}=t;const o=()=>s("add"),u=()=>s("remove");return n.$$set=h=>{"addTitle"in h&&e(0,l=h.addTitle),"removeTitle"in h&&e(2,i=h.removeTitle),"$$scope"in h&&e(3,r=h.$$scope)},[l,s,i,r,a,o,u]}class ol extends wt{constructor(t){super(),$t(this,t,wn,kn,kt,{addTitle:0,removeTitle:2})}}function Ze(n,t,e){const a=n.slice();a[48]=t[e],a[50]=t,a[51]=e;const r=a[48].track;return a[49]=r,a}function Le(n,t,e){const a=n.slice();a[42]=t[e];const r=a[20](a[42].id);return a[43]=r,a}function $n(n){let t,e,a;function r(){n[33].call(t,n[50],n[51])}return{c(){t=k("input"),this.h()},l(s){t=w(s,"INPUT",{type:!0,class:!0}),this.h()},h(){p(t,"type","checkbox"),p(t,"class","checkbox")},m(s,l){E(s,t,l),t.checked=n[48].selected,e||(a=tt(t,"change",r),e=!0)},p(s,l){n=s,l[0]&16&&(t.checked=n[48].selected)},d(s){s&&d(t),e=!1,a()}}}function yn(n){let t,e=n[51]+1+"",a;return{c(){t=k("span"),a=vt(e)},l(r){t=w(r,"SPAN",{});var s=T(t);a=bt(s,e),s.forEach(d)},m(r,s){E(r,t,s),g(t,a)},p:K,d(r){r&&d(t)}}}function Tn(n){let t,e,a,r,s=n[49].title+"",l,i,o;return t=new Ml({props:{src:n[49].preview,enabled:n[49].readable}}),{c(){M(t.$$.fragment),e=N(),a=k("a"),r=k("span"),l=vt(s),this.h()},l(u){R(t.$$.fragment,u),e=S(u),a=w(u,"A",{href:!0,title:!0});var h=T(a);r=w(h,"SPAN",{});var c=T(r);l=bt(c,s),c.forEach(d),h.forEach(d),this.h()},h(){p(a,"href",i=n[49].link),p(a,"title","open track in Deezer web interface")},m(u,h){V(t,u,h),E(u,e,h),E(u,a,h),g(a,r),g(r,l),o=!0},p(u,h){const c={};h[0]&16&&(c.src=u[49].preview),h[0]&16&&(c.enabled=u[49].readable),t.$set(c),(!o||h[0]&16)&&s!==(s=u[49].title+"")&&Et(l,s),(!o||h[0]&16&&i!==(i=u[49].link))&&p(a,"href",i)},i(u){o||(O(t.$$.fragment,u),o=!0)},o(u){z(t.$$.fragment,u),o=!1},d(u){u&&(d(e),d(a)),F(t,u)}}}function Pn(n){let t,e,a,r,s=n[49].album.title+"",l;return{c(){t=k("img"),a=N(),r=k("span"),l=vt(s),this.h()},l(i){t=w(i,"IMG",{src:!0,alt:!0}),a=S(i),r=w(i,"SPAN",{});var o=T(r);l=bt(o,s),o.forEach(d),this.h()},h(){Vt(t.src,e=n[49].album.cover_small)||p(t,"src",e),p(t,"alt","album cover")},m(i,o){E(i,t,o),E(i,a,o),E(i,r,o),g(r,l)},p(i,o){o[0]&16&&!Vt(t.src,e=i[49].album.cover_small)&&p(t,"src",e),o[0]&16&&s!==(s=i[49].album.title+"")&&Et(l,s)},d(i){i&&(d(t),d(a),d(r))}}}function Cn(n){let t,e,a,r;return e=new le({props:{$$slots:{default:[Pn]},$$scope:{ctx:n}}}),{c(){t=k("a"),M(e.$$.fragment),this.h()},l(s){t=w(s,"A",{href:!0,title:!0});var l=T(t);R(e.$$.fragment,l),l.forEach(d),this.h()},h(){p(t,"href",a="https://www.deezer.com/album/"+n[49].album.id),p(t,"title","open album in Deezer web interface")},m(s,l){E(s,t,l),V(e,t,null),r=!0},p(s,l){const i={};l[0]&16|l[1]&2097152&&(i.$$scope={dirty:l,ctx:s}),e.$set(i),(!r||l[0]&16&&a!==(a="https://www.deezer.com/album/"+s[49].album.id))&&p(t,"href",a)},i(s){r||(O(e.$$.fragment,s),r=!0)},o(s){z(e.$$.fragment,s),r=!1},d(s){s&&d(t),F(e)}}}function En(n){let t,e;function a(){return n[34](n[49])}function r(){return n[35](n[49])}return t=new ol({props:{addTitle:"add all album titles to the playlist",removeTitle:"deselect all album titles from the playlist",$$slots:{default:[Cn]},$$scope:{ctx:n}}}),t.$on("add",a),t.$on("remove",r),{c(){M(t.$$.fragment)},l(s){R(t.$$.fragment,s)},m(s,l){V(t,s,l),e=!0},p(s,l){n=s;const i={};l[0]&16|l[1]&2097152&&(i.$$scope={dirty:l,ctx:n}),t.$set(i)},i(s){e||(O(t.$$.fragment,s),e=!0)},o(s){z(t.$$.fragment,s),e=!1},d(s){F(t,s)}}}function An(n){let t,e,a=n[49].artist.name+"",r,s;return{c(){t=k("a"),e=k("span"),r=vt(a),this.h()},l(l){t=w(l,"A",{href:!0,title:!0});var i=T(t);e=w(i,"SPAN",{});var o=T(e);r=bt(o,a),o.forEach(d),i.forEach(d),this.h()},h(){p(t,"href",s=n[49].artist.link),p(t,"title","open artist in Deezer web interface")},m(l,i){E(l,t,i),g(t,e),g(e,r)},p(l,i){i[0]&16&&a!==(a=l[49].artist.name+"")&&Et(r,a),i[0]&16&&s!==(s=l[49].artist.link)&&p(t,"href",s)},d(l){l&&d(t)}}}function Bn(n){let t,e;function a(){return n[36](n[49])}function r(){return n[37](n[49])}return t=new ol({props:{addTitle:"add all artist titles to the playlist",removeTitle:"deselect all artist titles from the playlist",$$slots:{default:[An]},$$scope:{ctx:n}}}),t.$on("add",a),t.$on("remove",r),{c(){M(t.$$.fragment)},l(s){R(t.$$.fragment,s)},m(s,l){V(t,s,l),e=!0},p(s,l){n=s;const i={};l[0]&16|l[1]&2097152&&(i.$$scope={dirty:l,ctx:n}),t.$set(i)},i(s){e||(O(t.$$.fragment,s),e=!0)},o(s){z(t.$$.fragment,s),e=!1},d(s){F(t,s)}}}function Nn(n){let t=n[49].rank+"",e;return{c(){e=vt(t)},l(a){e=bt(a,t)},m(a,r){E(a,e,r)},p(a,r){r[0]&16&&t!==(t=a[49].rank+"")&&Et(e,t)},d(a){a&&d(e)}}}function Sn(n){let t=Ce(n[49].duration*1e3,{units:["m","s"],largest:2})+"",e,a,r;return{c(){e=vt(t),a=N(),r=k("span"),this.h()},l(s){e=bt(s,t),a=S(s),r=w(s,"SPAN",{class:!0}),T(r).forEach(d),this.h()},h(){p(r,"class","grow")},m(s,l){E(s,e,l),E(s,a,l),E(s,r,l)},p(s,l){l[0]&16&&t!==(t=Ce(s[49].duration*1e3,{units:["m","s"],largest:2})+"")&&Et(e,t)},d(s){s&&(d(e),d(a),d(r))}}}function Ue(n){let t,e,a,r,s,l,i,o,u,h,c,f,y,m,b,P,C;return e=new qt({props:{$$slots:{default:[$n]},$$scope:{ctx:n}}}),r=new qt({props:{$$slots:{default:[yn]},$$scope:{ctx:n}}}),l=new qt({props:{justify:"start",$$slots:{default:[Tn]},$$scope:{ctx:n}}}),o=new qt({props:{justify:"start",$$slots:{default:[En]},$$scope:{ctx:n}}}),h=new qt({props:{justify:"start",$$slots:{default:[Bn]},$$scope:{ctx:n}}}),f=new qt({props:{$$slots:{default:[Nn]},$$scope:{ctx:n}}}),m=new qt({props:{$$slots:{default:[Sn]},$$scope:{ctx:n}}}),{c(){t=k("tr"),M(e.$$.fragment),a=N(),M(r.$$.fragment),s=N(),M(l.$$.fragment),i=N(),M(o.$$.fragment),u=N(),M(h.$$.fragment),c=N(),M(f.$$.fragment),y=N(),M(m.$$.fragment),b=N(),this.h()},l(A){t=w(A,"TR",{class:!0});var _=T(t);R(e.$$.fragment,_),a=S(_),R(r.$$.fragment,_),s=S(_),R(l.$$.fragment,_),i=S(_),R(o.$$.fragment,_),u=S(_),R(h.$$.fragment,_),c=S(_),R(f.$$.fragment,_),y=S(_),R(m.$$.fragment,_),b=S(_),_.forEach(d),this.h()},h(){p(t,"class",P=Ae(Fe(n[48]))+" svelte-p6m18c"),xt(t,"!text-red-500",!n[49].readable)},m(A,_){E(A,t,_),V(e,t,null),g(t,a),V(r,t,null),g(t,s),V(l,t,null),g(t,i),V(o,t,null),g(t,u),V(h,t,null),g(t,c),V(f,t,null),g(t,y),V(m,t,null),g(t,b),C=!0},p(A,_){const B={};_[0]&16|_[1]&2097152&&(B.$$scope={dirty:_,ctx:A}),e.$set(B);const H={};_[1]&2097152&&(H.$$scope={dirty:_,ctx:A}),r.$set(H);const Z={};_[0]&16|_[1]&2097152&&(Z.$$scope={dirty:_,ctx:A}),l.$set(Z);const X={};_[0]&16|_[1]&2097152&&(X.$$scope={dirty:_,ctx:A}),o.$set(X);const nt={};_[0]&16|_[1]&2097152&&(nt.$$scope={dirty:_,ctx:A}),h.$set(nt);const ot={};_[0]&16|_[1]&2097152&&(ot.$$scope={dirty:_,ctx:A}),f.$set(ot);const J={};_[0]&16|_[1]&2097152&&(J.$$scope={dirty:_,ctx:A}),m.$set(J),(!C||_[0]&16&&P!==(P=Ae(Fe(A[48]))+" svelte-p6m18c"))&&p(t,"class",P),(!C||_[0]&16)&&xt(t,"!text-red-500",!A[49].readable)},i(A){C||(O(e.$$.fragment,A),O(r.$$.fragment,A),O(l.$$.fragment,A),O(o.$$.fragment,A),O(h.$$.fragment,A),O(f.$$.fragment,A),O(m.$$.fragment,A),C=!0)},o(A){z(e.$$.fragment,A),z(r.$$.fragment,A),z(l.$$.fragment,A),z(o.$$.fragment,A),z(h.$$.fragment,A),z(f.$$.fragment,A),z(m.$$.fragment,A),C=!1},d(A){A&&d(t),F(e),F(r),F(l),F(o),F(h),F(f),F(m)}}}function On(n){var $e;let t,e,a,r="Title",s,l,i,o,u,h="Description",c,f,y,m,b="",P,C,A,_=(($e=n[2])==null?void 0:$e.filter(Ge).length)+"",B,H,Z=n[0].playlist.tracks.data.length+"",X,nt,ot,J,At="",at,st,_t,gt,Q,yt,it,Pt,Bt,et,$,U="Pos.",ht,dt,zt="Title",Nt,Lt,v="Album",D,j,rt="Artist",L,W,pt="rank",Y,x,Ut="duration",Yt,It,de,Dt,me,Mt,_e,ke,Ft=te(n[4]),lt=[];for(let I=0;I<Ft.length;I+=1)lt[I]=Ue(Ze(n,Ft,I));const ul=I=>z(lt[I],1,1,()=>{lt[I]=null});function cl(I){n[38](I)}let we={showFirstLastButtons:!0,showPreviousNextButtons:!0};return n[1]!==void 0&&(we.settings=n[1]),Dt=new _l({props:we}),Qe.push(()=>el(Dt,"settings",cl)),{c(){t=k("form"),e=k("label"),a=k("span"),a.textContent=r,s=N(),l=k("input"),i=N(),o=k("label"),u=k("span"),u.textContent=h,c=N(),f=k("textarea"),y=N(),m=k("div"),m.innerHTML=b,P=N(),C=k("div"),A=k("span"),B=vt(_),H=vt(" Tracks ("),X=vt(Z),nt=vt(`
            in playlist)`),ot=N(),J=k("span"),J.innerHTML=At,at=N(),st=k("span"),_t=k("table"),gt=k("thead"),Q=k("tr"),yt=k("th"),it=k("input"),et=N(),$=k("th"),$.textContent=U,ht=N(),dt=k("th"),dt.textContent=zt,Nt=N(),Lt=k("th"),Lt.textContent=v,D=N(),j=k("th"),j.textContent=rt,L=N(),W=k("th"),W.textContent=pt,Y=N(),x=k("th"),x.textContent=Ut,Yt=N(),It=k("tbody");for(let I=0;I<lt.length;I+=1)lt[I].c();de=N(),M(Dt.$$.fragment),this.h()},l(I){t=w(I,"FORM",{class:!0});var q=T(t);e=w(q,"LABEL",{class:!0});var Ct=T(e);a=w(Ct,"SPAN",{"data-svelte-h":!0}),ct(a)!=="svelte-7ccxmo"&&(a.textContent=r),s=S(Ct),l=w(Ct,"INPUT",{class:!0,type:!0,placeholder:!0}),Ct.forEach(d),i=S(q),o=w(q,"LABEL",{class:!0});var Jt=T(o);u=w(Jt,"SPAN",{"data-svelte-h":!0}),ct(u)!=="svelte-rmspr8"&&(u.textContent=h),c=S(Jt),f=w(Jt,"TEXTAREA",{class:!0,rows:!0,placeholder:!0}),T(f).forEach(d),Jt.forEach(d),y=S(q),m=w(q,"DIV",{class:!0,"data-svelte-h":!0}),ct(m)!=="svelte-10ijpzw"&&(m.innerHTML=b),q.forEach(d),P=S(I),C=w(I,"DIV",{class:!0});var ut=T(C);A=w(ut,"SPAN",{});var Rt=T(A);B=bt(Rt,_),H=bt(Rt," Tracks ("),X=bt(Rt,Z),nt=bt(Rt,`
            in playlist)`),Rt.forEach(d),ot=S(ut),J=w(ut,"SPAN",{"data-svelte-h":!0}),ct(J)!=="svelte-171hy05"&&(J.innerHTML=At),ut.forEach(d),at=S(I),st=w(I,"SPAN",{class:!0});var ne=T(st);_t=w(ne,"TABLE",{class:!0});var ae=T(_t);gt=w(ae,"THEAD",{});var ye=T(gt);Q=w(ye,"TR",{class:!0});var Tt=T(Q);yt=w(Tt,"TH",{});var Te=T(yt);it=w(Te,"INPUT",{type:!0,class:!0}),Te.forEach(d),et=S(Tt),$=w(Tt,"TH",{"data-svelte-h":!0}),ct($)!=="svelte-s1pt0e"&&($.textContent=U),ht=S(Tt),dt=w(Tt,"TH",{class:!0,"data-svelte-h":!0}),ct(dt)!=="svelte-1b5qsso"&&(dt.textContent=zt),Nt=S(Tt),Lt=w(Tt,"TH",{"data-svelte-h":!0}),ct(Lt)!=="svelte-12o9w3z"&&(Lt.textContent=v),D=S(Tt),j=w(Tt,"TH",{"data-svelte-h":!0}),ct(j)!=="svelte-1tiipkx"&&(j.textContent=rt),L=S(Tt),W=w(Tt,"TH",{"data-svelte-h":!0}),ct(W)!=="svelte-1btrpio"&&(W.textContent=pt),Y=S(Tt),x=w(Tt,"TH",{"data-svelte-h":!0}),ct(x)!=="svelte-9uwuqy"&&(x.textContent=Ut),Tt.forEach(d),ye.forEach(d),Yt=S(ae),It=w(ae,"TBODY",{});var Pe=T(It);for(let ge=0;ge<lt.length;ge+=1)lt[ge].l(Pe);Pe.forEach(d),ae.forEach(d),de=S(ne),R(Dt.$$.fragment,ne),ne.forEach(d),this.h()},h(){p(l,"class","input"),p(l,"type","text"),p(l,"placeholder","title"),p(e,"class","label"),p(f,"class","textarea"),p(f,"rows","4"),p(f,"placeholder","description"),p(o,"class","label"),p(m,"class","flex place-content-start"),p(t,"class","mb-10 space-y-2"),p(C,"class","flex justify-between w-full items-center gap-x-2 my-4"),p(it,"type","checkbox"),p(it,"class","checkbox"),it.checked=Pt=n[4].filter(Ke).length===n[4].length&&n[4].length>0,it.indeterminate=Bt=n[4].filter(Ye).length!==n[4].length&&n[4].filter(We).length>0,p(dt,"class",".fitwidth"),p(Q,"class",""),p(_t,"class","table my-4"),p(st,"class","table-container")},m(I,q){E(I,t,q),g(t,e),g(e,a),g(e,s),g(e,l),Xt(l,n[0].playlist.title),g(t,i),g(t,o),g(o,u),g(o,c),g(o,f),Xt(f,n[0].playlist.description),g(t,y),g(t,m),E(I,P,q),E(I,C,q),g(C,A),g(A,B),g(A,H),g(A,X),g(A,nt),g(C,ot),g(C,J),E(I,at,q),E(I,st,q),g(st,_t),g(_t,gt),g(gt,Q),g(Q,yt),g(yt,it),g(Q,et),g(Q,$),g(Q,ht),g(Q,dt),g(Q,Nt),g(Q,Lt),g(Q,D),g(Q,j),g(Q,L),g(Q,W),g(Q,Y),g(Q,x),g(_t,Yt),g(_t,It);for(let Ct=0;Ct<lt.length;Ct+=1)lt[Ct]&&lt[Ct].m(It,null);g(st,de),V(Dt,st,null),Mt=!0,_e||(ke=[tt(l,"input",n[30]),tt(f,"input",n[31]),tt(it,"change",n[32])],_e=!0)},p(I,q){var Jt;if(q[0]&1&&l.value!==I[0].playlist.title&&Xt(l,I[0].playlist.title),q[0]&1&&Xt(f,I[0].playlist.description),(!Mt||q[0]&4)&&_!==(_=((Jt=I[2])==null?void 0:Jt.filter(Ge).length)+"")&&Et(B,_),(!Mt||q[0]&1)&&Z!==(Z=I[0].playlist.tracks.data.length+"")&&Et(X,Z),(!Mt||q[0]&16&&Pt!==(Pt=I[4].filter(Ke).length===I[4].length&&I[4].length>0))&&(it.checked=Pt),(!Mt||q[0]&16&&Bt!==(Bt=I[4].filter(Ye).length!==I[4].length&&I[4].filter(We).length>0))&&(it.indeterminate=Bt),q[0]&1040){Ft=te(I[4]);let ut;for(ut=0;ut<Ft.length;ut+=1){const Rt=Ze(I,Ft,ut);lt[ut]?(lt[ut].p(Rt,q),O(lt[ut],1)):(lt[ut]=Ue(Rt),lt[ut].c(),O(lt[ut],1),lt[ut].m(It,null))}for(Gt(),ut=Ft.length;ut<lt.length;ut+=1)ul(ut);Kt()}const Ct={};!me&&q[0]&2&&(me=!0,Ct.settings=I[1],xe(()=>me=!1)),Dt.$set(Ct)},i(I){if(!Mt){for(let q=0;q<Ft.length;q+=1)O(lt[q]);O(Dt.$$.fragment,I),Mt=!0}},o(I){lt=lt.filter(Boolean);for(let q=0;q<lt.length;q+=1)z(lt[q]);z(Dt.$$.fragment,I),Mt=!1},d(I){I&&(d(t),d(P),d(C),d(at),d(st)),tl(lt,I),F(Dt),_e=!1,ee(ke)}}}function zn(n){let t,e="Search Artist";return{c(){t=k("h4"),t.textContent=e},l(a){t=w(a,"H4",{"data-svelte-h":!0}),ct(t)!=="svelte-z92qpb"&&(t.textContent=e)},m(a,r){E(a,t,r)},p:K,d(a){a&&d(t)}}}function In(n){let t,e,a,r,s,l=n[46].meta.name+"",i,o,u,h,c,f,y;h=new be({});function m(){return n[22](n[46])}return{c(){t=k("span"),e=k("span"),a=k("img"),s=N(),i=vt(l),o=N(),u=k("button"),M(h.$$.fragment),this.h()},l(b){t=w(b,"SPAN",{class:!0});var P=T(t);e=w(P,"SPAN",{class:!0});var C=T(e);a=w(C,"IMG",{src:!0,alt:!0,class:!0}),s=S(C),i=bt(C,l),C.forEach(d),o=S(P),u=w(P,"BUTTON",{class:!0,title:!0});var A=T(u);R(h.$$.fragment,A),A.forEach(d),P.forEach(d),this.h()},h(){Vt(a.src,r=n[46].meta.picture_small)||p(a,"src",r),p(a,"alt","artist"),p(a,"class","mx-2"),p(e,"class","flex items-center"),p(u,"class","btn"),p(u,"title","add all artist titles to the playlist"),p(t,"class","flex justify-between w-full items-center py-1")},m(b,P){E(b,t,P),g(t,e),g(e,a),g(e,s),g(e,i),g(t,o),g(t,u),V(h,u,null),c=!0,f||(y=tt(u,"click",m),f=!0)},p(b,P){n=b,(!c||P[1]&32768&&!Vt(a.src,r=n[46].meta.picture_small))&&p(a,"src",r),(!c||P[1]&32768)&&l!==(l=n[46].meta.name+"")&&Et(i,l)},i(b){c||(O(h.$$.fragment,b),c=!0)},o(b){z(h.$$.fragment,b),c=!1},d(b){b&&d(t),F(h),f=!1,y()}}}function Me(n){let t,e,a,r,s,l,i;e=new le({props:{$$slots:{default:[Dn]},$$scope:{ctx:n}}}),r=new le({props:{$$slots:{default:[Un]},$$scope:{ctx:n}}});let o=te(n[8]),u=[];for(let c=0;c<o.length;c+=1)u[c]=Re(Le(n,o,c));const h=c=>z(u[c],1,1,()=>{u[c]=null});return{c(){t=k("span"),M(e.$$.fragment),a=N(),M(r.$$.fragment),s=N(),l=k("ul");for(let c=0;c<u.length;c+=1)u[c].c();this.h()},l(c){t=w(c,"SPAN",{class:!0});var f=T(t);R(e.$$.fragment,f),a=S(f),R(r.$$.fragment,f),f.forEach(d),s=S(c),l=w(c,"UL",{class:!0});var y=T(l);for(let m=0;m<u.length;m+=1)u[m].l(y);y.forEach(d),this.h()},h(){p(t,"class","flex justify-between w-full items-center gap-x-2 my-4"),p(l,"class","list")},m(c,f){E(c,t,f),V(e,t,null),g(t,a),V(r,t,null),E(c,s,f),E(c,l,f);for(let y=0;y<u.length;y+=1)u[y]&&u[y].m(l,null);i=!0},p(c,f){const y={};f[1]&2097152&&(y.$$scope={dirty:f,ctx:c}),e.$set(y);const m={};if(f[0]&8|f[1]&2097152&&(m.$$scope={dirty:f,ctx:c}),r.$set(m),f[0]&1049856){o=te(c[8]);let b;for(b=0;b<o.length;b+=1){const P=Le(c,o,b);u[b]?(u[b].p(P,f),O(u[b],1)):(u[b]=Re(P),u[b].c(),O(u[b],1),u[b].m(l,null))}for(Gt(),b=o.length;b<u.length;b+=1)h(b);Kt()}},i(c){if(!i){O(e.$$.fragment,c),O(r.$$.fragment,c);for(let f=0;f<o.length;f+=1)O(u[f]);i=!0}},o(c){z(e.$$.fragment,c),z(r.$$.fragment,c),u=u.filter(Boolean);for(let f=0;f<u.length;f+=1)z(u[f]);i=!1},d(c){c&&(d(t),d(s),d(l)),F(e),F(r),tl(u,c)}}}function Dn(n){let t,e="Playlists Artists";return{c(){t=k("h4"),t.textContent=e},l(a){t=w(a,"H4",{"data-svelte-h":!0}),ct(t)!=="svelte-1fedd7v"&&(t.textContent=e)},m(a,r){E(a,t,r)},p:K,d(a){a&&d(t)}}}function Hn(n){let t,e="alphabetical",a,r;return{c(){t=k("button"),t.textContent=e},l(s){t=w(s,"BUTTON",{"data-svelte-h":!0}),ct(t)!=="svelte-a0poae"&&(t.textContent=e)},m(s,l){E(s,t,l),a||(r=tt(t,"click",n[25]),a=!0)},p:K,d(s){s&&d(t),a=!1,r()}}}function jn(n){let t,e="# tracks",a,r;return{c(){t=k("button"),t.textContent=e},l(s){t=w(s,"BUTTON",{"data-svelte-h":!0}),ct(t)!=="svelte-ms1gv1"&&(t.textContent=e)},m(s,l){E(s,t,l),a||(r=tt(t,"click",n[24]),a=!0)},p:K,d(s){s&&d(t),a=!1,r()}}}function Zn(n){let t,e,a,r,s;return e=new pn({}),{c(){t=k("button"),M(e.$$.fragment)},l(l){t=w(l,"BUTTON",{});var i=T(t);R(e.$$.fragment,i),i.forEach(d)},m(l,i){E(l,t,i),V(e,t,null),a=!0,r||(s=tt(t,"click",n[27]),r=!0)},p:K,i(l){a||(O(e.$$.fragment,l),a=!0)},o(l){z(e.$$.fragment,l),a=!1},d(l){l&&d(t),F(e),r=!1,s()}}}function Ln(n){let t,e,a,r,s;return e=new mn({}),{c(){t=k("button"),M(e.$$.fragment)},l(l){t=w(l,"BUTTON",{});var i=T(t);R(e.$$.fragment,i),i.forEach(d)},m(l,i){E(l,t,i),V(e,t,null),a=!0,r||(s=tt(t,"click",n[26]),r=!0)},p:K,i(l){a||(O(e.$$.fragment,l),a=!0)},o(l){z(e.$$.fragment,l),a=!1},d(l){l&&d(t),F(e),r=!1,s()}}}function Un(n){let t,e,a,r,s;function l(f,y){if(f[3].orderBy==="trackCount")return jn;if(f[3].orderBy==="alphabetical")return Hn}let i=l(n),o=i&&i(n);const u=[Ln,Zn],h=[];function c(f,y){return f[3].ascending?0:1}return e=c(n),a=h[e]=u[e](n),{c(){o&&o.c(),t=N(),a.c(),r=oe()},l(f){o&&o.l(f),t=S(f),a.l(f),r=oe()},m(f,y){o&&o.m(f,y),E(f,t,y),h[e].m(f,y),E(f,r,y),s=!0},p(f,y){i===(i=l(f))&&o?o.p(f,y):(o&&o.d(1),o=i&&i(f),o&&(o.c(),o.m(t.parentNode,t)));let m=e;e=c(f),e===m?h[e].p(f,y):(Gt(),z(h[m],1,1,()=>{h[m]=null}),Kt(),a=h[e],a?a.p(f,y):(a=h[e]=u[e](f),a.c()),O(a,1),a.m(r.parentNode,r))},i(f){s||(O(a),s=!0)},o(f){z(a),s=!1},d(f){f&&(d(t),d(r)),o&&o.d(f),h[e].d(f)}}}function Mn(n){let t,e,a,r,s,l=n[42].name+"",i,o,u,h,c=n[43]+"",f,y,m;return{c(){t=k("img"),r=N(),s=k("span"),i=vt(l),o=N(),u=k("small"),h=vt("(#"),f=vt(c),y=vt(")"),this.h()},l(b){t=w(b,"IMG",{src:!0,alt:!0}),r=S(b),s=w(b,"SPAN",{});var P=T(s);i=bt(P,l),P.forEach(d),o=S(b),u=w(b,"SMALL",{title:!0});var C=T(u);h=bt(C,"(#"),f=bt(C,c),y=bt(C,")"),C.forEach(d),this.h()},h(){Vt(t.src,e=n[42].picture_small)||p(t,"src",e),p(t,"alt",a=n[42].name),p(u,"title",m="artist has "+n[43]+" tracks in the playlist ")},m(b,P){E(b,t,P),E(b,r,P),E(b,s,P),g(s,i),E(b,o,P),E(b,u,P),g(u,h),g(u,f),g(u,y)},p(b,P){P[0]&256&&!Vt(t.src,e=b[42].picture_small)&&p(t,"src",e),P[0]&256&&a!==(a=b[42].name)&&p(t,"alt",a),P[0]&256&&l!==(l=b[42].name+"")&&Et(i,l),P[0]&256&&c!==(c=b[43]+"")&&Et(f,c),P[0]&256&&m!==(m="artist has "+b[43]+" tracks in the playlist ")&&p(u,"title",m)},d(b){b&&(d(t),d(r),d(s),d(o),d(u))}}}function Re(n){let t,e,a,r,s,l,i,o,u,h,c,f,y,m,b,P;r=new le({props:{$$slots:{default:[Mn]},$$scope:{ctx:n}}}),u=new be({});function C(){return n[28](n[42])}f=new rl({});function A(){return n[29](n[42])}return{c(){t=k("li"),e=k("span"),a=k("a"),M(r.$$.fragment),l=N(),i=k("div"),o=k("button"),M(u.$$.fragment),h=N(),c=k("button"),M(f.$$.fragment),y=N(),this.h()},l(_){t=w(_,"LI",{});var B=T(t);e=w(B,"SPAN",{class:!0});var H=T(e);a=w(H,"A",{href:!0,title:!0});var Z=T(a);R(r.$$.fragment,Z),Z.forEach(d),l=S(H),i=w(H,"DIV",{class:!0});var X=T(i);o=w(X,"BUTTON",{class:!0,title:!0});var nt=T(o);R(u.$$.fragment,nt),nt.forEach(d),h=S(X),c=w(X,"BUTTON",{class:!0,title:!0});var ot=T(c);R(f.$$.fragment,ot),ot.forEach(d),X.forEach(d),H.forEach(d),y=S(B),B.forEach(d),this.h()},h(){p(a,"href",s=n[42].link),p(a,"title","open artist in Deezer web interface"),p(o,"class","!p-0 "),p(o,"title","add all artist titles to the playlist"),p(c,"class","!p-0"),p(c,"title","deselect all artist titles from the playlist"),xt(c,"text-gray-500",n[43]===0),p(i,"class","btn-group-vertical btn btn-sm gap-y-1"),p(e,"class","flex flex-row justify-between w-full items-center gap-x-2")},m(_,B){E(_,t,B),g(t,e),g(e,a),V(r,a,null),g(e,l),g(e,i),g(i,o),V(u,o,null),g(i,h),g(i,c),V(f,c,null),g(t,y),m=!0,b||(P=[tt(o,"click",C),tt(c,"click",A)],b=!0)},p(_,B){n=_;const H={};B[0]&256|B[1]&2097152&&(H.$$scope={dirty:B,ctx:n}),r.$set(H),(!m||B[0]&256&&s!==(s=n[42].link))&&p(a,"href",s),(!m||B[0]&1048832)&&xt(c,"text-gray-500",n[43]===0)},i(_){m||(O(r.$$.fragment,_),O(u.$$.fragment,_),O(f.$$.fragment,_),m=!0)},o(_){z(r.$$.fragment,_),z(u.$$.fragment,_),z(f.$$.fragment,_),m=!1},d(_){_&&d(t),F(r),F(u),F(f),b=!1,ee(P)}}}function Rn(n){var A;let t,e,a,r,s,l,i,o,u,h,c,f,y,m;a=new le({props:{$$slots:{default:[zn]},$$scope:{ctx:n}}});function b(_){n[23](_)}let P={options:n[7],$$slots:{optionButton:[In,({option:_,onSelection:B})=>({46:_,47:B}),({option:_,onSelection:B})=>[0,(_?32768:0)|(B?65536:0)]]},$$scope:{ctx:n}};n[6]!==void 0&&(P.input=n[6]),o=new Kl({props:P}),Qe.push(()=>el(o,"input",b)),o.$on("selection",n[18]);let C=((A=n[8])==null?void 0:A.length)>0&&Me(n);return{c(){t=k("span"),e=k("span"),M(a.$$.fragment),r=N(),s=k("input"),l=N(),i=k("span"),M(o.$$.fragment),h=N(),C&&C.c(),c=oe(),this.h()},l(_){t=w(_,"SPAN",{class:!0});var B=T(t);e=w(B,"SPAN",{class:!0});var H=T(e);R(a.$$.fragment,H),H.forEach(d),r=S(B),s=w(B,"INPUT",{class:!0,type:!0,name:!0,placeholder:!0}),l=S(B),i=w(B,"SPAN",{class:!0,tabindex:!0});var Z=T(i);R(o.$$.fragment,Z),Z.forEach(d),B.forEach(d),h=S(_),C&&C.l(_),c=oe(),this.h()},h(){p(e,"class","mb-2"),p(s,"class","input"),p(s,"type","search"),p(s,"name","demo"),p(s,"placeholder","Search..."),p(i,"class","card w-full max-w-sm max-h-48 p-4 overflow-y-auto inline-block"),p(i,"tabindex","-1"),p(t,"class","my-4")},m(_,B){E(_,t,B),g(t,e),V(a,e,null),g(t,r),g(t,s),Xt(s,n[6]),g(t,l),g(t,i),V(o,i,null),E(_,h,B),C&&C.m(_,B),E(_,c,B),f=!0,y||(m=tt(s,"input",n[21]),y=!0)},p(_,B){var X;const H={};B[1]&2097152&&(H.$$scope={dirty:B,ctx:_}),a.$set(H),B[0]&64&&s.value!==_[6]&&Xt(s,_[6]);const Z={};B[0]&128&&(Z.options=_[7]),B[1]&2129920&&(Z.$$scope={dirty:B,ctx:_}),!u&&B[0]&64&&(u=!0,Z.input=_[6],xe(()=>u=!1)),o.$set(Z),((X=_[8])==null?void 0:X.length)>0?C?(C.p(_,B),B[0]&256&&O(C,1)):(C=Me(_),C.c(),O(C,1),C.m(c.parentNode,c)):C&&(Gt(),z(C,1,1,()=>{C=null}),Kt())},i(_){f||(O(a.$$.fragment,_),O(o.$$.fragment,_),O(C),f=!0)},o(_){z(a.$$.fragment,_),z(o.$$.fragment,_),z(C),f=!1},d(_){_&&(d(t),d(h),d(c)),F(a),F(o),C&&C.d(_),y=!1,m()}}}function Ve(n){let t,e=n[5].message+"",a,r,s,l,i;return{c(){t=k("span"),a=vt(e),r=N(),s=k("progress"),this.h()},l(o){t=w(o,"SPAN",{});var u=T(t);a=bt(u,e),u.forEach(d),r=S(o),s=w(o,"PROGRESS",{max:!0}),T(s).forEach(d),this.h()},h(){s.value=l=n[5].value,p(s,"max",i=n[5].max)},m(o,u){E(o,t,u),g(t,a),E(o,r,u),E(o,s,u)},p(o,u){u[0]&32&&e!==(e=o[5].message+"")&&Et(a,e),u[0]&32&&l!==(l=o[5].value)&&(s.value=l),u[0]&32&&i!==(i=o[5].max)&&p(s,"max",i)},d(o){o&&(d(t),d(r),d(s))}}}function Vn(n){let t,e,a="Save to Deezer",r,s,l,i,o,u="Update playlist info",h,c,f,y,m,b="Update Tracks",P,C,A,_="Prepare playlist",B,H,Z,X,nt,ot="retrieve non readable tracks",J,At,at,st,_t,gt,Q="remove de-selected tracks",yt,it,Pt,Bt;l=new He({}),f=new He({});let et=n[5]&&Ve(n);return Z=new rn({}),st=new en({}),{c(){t=k("div"),e=k("h3"),e.textContent=a,r=N(),s=k("button"),M(l.$$.fragment),i=N(),o=k("span"),o.textContent=u,h=N(),c=k("button"),M(f.$$.fragment),y=N(),m=k("span"),m.textContent=b,P=N(),et&&et.c(),C=N(),A=k("h3"),A.textContent=_,B=N(),H=k("button"),M(Z.$$.fragment),X=N(),nt=k("span"),nt.textContent=ot,At=N(),at=k("button"),M(st.$$.fragment),_t=N(),gt=k("span"),gt.textContent=Q,this.h()},l($){t=w($,"DIV",{class:!0});var U=T(t);e=w(U,"H3",{"data-svelte-h":!0}),ct(e)!=="svelte-1v8zjx5"&&(e.textContent=a),r=S(U),s=w(U,"BUTTON",{class:!0});var ht=T(s);R(l.$$.fragment,ht),i=S(ht),o=w(ht,"SPAN",{"data-svelte-h":!0}),ct(o)!=="svelte-wh4rhd"&&(o.textContent=u),ht.forEach(d),h=S(U),c=w(U,"BUTTON",{class:!0});var dt=T(c);R(f.$$.fragment,dt),y=S(dt),m=w(dt,"SPAN",{"data-svelte-h":!0}),ct(m)!=="svelte-67dhmv"&&(m.textContent=b),dt.forEach(d),P=S(U),et&&et.l(U),C=S(U),A=w(U,"H3",{"data-svelte-h":!0}),ct(A)!=="svelte-1oj9aef"&&(A.textContent=_),B=S(U),H=w(U,"BUTTON",{class:!0,title:!0});var zt=T(H);R(Z.$$.fragment,zt),X=S(zt),nt=w(zt,"SPAN",{"data-svelte-h":!0}),ct(nt)!=="svelte-dro7np"&&(nt.textContent=ot),zt.forEach(d),At=S(U),at=w(U,"BUTTON",{class:!0,title:!0});var Nt=T(at);R(st.$$.fragment,Nt),_t=S(Nt),gt=w(Nt,"SPAN",{"data-svelte-h":!0}),ct(gt)!=="svelte-13uzf89"&&(gt.textContent=Q),Nt.forEach(d),U.forEach(d),this.h()},h(){p(s,"class","btn variant-filled-primary"),p(c,"class","btn variant-filled-secondary"),p(H,"class","btn variant-filled-tertiary"),H.disabled=J=n[2].filter(Je).length===0,p(H,"title","trye to find equivalent of tracks that are not readable anymore"),p(at,"class","btn variant-filled-tertiary"),at.disabled=yt=n[2].filter(qe).length===0,p(at,"title","remove de-selected new tracks"),p(t,"class","flex flex-col gap-y-4 w-4/5")},m($,U){E($,t,U),g(t,e),g(t,r),g(t,s),V(l,s,null),g(s,i),g(s,o),g(t,h),g(t,c),V(f,c,null),g(c,y),g(c,m),g(t,P),et&&et.m(t,null),g(t,C),g(t,A),g(t,B),g(t,H),V(Z,H,null),g(H,X),g(H,nt),g(t,At),g(t,at),V(st,at,null),g(at,_t),g(at,gt),it=!0,Pt||(Bt=[tt(s,"click",ie(n[12])),tt(c,"click",ie(n[14])),tt(H,"click",ie(n[15])),tt(at,"click",ie(n[16]))],Pt=!0)},p($,U){$[5]?et?et.p($,U):(et=Ve($),et.c(),et.m(t,C)):et&&(et.d(1),et=null),(!it||U[0]&4&&J!==(J=$[2].filter(Je).length===0))&&(H.disabled=J),(!it||U[0]&4&&yt!==(yt=$[2].filter(qe).length===0))&&(at.disabled=yt)},i($){it||(O(l.$$.fragment,$),O(f.$$.fragment,$),O(Z.$$.fragment,$),O(st.$$.fragment,$),it=!0)},o($){z(l.$$.fragment,$),z(f.$$.fragment,$),z(Z.$$.fragment,$),z(st.$$.fragment,$),it=!1},d($){$&&d(t),F(l),F(f),et&&et.d(),F(Z),F(st),Pt=!1,ee(Bt)}}}function Fn(n){let t,e;return t=new ml({props:{$$slots:{sidebarRight:[Vn],sidebarLeft:[Rn],default:[On]},$$scope:{ctx:n}}}),{c(){M(t.$$.fragment)},l(a){R(t.$$.fragment,a)},m(a,r){V(t,a,r),e=!0},p(a,r){const s={};r[0]&511|r[1]&2097152&&(s.$$scope={dirty:r,ctx:a}),t.$set(s)},i(a){e||(O(t.$$.fragment,a),e=!0)},o(a){z(t.$$.fragment,a),e=!1},d(a){F(t,a)}}}function Jn(n,t){const e=[];for(let a=0;a<n.length;a+=t)e.push(n.slice(a,a+t));return e}function Fe(n){return!n.inPlaylist&&n.selected?"!text-lime-500":n.inPlaylist&&!n.selected?"!line-through":""}const Je=n=>n.selected&&!n.track.readable,qe=n=>!n.selected&&!n.inPlaylist,Ge=n=>n.selected,Ke=n=>n.selected,Ye=n=>n.selected,We=n=>n.selected;function qn(n,t,e){let a,r,s,l,i,o;const u=Pl();let{data:h}=t;const c=se([]);Wt(n,c,v=>e(8,o=v));const f=se([]);Wt(n,f,v=>e(2,r=v));const y={ascending:!1,orderBy:"trackCount"};function m(v){v.ascending!==void 0&&e(3,y.ascending=v.ascending,y),v.orderBy!==void 0&&e(3,y.orderBy=v.orderBy,y),c.update(D=>{const j=y.ascending?1:-1,rt=(Y,x)=>ot(Y.id)-ot(x.id),L=(Y,x)=>Y.name.localeCompare(x.name),W=(Y,x)=>(Ut,Yt)=>{const It=Y(Ut,Yt);return It===0?x(Ut,Yt):It};return D.sort((Y,x)=>{switch(y.orderBy){case"trackCount":return j*W(rt,L)(Y,x);case"alphabetical":return j*W(L,rt)(Y,x)}})})}async function b(){const v={request_method:"POST"};h.playlist.title&&(v.title=h.playlist.title),h.playlist.description&&(v.description=h.playlist.description),h.playlist.public&&(v.public=h.playlist.public);try{const D=await Qt({apiPath:`/playlist/${h.playlist.id}`,searchParams:v});u.trigger({message:`Updated playlist: ${D?"OK":"KO"}`,timeout:3e3})}catch(D){u.trigger({message:`Updated playlist: error ${D}`,timeout:3e3})}}let P=se(void 0);Wt(n,P,v=>e(5,s=v));async function C(v,D,j){if(!v.length)return;P.set({message:`sending 0/${v.length} ${D} ${j} `,value:0,max:v.length});let rt=0;const L=100;for(const W of Jn(v,L)){rt+=L,P.set({message:`sending ${rt} / ${v.length} ${D} ${j} `,value:rt,max:v.length}),console.log(`sending ${D} ${j}=${JSON.stringify(W)}`);const pt={request_method:D};pt[j]=W.join(",");const Y=await Qt({apiPath:`/playlist/${h.playlist.id}/tracks`,searchParams:pt});if(console.log({updateResult:Y}),!Y)throw new Error(`unable to send ${D} ${j}=${JSON.stringify(W)}`)}}async function A(){try{const v=r.filter(j=>j.selected&&!j.inPlaylist).map(j=>j.track.id);await C(v,"POST","songs");const D=r.filter(j=>!j.selected&&j.inPlaylist).map(j=>j.track.id);if(await C(D,"DELETE","songs"),v.length>0){const j=r.filter(rt=>rt.selected).map(rt=>rt.track.id);await C(j,"POST","order")}if(P.set(void 0),v.length||D.length){const j=u.trigger({message:"Updated playlist tracks, refreshing playlist data"});await Tl(),u.close(j)}}catch(v){u.trigger({message:`Updated playlist tracks: error ${v}`,timeout:3e3})}finally{P.set(void 0)}}async function _(v){const D=await sl(v.artist.id);if(!D){u.trigger({message:`Could not find artist ${v.artist.name}`,timeout:3e3});return}const j=D.flatMap(W=>{const{tracks:pt,...Y}=W;return W.tracks.map(x=>({...x,album:Y}))}).filter(W=>W.id!==v.id&&W.readable),rt={sensitivity:"base",ignorePunctuation:!0,numeric:!1,usage:"search"},L=j.filter(W=>W.title.localeCompare(v.title,void 0,rt)===0);switch(L.length){case 0:console.log("no match by title",{unreadableTrack:v}),u.trigger({message:`Could not find matching track for '${v.title}' in album '${v.album.title}'`,timeout:3e3});return;case 1:return L[0];default:{const W=Object.values(L.reduce((Y,x)=>(Y[x.isrc]=x,Y),{}));if(W.length===1)return W[0];const pt=L.filter(Y=>Y.album.title.localeCompare(v.album.title,void 0,rt)===0);switch(pt.length){case 0:console.log("no match by title and album",{unreadableTrack:v}),u.trigger({message:`Could not find matching track for '${v.title}' in album '${v.album.title}'`,timeout:3e3});return;case 1:return pt[0];default:{const Y=Object.values(pt.reduce((x,Ut)=>(x[Ut.isrc]=Ut,x),{}));if(Y.length===1)return Y[0];console.log("multple match by title",{unreadableTrack:v,matchingTracksByTitleAndAlbum:pt}),u.trigger({message:`Found multiple matching tracks for '${v.title}' in album '${v.album.title}' : ${pt.map(x=>x.id)}`,timeout:3e3});return}}}}}async function B(){const v=vl(f),D=v.filter(L=>L.selected&&L.track.readable).length,j=v.filter(L=>L.selected&&!L.track.readable);for(const L of j){const W=L.track,pt=await _(W);if(pt){console.log("adding alternative to "+L.track.id+" : "+pt.title),L.selected=!1;const Y=v.indexOf(L);v.splice(Y+1,0,{selected:!0,inPlaylist:!1,track:pt})}}const rt=v.filter(L=>L.selected&&L.track.readable).length;u.trigger({message:`Reattached ${rt-D} track(s) to readable equivalents.<br/>(${v.filter(L=>L.selected).length-rt} unreadable track remaining)`,timeout:1e4}),f.set(v)}function H(){f.update(v=>{const D=v.filter(j=>j.selected||j.inPlaylist);return u.trigger({message:`Removed ${v.length-D.length} track(s) from the playlist`,timeout:3e3}),D})}let Z=se("");Wt(n,Z,v=>e(6,l=v));function X(v){const D=v.detail.value;re(D,f)}const nt=fl(Z,(v,D)=>{if(!v){D([]);return}Qt({apiPath:"/search/artist",searchParams:{q:v}}).then(j=>{const rt=j.data.map(L=>({label:`<span class="flex justify-between w-full items-center">
<span class="flex items-center"> <img src="${L.picture_small}" class="mx-2"/>${L.name}</span>
 <button class="btn-icon btn-icon-sm variant-outline-tertiary" title="add all artist titles to the playlist">add</button></span>`,value:L.id,meta:L}));D(rt)})});Wt(n,nt,v=>e(7,i=v));function ot(v){return r.filter(D=>D.track.artist.id===v&&D.selected).length}let J={page:0,limit:10,size:10,amounts:[10,20,50,100]};function At(){l=this.value,Z.set(l)}const at=v=>re(v.meta.id,f);function st(v){l=v,Z.set(l)}const _t=()=>m({orderBy:"alphabetical"}),gt=()=>m({orderBy:"trackCount"}),Q=()=>m({ascending:!1}),yt=()=>m({ascending:!0}),it=v=>re(v.id,f),Pt=v=>je(v.id,f);function Bt(){h.playlist.title=this.value,e(0,h)}function et(){h.playlist.description=this.value,e(0,h)}const $=v=>{a.forEach(D=>D.selected=v.target.checked),f.update(D=>D)};function U(v,D){v[D].selected=this.checked,e(4,a),e(2,r),e(1,J)}const ht=v=>bn(v.album,f),dt=v=>vn(v.album.id,f),zt=v=>re(v.artist.id,f),Nt=v=>je(v.artist.id,f);function Lt(v){J=v,e(1,J),e(2,r)}return n.$$set=v=>{"data"in v&&e(0,h=v.data)},n.$$.update=()=>{if(n.$$.dirty[0]&1&&c.set(h.topArtists),n.$$.dirty[0]&1){const v=h.playlist.tracks.data.map(D=>({track:D,inPlaylist:!0,selected:!0}));f.set(v)}n.$$.dirty[0]&4&&e(1,J.size=r.length,J),n.$$.dirty[0]&6&&e(4,a=r.slice(J.page*J.limit,J.page*J.limit+J.limit))},[h,J,r,y,a,s,l,i,o,c,f,m,b,P,A,B,H,Z,X,nt,ot,At,at,st,_t,gt,Q,yt,it,Pt,Bt,et,$,U,ht,dt,zt,Nt,Lt]}class la extends wt{constructor(t){super(),$t(this,t,qn,Fn,kt,{data:0},null,[-1,-1])}}export{la as component,ea as universal};
