import{d as wl,w as fe}from"../chunks/paths.e5258734.js";import{g as yl,c as ne,r as $l}from"../chunks/DeezerCall.0009c917.js";import{g as pe,P as Tl,b as El,h as Ae}from"../chunks/PlaylistApplicationShell.38acb65f.js";import{s as gt,f as y,g as $,h as C,d as m,j as g,i as P,Q as ve,S as be,C as L,D as W,e as ae,a as O,c as I,x as v,I as X,w as Ht,y as Zt,z as Mt,A as Ut,L as Nt,H as Ct,M as St,G as Pt,N as et,r as V,R as Yt,T as se,K as ie,F as ee,U as Be,l as yt,m as $t,n as zt,J as Cl,k as Pl,p as rl,O as mt,V as le,P as ol,W as he,X as Al,Y as Ne}from"../chunks/scheduler.272fdf4b.js";import{S as pt,i as vt,a as A,g as Dt,c as Lt,t as N,b as Z,d as M,m as U,e as R,j as Bl,k as Nl,o as ul}from"../chunks/index.5f6c21a1.js";import{e as Wt,p as Sl,u as Ol,o as Il}from"../chunks/ProgressBar.svelte_svelte_type_style_lang.b39a3af7.js";import{i as zl}from"../chunks/navigation.8a105482.js";import{a as Ot,s as Se,g as Dl}from"../chunks/index.3a0fc3aa.js";function Oe(a,t,e){const l=a.slice();return l[15]=t[e],l[17]=e,l}const Ll=a=>({}),Ie=a=>({}),jl=a=>({}),ze=a=>({}),Hl=a=>({}),De=a=>({}),Zl=a=>({}),Le=a=>({}),Ml=a=>({}),je=a=>({}),Ul=a=>({}),He=a=>({});function Rl(a){let t,e,l,s,i,n,r,o;const u=[ql,Jl,Fl],h=[];function c(f,p){return p&1&&(e=null),p&1&&(l=null),e==null&&(e=!!cl(f[0],f[17])),e?0:(l==null&&(l=!!fl(f[0],f[17])),l?1:2)}return s=c(a,-1),i=h[s]=u[s](a),{c(){t=y("span"),i.c(),n=O(),this.h()},l(f){t=$(f,"SPAN",{class:!0});var p=C(t);i.l(p),n=I(p),p.forEach(m),this.h()},h(){g(t,"class",r="rating-icon "+a[3])},m(f,p){P(f,t,p),h[s].m(t,null),v(t,n),o=!0},p(f,p){let d=s;s=c(f,p),s===d?h[s].p(f,p):(Dt(),N(h[d],1,1,()=>{h[d]=null}),Lt(),i=h[s],i?i.p(f,p):(i=h[s]=u[s](f),i.c()),A(i,1),i.m(t,n)),(!o||p&8&&r!==(r="rating-icon "+f[3]))&&g(t,"class",r)},i(f){o||(A(i),o=!0)},o(f){N(i),o=!1},d(f){f&&m(t),h[s].d()}}}function Vl(a){let t,e,l,s,i,n,r,o,u,h;const c=[Yl,Kl,Gl],f=[];function p(_,E){return E&1&&(e=null),E&1&&(l=null),e==null&&(e=!!cl(_[0],_[17])),e?0:(l==null&&(l=!!fl(_[0],_[17])),l?1:2)}s=p(a,-1),i=f[s]=c[s](a);function d(){return a[12](a[17])}return{c(){t=y("button"),i.c(),n=O(),this.h()},l(_){t=$(_,"BUTTON",{class:!0,type:!0});var E=C(t);i.l(E),n=I(E),E.forEach(m),this.h()},h(){g(t,"class",r="rating-icon "+a[3]),g(t,"type","button")},m(_,E){P(_,t,E),f[s].m(t,null),v(t,n),o=!0,u||(h=X(t,"click",d),u=!0)},p(_,E){a=_;let k=s;s=p(a,E),s===k?f[s].p(a,E):(Dt(),N(f[k],1,1,()=>{f[k]=null}),Lt(),i=f[s],i?i.p(a,E):(i=f[s]=c[s](a),i.c()),A(i,1),i.m(t,n)),(!o||E&8&&r!==(r="rating-icon "+a[3]))&&g(t,"class",r)},i(_){o||(A(i),o=!0)},o(_){N(i),o=!1},d(_){_&&m(t),f[s].d(),u=!1,h()}}}function Fl(a){let t;const e=a[11].empty,l=Ht(e,a,a[10],Ie);return{c(){l&&l.c()},l(s){l&&l.l(s)},m(s,i){l&&l.m(s,i),t=!0},p(s,i){l&&l.p&&(!t||i&1024)&&Zt(l,e,s,s[10],t?Ut(e,s[10],i,Ll):Mt(s[10]),Ie)},i(s){t||(A(l,s),t=!0)},o(s){N(l,s),t=!1},d(s){l&&l.d(s)}}}function Jl(a){let t;const e=a[11].half,l=Ht(e,a,a[10],ze);return{c(){l&&l.c()},l(s){l&&l.l(s)},m(s,i){l&&l.m(s,i),t=!0},p(s,i){l&&l.p&&(!t||i&1024)&&Zt(l,e,s,s[10],t?Ut(e,s[10],i,jl):Mt(s[10]),ze)},i(s){t||(A(l,s),t=!0)},o(s){N(l,s),t=!1},d(s){l&&l.d(s)}}}function ql(a){let t;const e=a[11].full,l=Ht(e,a,a[10],De);return{c(){l&&l.c()},l(s){l&&l.l(s)},m(s,i){l&&l.m(s,i),t=!0},p(s,i){l&&l.p&&(!t||i&1024)&&Zt(l,e,s,s[10],t?Ut(e,s[10],i,Hl):Mt(s[10]),De)},i(s){t||(A(l,s),t=!0)},o(s){N(l,s),t=!1},d(s){l&&l.d(s)}}}function Gl(a){let t;const e=a[11].empty,l=Ht(e,a,a[10],Le);return{c(){l&&l.c()},l(s){l&&l.l(s)},m(s,i){l&&l.m(s,i),t=!0},p(s,i){l&&l.p&&(!t||i&1024)&&Zt(l,e,s,s[10],t?Ut(e,s[10],i,Zl):Mt(s[10]),Le)},i(s){t||(A(l,s),t=!0)},o(s){N(l,s),t=!1},d(s){l&&l.d(s)}}}function Kl(a){let t;const e=a[11].half,l=Ht(e,a,a[10],je);return{c(){l&&l.c()},l(s){l&&l.l(s)},m(s,i){l&&l.m(s,i),t=!0},p(s,i){l&&l.p&&(!t||i&1024)&&Zt(l,e,s,s[10],t?Ut(e,s[10],i,Ml):Mt(s[10]),je)},i(s){t||(A(l,s),t=!0)},o(s){N(l,s),t=!1},d(s){l&&l.d(s)}}}function Yl(a){let t;const e=a[11].full,l=Ht(e,a,a[10],He);return{c(){l&&l.c()},l(s){l&&l.l(s)},m(s,i){l&&l.m(s,i),t=!0},p(s,i){l&&l.p&&(!t||i&1024)&&Zt(l,e,s,s[10],t?Ut(e,s[10],i,Ul):Mt(s[10]),He)},i(s){t||(A(l,s),t=!0)},o(s){N(l,s),t=!1},d(s){l&&l.d(s)}}}function Ze(a){let t,e,l,s;const i=[Vl,Rl],n=[];function r(o,u){return o[2]?0:1}return t=r(a),e=n[t]=i[t](a),{c(){e.c(),l=ae()},l(o){e.l(o),l=ae()},m(o,u){n[t].m(o,u),P(o,l,u),s=!0},p(o,u){let h=t;t=r(o),t===h?n[t].p(o,u):(Dt(),N(n[h],1,1,()=>{n[h]=null}),Lt(),e=n[t],e?e.p(o,u):(e=n[t]=i[t](o),e.c()),A(e,1),e.m(l.parentNode,l))},i(o){s||(A(e),s=!0)},o(o){N(e),s=!1},d(o){o&&m(l),n[t].d(o)}}}function Wl(a){let t,e,l,s=Wt({length:a[1]}),i=[];for(let r=0;r<s.length;r+=1)i[r]=Ze(Oe(a,s,r));const n=r=>N(i[r],1,1,()=>{i[r]=null});return{c(){t=y("div");for(let r=0;r<i.length;r+=1)i[r].c();this.h()},l(r){t=$(r,"DIV",{class:!0,"data-testid":!0});var o=C(t);for(let u=0;u<i.length;u+=1)i[u].l(o);o.forEach(m),this.h()},h(){g(t,"class",e="ratings "+a[4]),g(t,"data-testid","rating-bar")},m(r,o){P(r,t,o);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(t,null);l=!0},p(r,[o]){if(o&1071){s=Wt({length:r[1]});let u;for(u=0;u<s.length;u+=1){const h=Oe(r,s,u);i[u]?(i[u].p(h,o),A(i[u],1)):(i[u]=Ze(h),i[u].c(),A(i[u],1),i[u].m(t,null))}for(Dt(),u=s.length;u<i.length;u+=1)n(u);Lt()}(!l||o&16&&e!==(e="ratings "+r[4]))&&g(t,"class",e)},i(r){if(!l){for(let o=0;o<s.length;o+=1)A(i[o]);l=!0}},o(r){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)N(i[o]);l=!1},d(r){r&&m(t),ve(i,r)}}}const Xl="w-full flex";function cl(a,t){return Math.floor(a)>=t+1}function fl(a,t){return a===t+.5}function Ql(a,t,e){let l,{$$slots:s={},$$scope:i}=t,{value:n=0}=t,{max:r=5}=t,{interactive:o=!1}=t,{text:u="text-token"}=t,{fill:h="fill-token"}=t,{justify:c="justify-center"}=t,{spacing:f="space-x-2"}=t,{regionIcon:p=""}=t;const d=be();function _(k){d("icon",{index:k+1})}const E=k=>_(k);return a.$$set=k=>{e(14,t=L(L({},t),W(k))),"value"in k&&e(0,n=k.value),"max"in k&&e(1,r=k.max),"interactive"in k&&e(2,o=k.interactive),"text"in k&&e(6,u=k.text),"fill"in k&&e(7,h=k.fill),"justify"in k&&e(8,c=k.justify),"spacing"in k&&e(9,f=k.spacing),"regionIcon"in k&&e(3,p=k.regionIcon),"$$scope"in k&&e(10,i=k.$$scope)},a.$$.update=()=>{e(4,l=`${Xl} ${u} ${h} ${c} ${f} ${t.class??""}`)},t=W(t),[n,r,o,p,l,_,u,h,c,f,i,s,E]}class xl extends pt{constructor(t){super(),vt(this,t,Ql,Wl,gt,{value:0,max:1,interactive:2,text:6,fill:7,justify:8,spacing:9,regionIcon:3})}}var ke={exports:{}};function hl(){var a=Object.create(null),t=0,e=0,l=0,s=!1;this.put=function(n,r,o,u){if(s&&console.log("caching: %s = %j (@%s)",n,r,o),typeof o<"u"&&(typeof o!="number"||isNaN(o)||o<=0))throw new Error("Cache timeout must be a positive number");if(typeof u<"u"&&typeof u!="function")throw new Error("Cache timeout callback must be a function");var h=a[n];h?clearTimeout(h.timeout):l++;var c={value:r,expire:o+Date.now()};return isNaN(c.expire)||(c.timeout=setTimeout((function(){i(n),u&&u(n,r)}).bind(this),o)),a[n]=c,r},this.del=function(n){var r=!0,o=a[n];return o?(clearTimeout(o.timeout),!isNaN(o.expire)&&o.expire<Date.now()&&(r=!1)):r=!1,r&&i(n),r};function i(n){l--,delete a[n]}this.clear=function(){for(var n in a)clearTimeout(a[n].timeout);l=0,a=Object.create(null),s&&(t=0,e=0)},this.get=function(n){var r=a[n];if(typeof r<"u"){if(isNaN(r.expire)||r.expire>=Date.now())return s&&t++,r.value;s&&e++,l--,delete a[n]}else s&&e++;return null},this.size=function(){return l},this.memsize=function(){var n=0,r;for(r in a)n++;return n},this.debug=function(n){s=n},this.hits=function(){return t},this.misses=function(){return e},this.keys=function(){return Object.keys(a)},this.exportJson=function(){var n={};for(var r in a){var o=a[r];n[r]={value:o.value,expire:o.expire||"NaN"}}return JSON.stringify(n)},this.importJson=function(n,r){var o=JSON.parse(n),u=Date.now(),h=r&&r.skipDuplicates;for(var c in o)if(o.hasOwnProperty(c)){if(h){var f=a[c];if(f){s&&console.log("Skipping duplicate imported key '%s'",c);continue}}var p=o[c],d=p.expire-u;if(d<=0){this.del(c);continue}d=d>0?d:void 0,this.put(c,p.value,d)}return this.size()}}ke.exports=new hl;ke.exports.Cache=hl;var tn=ke.exports;const Me=yl(tn);class ml{constructor(t,e){this.cacheName=t,this.ttl=e}get(t){return Me.get(this.buildKey(t))}buildKey(t){return this.cacheName+"~"+t}put(t,e){Me.put(this.buildKey(t),e,this.ttl)}}const Ue=new ml("ARTIST",3600*1e3),Re=new ml("ARTIST-DISCOGRAPHY",3600*1e3);async function en(a){const t=Ue.get(a);if(t)return t;const e=await ne({apiPath:"/artist/"+a});return Ue.put(a,e),e}async function dl(a){return await pe({apiPath:"/album/"+a+"/tracks",index:0,limit:100})}async function _l(a){const t=Re.get(a);if(t)return t;const e=await pe({apiPath:"/artist/"+a+"/albums",index:0,limit:100}),l=await Promise.all(e.data.map(async s=>{const i=await dl(s.id);return{...s,tracks:i.data}}));return Re.put(a,l),l}const ln=!1;async function nn(a){if(a==="NEW"){const t=new Date().toISOString(),e=await ne({apiPath:"/user/me/playlists",searchParams:{request_method:"POST",title:`New Playlist ${t}`,description:`Playlist created with deezer-artist-playlist-organizer on the ${t}`,public:!0}});throw $l(302,"./"+e.id)}return a}async function an({params:a}){const t=await nn(a.id),e=await ne({apiPath:`/playlist/${t}`}),l=e.tracks.data.reduce((n,r)=>(n[r.artist.id]||(n[r.artist.id]={artist:r.artist,count:0}),n[r.artist.id].count++,n),{}),s=Object.values(l).sort((n,r)=>r.count-n.count);if(e.nb_tracks>400){const n=await pe({apiPath:`/playlist/${t}/tracks`,limit:100,index:e.tracks.data.length});e.tracks.data=[...e.tracks.data,...n.data]}const i=Promise.all(s.map(async n=>await en(n.artist.id)));return{playlist:e,topArtists:i}}const Ua=Object.freeze(Object.defineProperty({__proto__:null,load:an,ssr:ln},Symbol.toStringTag,{value:"Module"}));function sn(a){let t,e,l='<path fill="currentColor" d="M128 20a108 108 0 1 0 108 108A108.12 108.12 0 0 0 128 20Zm0 192a84 84 0 1 1 84-84a84.09 84.09 0 0 1-84 84Zm40-84a12 12 0 0 1-5.12 9.83l-40 28A12 12 0 0 1 104 156v-56a12 12 0 0 1 18.88-9.83l40 28A12 12 0 0 1 168 128Z"/>',s=[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},a[0]],i={};for(let n=0;n<s.length;n+=1)i=L(i,s[n]);return{c(){t=Nt("svg"),e=new Ct(!0),this.h()},l(n){t=St(n,"svg",{viewBox:!0,width:!0,height:!0});var r=C(t);e=Pt(r,!0),r.forEach(m),this.h()},h(){e.a=null,et(t,i)},m(n,r){P(n,t,r),e.m(l,t)},p(n,[r]){et(t,i=Ot(s,[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},r&1&&n[0]]))},i:V,o:V,d(n){n&&m(t)}}}function rn(a,t,e){return a.$$set=l=>{e(0,t=L(L({},t),W(l)))},t=W(t),[t]}class on extends pt{constructor(t){super(),vt(this,t,rn,sn,gt,{})}}function un(a){let t,e,l='<path fill="currentColor" d="M128 20a108 108 0 1 0 108 108A108.12 108.12 0 0 0 128 20Zm0 192a84 84 0 1 1 84-84a84.09 84.09 0 0 1-84 84ZM116 96v64a12 12 0 0 1-24 0V96a12 12 0 0 1 24 0Zm48 0v64a12 12 0 0 1-24 0V96a12 12 0 0 1 24 0Z"/>',s=[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},a[0]],i={};for(let n=0;n<s.length;n+=1)i=L(i,s[n]);return{c(){t=Nt("svg"),e=new Ct(!0),this.h()},l(n){t=St(n,"svg",{viewBox:!0,width:!0,height:!0});var r=C(t);e=Pt(r,!0),r.forEach(m),this.h()},h(){e.a=null,et(t,i)},m(n,r){P(n,t,r),e.m(l,t)},p(n,[r]){et(t,i=Ot(s,[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},r&1&&n[0]]))},i:V,o:V,d(n){n&&m(t)}}}function cn(a,t,e){return a.$$set=l=>{e(0,t=L(L({},t),W(l)))},t=W(t),[t]}class fn extends pt{constructor(t){super(),vt(this,t,cn,un,gt,{})}}function hn(a){let t,e,l,s,i;return e=new fn({}),{c(){t=y("span"),Z(e.$$.fragment),this.h()},l(n){t=$(n,"SPAN",{role:!0});var r=C(t);M(e.$$.fragment,r),r.forEach(m),this.h()},h(){g(t,"role","button")},m(n,r){P(n,t,r),U(e,t,null),l=!0,s||(i=X(t,"click",a[4]),s=!0)},p:V,i(n){l||(A(e.$$.fragment,n),l=!0)},o(n){N(e.$$.fragment,n),l=!1},d(n){n&&m(t),R(e),s=!1,i()}}}function mn(a){let t,e,l,s,i;return e=new on({}),{c(){t=y("span"),Z(e.$$.fragment),this.h()},l(n){t=$(n,"SPAN",{role:!0});var r=C(t);M(e.$$.fragment,r),r.forEach(m),this.h()},h(){g(t,"role","button")},m(n,r){P(n,t,r),U(e,t,null),l=!0,s||(i=X(t,"click",a[4]),s=!0)},p:V,i(n){l||(A(e.$$.fragment,n),l=!0)},o(n){N(e.$$.fragment,n),l=!1},d(n){n&&m(t),R(e),s=!1,i()}}}function dn(a){let t,e,l=!0,s,i,n,r,o,u,h;const c=[mn,hn],f=[];function p(d,_){return d[0]?0:1}return n=p(a),r=f[n]=c[n](a),{c(){t=y("audio"),s=O(),i=y("span"),r.c(),this.h()},l(d){t=$(d,"AUDIO",{src:!0}),C(t).forEach(m),s=I(d),i=$(d,"SPAN",{});var _=C(i);r.l(_),_.forEach(m),this.h()},h(){Yt(t.src,e=a[1])||g(t,"src",e),t.loop=a[2],se(i,"text-gray-500",!a[3])},m(d,_){P(d,t,_),P(d,s,_),P(d,i,_),f[n].m(i,null),o=!0,u||(h=[X(t,"play",a[5]),X(t,"pause",a[5])],u=!0)},p(d,[_]){(!o||_&2&&!Yt(t.src,e=d[1]))&&g(t,"src",e),(!o||_&4)&&(t.loop=d[2]),_&1&&l!==(l=d[0])&&t[l?"pause":"play"]();let E=n;n=p(d),n===E?f[n].p(d,_):(Dt(),N(f[E],1,1,()=>{f[E]=null}),Lt(),r=f[n],r?r.p(d,_):(r=f[n]=c[n](d),r.c()),A(r,1),r.m(i,null)),(!o||_&8)&&se(i,"text-gray-500",!d[3])},i(d){o||(A(r),o=!0)},o(d){N(r),o=!1},d(d){d&&(m(t),m(s),m(i)),f[n].d(),u=!1,ie(h)}}}function _n(a,t,e){let{src:l}=t,{loop:s=!1}=t,{enabled:i=!0}=t,{paused:n=!0}=t;function r(){i&&e(0,n=!n)}function o(){n=this.paused,e(0,n)}return a.$$set=u=>{"src"in u&&e(1,l=u.src),"loop"in u&&e(2,s=u.loop),"enabled"in u&&e(3,i=u.enabled),"paused"in u&&e(0,n=u.paused)},[n,l,s,i,r,o]}class gn extends pt{constructor(t){super(),vt(this,t,_n,dn,gt,{src:1,loop:2,enabled:3,paused:0})}}function Ve(a,t,e){const l=a.slice();return l[37]=t[e],l}const pn=a=>({option:a[0]&16512,classesButton:a[0]&512}),Fe=a=>({option:a[37],classesButton:a[9],onSelection:a[15]});function vn(a){let t,e,l;return{c(){t=y("div"),e=yt(a[1]),this.h()},l(s){t=$(s,"DIV",{class:!0});var i=C(t);e=$t(i,a[1]),i.forEach(m),this.h()},h(){g(t,"class",l="autocomplete-empty "+a[8])},m(s,i){P(s,t,i),v(t,e)},p(s,i){i[0]&2&&zt(e,s[1]),i[0]&256&&l!==(l="autocomplete-empty "+s[8])&&g(t,"class",l)},i:V,o:V,d(s){s&&m(t)}}}function bn(a){let t,e,l=[],s=new Map,i,n,r,o=Wt(a[7].slice(0,a[14]));const u=h=>h[37];for(let h=0;h<o.length;h+=1){let c=Ve(a,o,h),f=u(c);s.set(f,l[h]=Je(f,c))}return{c(){t=y("nav"),e=y("ul");for(let h=0;h<l.length;h+=1)l[h].c();this.h()},l(h){t=$(h,"NAV",{class:!0});var c=C(t);e=$(c,"UL",{class:!0});var f=C(e);for(let p=0;p<l.length;p+=1)l[p].l(f);f.forEach(m),c.forEach(m),this.h()},h(){g(e,"class",i="autocomplete-list "+a[11]),g(t,"class",n="autocomplete-nav "+a[12])},m(h,c){P(h,t,c),v(t,e);for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(e,null);r=!0},p(h,c){c[0]&134268644&&(o=Wt(h[7].slice(0,h[14])),Dt(),l=Ol(l,c,u,1,h,o,s,e,Il,Je,null,Ve),Lt()),(!r||c[0]&2048&&i!==(i="autocomplete-list "+h[11]))&&g(e,"class",i),(!r||c[0]&4096&&n!==(n="autocomplete-nav "+h[12]))&&g(t,"class",n)},i(h){if(!r){for(let c=0;c<o.length;c+=1)A(l[c]);r=!0}},o(h){for(let c=0;c<l.length;c+=1)N(l[c]);r=!1},d(h){h&&m(t);for(let c=0;c<l.length;c+=1)l[c].d()}}}function kn(a){let t,e,l=a[37].label+"",s,i,n;function r(){return a[31](a[37])}return{c(){t=y("button"),e=new Ct(!1),this.h()},l(o){t=$(o,"BUTTON",{class:!0,type:!0});var u=C(t);e=Pt(u,!1),u.forEach(m),this.h()},h(){e.a=null,g(t,"class",s="autocomplete-button "+a[9]),g(t,"type","button")},m(o,u){P(o,t,u),e.m(l,t),i||(n=[X(t,"click",r),X(t,"click",a[29]),X(t,"keypress",a[30])],i=!0)},p(o,u){a=o,u[0]&16512&&l!==(l=a[37].label+"")&&e.p(l),u[0]&512&&s!==(s="autocomplete-button "+a[9])&&g(t,"class",s)},d(o){o&&m(t),i=!1,ie(n)}}}function Je(a,t){let e,l,s,i,n,r;const o=t[28].optionButton,u=Ht(o,t,t[27],Fe),h=u||kn(t);return{key:a,first:null,c(){e=y("li"),h&&h.c(),l=O(),this.h()},l(c){e=$(c,"LI",{class:!0});var f=C(e);h&&h.l(f),l=I(f),f.forEach(m),this.h()},h(){g(e,"class",s="autocomplete-item "+t[10]),this.first=e},m(c,f){P(c,e,f),h&&h.m(e,null),v(e,l),r=!0},p(c,f){t=c,u?u.p&&(!r||f[0]&134234752)&&Zt(u,o,t,t[27],r?Ut(o,t[27],f,pn):Mt(t[27]),Fe):h&&h.p&&(!r||f[0]&17024)&&h.p(t,r?f:[-1,-1]),(!r||f[0]&1024&&s!==(s="autocomplete-item "+t[10]))&&g(e,"class",s)},i(c){r||(A(h,c),c&&Cl(()=>{r&&(n&&n.end(1),i=Bl(e,t[0],{transition:t[3],params:t[4],enabled:t[2]}),i.start())}),r=!0)},o(c){N(h,c),i&&i.invalidate(),c&&(n=Nl(e,t[0],{transition:t[5],params:t[6],enabled:t[2]})),r=!1},d(c){c&&m(e),h&&h.d(c),c&&n&&n.end()}}}function wn(a){let t,e,l,s,i;const n=[bn,vn],r=[];function o(u,h){return u[7].length>0?0:1}return e=o(a),l=r[e]=n[e](a),{c(){t=y("div"),l.c(),this.h()},l(u){t=$(u,"DIV",{class:!0,"data-testid":!0});var h=C(t);l.l(h),h.forEach(m),this.h()},h(){g(t,"class",s="autocomplete "+a[13]),g(t,"data-testid","autocomplete")},m(u,h){P(u,t,h),r[e].m(t,null),i=!0},p(u,h){let c=e;e=o(u),e===c?r[e].p(u,h):(Dt(),N(r[c],1,1,()=>{r[c]=null}),Lt(),l=r[e],l?l.p(u,h):(l=r[e]=n[e](u),l.c()),A(l,1),l.m(t,null)),(!i||h[0]&8192&&s!==(s="autocomplete "+u[13]))&&g(t,"class",s)},i(u){i||(A(l),i=!0)},o(u){N(l),i=!1},d(u){u&&m(t),r[e].d()}}}function gl(a,t){const{transition:e,params:l,enabled:s}=t;return s?e(a,l):"duration"in l?e(a,{duration:0}):{duration:0}}function yn(a,t,e){let l,s,i,n,r,o,u,h,c,f;ee(a,Sl,T=>e(32,f=T));let{$$slots:p={},$$scope:d}=t;const _=be();let{input:E=void 0}=t,{options:k=[]}=t,{limit:B=void 0}=t,{allowlist:b=[]}=t,{denylist:S=[]}=t,{emptyState:j="No Results Found."}=t,{regionNav:q=""}=t,{regionList:Y="list-nav"}=t,{regionItem:lt=""}=t,{regionButton:ft="w-full"}=t,{regionEmpty:nt="text-center"}=t,{transitions:ut=!f}=t,{transitionIn:at=Se}=t,{transitionInParams:st={duration:200}}=t,{transitionOut:kt=Se}=t,{transitionOutParams:wt={duration:200}}=t;function Q(T,F){let dt=[...k];T.length&&(dt=dt.filter(_t=>T.includes(_t.value))),F.length&&(dt=dt.filter(_t=>!F.includes(_t.value))),!T.length&&!F.length&&(dt=k),e(26,l=dt)}function Tt(){let T=[...l];return T=T.filter(F=>{const dt=String(E).toLowerCase().trim();if(JSON.stringify([F.label,F.value,F.keywords]).toLowerCase().includes(dt))return F}),T}function it(T){_("selection",T)}function At(T){Be.call(this,a,T)}function It(T){Be.call(this,a,T)}const x=T=>it(T);return a.$$set=T=>{e(36,t=L(L({},t),W(T))),"input"in T&&e(16,E=T.input),"options"in T&&e(17,k=T.options),"limit"in T&&e(18,B=T.limit),"allowlist"in T&&e(19,b=T.allowlist),"denylist"in T&&e(20,S=T.denylist),"emptyState"in T&&e(1,j=T.emptyState),"regionNav"in T&&e(21,q=T.regionNav),"regionList"in T&&e(22,Y=T.regionList),"regionItem"in T&&e(23,lt=T.regionItem),"regionButton"in T&&e(24,ft=T.regionButton),"regionEmpty"in T&&e(25,nt=T.regionEmpty),"transitions"in T&&e(2,ut=T.transitions),"transitionIn"in T&&e(3,at=T.transitionIn),"transitionInParams"in T&&e(4,st=T.transitionInParams),"transitionOut"in T&&e(5,kt=T.transitionOut),"transitionOutParams"in T&&e(6,wt=T.transitionOutParams),"$$scope"in T&&e(27,d=T.$$scope)},a.$$.update=()=>{a.$$.dirty[0]&131072&&e(26,l=k),a.$$.dirty[0]&1572864&&Q(b,S),a.$$.dirty[0]&67174400&&e(7,s=E?Tt():l),a.$$.dirty[0]&262272&&e(14,i=B!==void 0?B:s.length),e(13,n=`${t.class??""}`),a.$$.dirty[0]&2097152&&e(12,r=`${q}`),a.$$.dirty[0]&4194304&&e(11,o=`${Y}`),a.$$.dirty[0]&8388608&&e(10,u=`${lt}`),a.$$.dirty[0]&16777216&&e(9,h=`${ft}`),a.$$.dirty[0]&33554432&&e(8,c=`${nt}`)},t=W(t),[gl,j,ut,at,st,kt,wt,s,c,h,u,o,r,n,i,it,E,k,B,b,S,q,Y,lt,ft,nt,l,d,p,At,It,x]}class $n extends pt{constructor(t){super(),vt(this,t,yn,wn,gt,{dynamicTransition:0,input:16,options:17,limit:18,allowlist:19,denylist:20,emptyState:1,regionNav:21,regionList:22,regionItem:23,regionButton:24,regionEmpty:25,transitions:2,transitionIn:3,transitionInParams:4,transitionOut:5,transitionOutParams:6},null,[-1,-1])}get dynamicTransition(){return gl}}function Tn(a){let t,e;const l=a[1].default,s=Ht(l,a,a[0],null);return{c(){t=y("span"),s&&s.c(),this.h()},l(i){t=$(i,"SPAN",{class:!0});var n=C(t);s&&s.l(n),n.forEach(m),this.h()},h(){g(t,"class","flex gap-x-2 items-center mx-2")},m(i,n){P(i,t,n),s&&s.m(t,null),e=!0},p(i,[n]){s&&s.p&&(!e||n&1)&&Zt(s,l,i,i[0],e?Ut(l,i[0],n,null):Mt(i[0]),null)},i(i){e||(A(s,i),e=!0)},o(i){N(s,i),e=!1},d(i){i&&m(t),s&&s.d(i)}}}function En(a,t,e){let{$$slots:l={},$$scope:s}=t;return a.$$set=i=>{"$$scope"in i&&e(0,s=i.$$scope)},[s,l]}class re extends pt{constructor(t){super(),vt(this,t,En,Tn,gt,{})}}function Cn(a){let t,e,l,s;const i=a[3].default,n=Ht(i,a,a[2],null);return{c(){t=y("td"),e=y("div"),n&&n.c(),this.h()},l(r){t=$(r,"TD",{style:!0,title:!0});var o=C(t);e=$(o,"DIV",{class:!0});var u=C(e);n&&n.l(u),u.forEach(m),o.forEach(m),this.h()},h(){g(e,"class",l="flex items-center justify-"+a[0]+" gap-x-2 h-full"),Pl(t,"vertical-align","middle"),g(t,"title",a[1])},m(r,o){P(r,t,o),v(t,e),n&&n.m(e,null),s=!0},p(r,[o]){n&&n.p&&(!s||o&4)&&Zt(n,i,r,r[2],s?Ut(i,r[2],o,null):Mt(r[2]),null),(!s||o&1&&l!==(l="flex items-center justify-"+r[0]+" gap-x-2 h-full"))&&g(e,"class",l),(!s||o&2)&&g(t,"title",r[1])},i(r){s||(A(n,r),s=!0)},o(r){N(n,r),s=!1},d(r){r&&m(t),n&&n.d(r)}}}function Pn(a,t,e){let{$$slots:l={},$$scope:s}=t,{justify:i="center"}=t,{title:n=""}=t;return a.$$set=r=>{"justify"in r&&e(0,i=r.justify),"title"in r&&e(1,n=r.title),"$$scope"in r&&e(2,s=r.$$scope)},[i,n,s,l]}class xt extends pt{constructor(t){super(),vt(this,t,Pn,Cn,gt,{justify:0,title:1})}}function An(a){let t,e,l='<path fill="currentColor" d="M216 36H68.53a20.09 20.09 0 0 0-17.15 9.71L5.71 121.83a12 12 0 0 0 0 12.34l45.67 76.12A20.09 20.09 0 0 0 68.53 220H216a20 20 0 0 0 20-20V56a20 20 0 0 0-20-20Zm-4 160H70.8L30 128l40.8-68H212Zm-108.49-52.49L119 128l-15.52-15.51a12 12 0 0 1 17-17L136 111l15.51-15.52a12 12 0 0 1 17 17L153 128l15.52 15.51a12 12 0 0 1-17 17L136 145l-15.51 15.52a12 12 0 0 1-17-17Z"/>',s=[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},a[0]],i={};for(let n=0;n<s.length;n+=1)i=L(i,s[n]);return{c(){t=Nt("svg"),e=new Ct(!0),this.h()},l(n){t=St(n,"svg",{viewBox:!0,width:!0,height:!0});var r=C(t);e=Pt(r,!0),r.forEach(m),this.h()},h(){e.a=null,et(t,i)},m(n,r){P(n,t,r),e.m(l,t)},p(n,[r]){et(t,i=Ot(s,[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},r&1&&n[0]]))},i:V,o:V,d(n){n&&m(t)}}}function Bn(a,t,e){return a.$$set=l=>{e(0,t=L(L({},t),W(l)))},t=W(t),[t]}class Nn extends pt{constructor(t){super(),vt(this,t,Bn,An,gt,{})}}function Sn(a){let t,e,l='<path fill="currentColor" d="M160 36a92.09 92.09 0 0 0-81 48.36A68 68 0 1 0 72 220h88a92 92 0 0 0 0-184Zm0 160H72a44 44 0 0 1-1.82-88A91.86 91.86 0 0 0 68 128a12 12 0 0 0 24 0a68 68 0 1 1 68 68Zm40.49-92.49a12 12 0 0 1 0 17l-48 48a12 12 0 0 1-17 0l-24-24a12 12 0 1 1 17-17L144 143l39.51-39.52a12 12 0 0 1 16.98.03Z"/>',s=[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},a[0]],i={};for(let n=0;n<s.length;n+=1)i=L(i,s[n]);return{c(){t=Nt("svg"),e=new Ct(!0),this.h()},l(n){t=St(n,"svg",{viewBox:!0,width:!0,height:!0});var r=C(t);e=Pt(r,!0),r.forEach(m),this.h()},h(){e.a=null,et(t,i)},m(n,r){P(n,t,r),e.m(l,t)},p(n,[r]){et(t,i=Ot(s,[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},r&1&&n[0]]))},i:V,o:V,d(n){n&&m(t)}}}function On(a,t,e){return a.$$set=l=>{e(0,t=L(L({},t),W(l)))},t=W(t),[t]}class qe extends pt{constructor(t){super(),vt(this,t,On,Sn,gt,{})}}function In(a){let t,e,l='<path fill="currentColor" d="M136.37 187.53a12 12 0 0 1 0 17l-5.94 5.94a60 60 0 0 1-84.88-84.88l24.12-24.11A60 60 0 0 1 152 99a12 12 0 1 1-16 18a36 36 0 0 0-49.37 1.47l-24.1 24.08a36 36 0 0 0 50.92 50.92l5.94-5.94a12 12 0 0 1 16.98 0Zm74.08-142a60.09 60.09 0 0 0-84.88 0l-5.94 5.94a12 12 0 0 0 17 17l5.94-5.94a36 36 0 0 1 50.92 50.92l-24.11 24.12A36 36 0 0 1 120 139a12 12 0 1 0-16 18a60 60 0 0 0 82.3-2.43l24.12-24.11a60.09 60.09 0 0 0 .03-84.91Z"/>',s=[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},a[0]],i={};for(let n=0;n<s.length;n+=1)i=L(i,s[n]);return{c(){t=Nt("svg"),e=new Ct(!0),this.h()},l(n){t=St(n,"svg",{viewBox:!0,width:!0,height:!0});var r=C(t);e=Pt(r,!0),r.forEach(m),this.h()},h(){e.a=null,et(t,i)},m(n,r){P(n,t,r),e.m(l,t)},p(n,[r]){et(t,i=Ot(s,[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},r&1&&n[0]]))},i:V,o:V,d(n){n&&m(t)}}}function zn(a,t,e){return a.$$set=l=>{e(0,t=L(L({},t),W(l)))},t=W(t),[t]}class Dn extends pt{constructor(t){super(),vt(this,t,zn,In,gt,{})}}function Ln(a){let t,e,l='<path fill="currentColor" d="M180 128a12 12 0 0 1-12 12H88a12 12 0 0 1 0-24h80a12 12 0 0 1 12 12Zm56 0A108 108 0 1 1 128 20a108.12 108.12 0 0 1 108 108Zm-24 0a84 84 0 1 0-84 84a84.09 84.09 0 0 0 84-84Z"/>',s=[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},a[0]],i={};for(let n=0;n<s.length;n+=1)i=L(i,s[n]);return{c(){t=Nt("svg"),e=new Ct(!0),this.h()},l(n){t=St(n,"svg",{viewBox:!0,width:!0,height:!0});var r=C(t);e=Pt(r,!0),r.forEach(m),this.h()},h(){e.a=null,et(t,i)},m(n,r){P(n,t,r),e.m(l,t)},p(n,[r]){et(t,i=Ot(s,[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},r&1&&n[0]]))},i:V,o:V,d(n){n&&m(t)}}}function jn(a,t,e){return a.$$set=l=>{e(0,t=L(L({},t),W(l)))},t=W(t),[t]}class pl extends pt{constructor(t){super(),vt(this,t,jn,Ln,gt,{})}}function Hn(a){let t,e,l='<path fill="currentColor" d="M128 20a108 108 0 1 0 108 108A108.12 108.12 0 0 0 128 20Zm0 192a84 84 0 1 1 84-84a84.09 84.09 0 0 1-84 84Zm52-84a12 12 0 0 1-12 12h-28v28a12 12 0 0 1-24 0v-28H88a12 12 0 0 1 0-24h28V88a12 12 0 0 1 24 0v28h28a12 12 0 0 1 12 12Z"/>',s=[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},a[0]],i={};for(let n=0;n<s.length;n+=1)i=L(i,s[n]);return{c(){t=Nt("svg"),e=new Ct(!0),this.h()},l(n){t=St(n,"svg",{viewBox:!0,width:!0,height:!0});var r=C(t);e=Pt(r,!0),r.forEach(m),this.h()},h(){e.a=null,et(t,i)},m(n,r){P(n,t,r),e.m(l,t)},p(n,[r]){et(t,i=Ot(s,[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},r&1&&n[0]]))},i:V,o:V,d(n){n&&m(t)}}}function Zn(a,t,e){return a.$$set=l=>{e(0,t=L(L({},t),W(l)))},t=W(t),[t]}class we extends pt{constructor(t){super(),vt(this,t,Zn,Hn,gt,{})}}function Mn(a){let t,e,l='<path fill="currentColor" d="M243 96.05a20 20 0 0 0-17.26-13.72l-57-4.93l-22.3-53.14a20 20 0 0 0-36.82 0L87.29 77.4l-57 4.93a20 20 0 0 0-11.42 35.07l43.32 37.8l-13 56.24A20 20 0 0 0 79 233.1l49-29.76l49 29.76a20 20 0 0 0 29.8-21.66l-13-56.24l43.32-37.8A20 20 0 0 0 243 96.05Zm-66.75 42.62a20 20 0 0 0-6.35 19.63l11.39 49.32l-42.94-26.08a19.9 19.9 0 0 0-20.7 0l-42.94 26.08L86.1 158.3a20 20 0 0 0-6.35-19.63l-38.09-33.23l50.14-4.34a19.92 19.92 0 0 0 16.69-12.19L128 42.42l19.51 46.49a19.92 19.92 0 0 0 16.69 12.19l50.14 4.34Z"/>',s=[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},a[0]],i={};for(let n=0;n<s.length;n+=1)i=L(i,s[n]);return{c(){t=Nt("svg"),e=new Ct(!0),this.h()},l(n){t=St(n,"svg",{viewBox:!0,width:!0,height:!0});var r=C(t);e=Pt(r,!0),r.forEach(m),this.h()},h(){e.a=null,et(t,i)},m(n,r){P(n,t,r),e.m(l,t)},p(n,[r]){et(t,i=Ot(s,[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},r&1&&n[0]]))},i:V,o:V,d(n){n&&m(t)}}}function Un(a,t,e){return a.$$set=l=>{e(0,t=L(L({},t),W(l)))},t=W(t),[t]}class Rn extends pt{constructor(t){super(),vt(this,t,Un,Mn,gt,{})}}function Vn(a){let t,e,l='<g fill="currentColor"><path d="M184.13 147.7a8.08 8.08 0 0 0-2.54 7.89l13.52 58.54a8 8 0 0 1-11.89 8.69l-51.1-31a7.93 7.93 0 0 0-8.24 0l-51.1 31a8 8 0 0 1-11.89-8.69l13.52-58.54a8.08 8.08 0 0 0-2.54-7.89l-45.11-39.35a8 8 0 0 1 4.54-14.07l59.46-5.14a8 8 0 0 0 6.67-4.88l23.23-55.36a8 8 0 0 1 14.68 0l23.23 55.36a8 8 0 0 0 6.67 4.88l59.46 5.14a8 8 0 0 1 4.54 14.07Z" opacity=".2"/><path d="M239.2 97.29a16 16 0 0 0-13.81-11L166 81.17l-23.28-55.36a15.95 15.95 0 0 0-29.44 0L90.07 81.17l-59.46 5.15a16 16 0 0 0-9.11 28.06l45.11 39.42l-13.52 58.54a16 16 0 0 0 23.84 17.34l51-31l51.11 31a16 16 0 0 0 23.84-17.34l-13.51-58.6l45.1-39.36a16 16 0 0 0 4.73-17.09Zm-15.22 5l-45.1 39.36a16 16 0 0 0-5.08 15.71L187.35 216l-51.07-31a15.9 15.9 0 0 0-16.54 0l-51 31l13.46-58.6a16 16 0 0 0-5.08-15.71L32 102.35a.37.37 0 0 1 0-.09l59.44-5.14a16 16 0 0 0 13.35-9.75L128 32.08l23.2 55.29a16 16 0 0 0 13.35 9.75l59.45 5.14v.07Z"/></g>',s=[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},a[0]],i={};for(let n=0;n<s.length;n+=1)i=L(i,s[n]);return{c(){t=Nt("svg"),e=new Ct(!0),this.h()},l(n){t=St(n,"svg",{viewBox:!0,width:!0,height:!0});var r=C(t);e=Pt(r,!0),r.forEach(m),this.h()},h(){e.a=null,et(t,i)},m(n,r){P(n,t,r),e.m(l,t)},p(n,[r]){et(t,i=Ot(s,[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},r&1&&n[0]]))},i:V,o:V,d(n){n&&m(t)}}}function Fn(a,t,e){return a.$$set=l=>{e(0,t=L(L({},t),W(l)))},t=W(t),[t]}class Jn extends pt{constructor(t){super(),vt(this,t,Fn,Vn,gt,{})}}function qn(a){let t,e,l='<path fill="currentColor" d="m234.5 114.38l-45.1 39.36l13.51 58.6a16 16 0 0 1-23.84 17.34l-51.11-31l-51 31a16 16 0 0 1-23.84-17.34l13.49-58.54l-45.11-39.42a16 16 0 0 1 9.11-28.06l59.46-5.15l23.21-55.36a15.95 15.95 0 0 1 29.44 0L166 81.17l59.44 5.15a16 16 0 0 1 9.11 28.06Z"/>',s=[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},a[0]],i={};for(let n=0;n<s.length;n+=1)i=L(i,s[n]);return{c(){t=Nt("svg"),e=new Ct(!0),this.h()},l(n){t=St(n,"svg",{viewBox:!0,width:!0,height:!0});var r=C(t);e=Pt(r,!0),r.forEach(m),this.h()},h(){e.a=null,et(t,i)},m(n,r){P(n,t,r),e.m(l,t)},p(n,[r]){et(t,i=Ot(s,[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},r&1&&n[0]]))},i:V,o:V,d(n){n&&m(t)}}}function Gn(a,t,e){return a.$$set=l=>{e(0,t=L(L({},t),W(l)))},t=W(t),[t]}class Kn extends pt{constructor(t){super(),vt(this,t,Gn,qn,gt,{})}}function Yn(a){let t,e,l='<path fill="currentColor" d="M128 128a12 12 0 0 1-12 12H48a12 12 0 0 1 0-24h68a12 12 0 0 1 12 12ZM48 76h132a12 12 0 0 0 0-24H48a12 12 0 0 0 0 24Zm52 104H48a12 12 0 0 0 0 24h52a12 12 0 0 0 0-24Zm132.49-20.49a12 12 0 0 0-17 0L196 179v-67a12 12 0 0 0-24 0v67l-19.51-19.52a12 12 0 0 0-17 17l40 40a12 12 0 0 0 17 0l40-40a12 12 0 0 0 0-16.97Z"/>',s=[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},a[0]],i={};for(let n=0;n<s.length;n+=1)i=L(i,s[n]);return{c(){t=Nt("svg"),e=new Ct(!0),this.h()},l(n){t=St(n,"svg",{viewBox:!0,width:!0,height:!0});var r=C(t);e=Pt(r,!0),r.forEach(m),this.h()},h(){e.a=null,et(t,i)},m(n,r){P(n,t,r),e.m(l,t)},p(n,[r]){et(t,i=Ot(s,[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},r&1&&n[0]]))},i:V,o:V,d(n){n&&m(t)}}}function Wn(a,t,e){return a.$$set=l=>{e(0,t=L(L({},t),W(l)))},t=W(t),[t]}class Xn extends pt{constructor(t){super(),vt(this,t,Wn,Yn,gt,{})}}function Qn(a){let t,e,l='<path fill="currentColor" d="M36 128a12 12 0 0 1 12-12h68a12 12 0 0 1 0 24H48a12 12 0 0 1-12-12Zm12-52h52a12 12 0 0 0 0-24H48a12 12 0 0 0 0 24Zm132 104H48a12 12 0 0 0 0 24h132a12 12 0 0 0 0-24Zm52.49-100.49l-40-40a12 12 0 0 0-17 0l-40 40a12 12 0 0 0 17 17L172 77v67a12 12 0 0 0 24 0V77l19.51 19.52a12 12 0 0 0 17-17Z"/>',s=[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},a[0]],i={};for(let n=0;n<s.length;n+=1)i=L(i,s[n]);return{c(){t=Nt("svg"),e=new Ct(!0),this.h()},l(n){t=St(n,"svg",{viewBox:!0,width:!0,height:!0});var r=C(t);e=Pt(r,!0),r.forEach(m),this.h()},h(){e.a=null,et(t,i)},m(n,r){P(n,t,r),e.m(l,t)},p(n,[r]){et(t,i=Ot(s,[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},r&1&&n[0]]))},i:V,o:V,d(n){n&&m(t)}}}function xn(a,t,e){return a.$$set=l=>{e(0,t=L(L({},t),W(l)))},t=W(t),[t]}class ta extends pt{constructor(t){super(),vt(this,t,xn,Qn,gt,{})}}function Ge(a,t){t.update(e=>(e.forEach(l=>{l.track.artist.id===a&&(l.selected=!1)}),e))}async function me(a,t){const e=await _l(a);t.update(l=>{const s=e.sort((n,r)=>n.release_date.localeCompare(r.release_date)).flatMap(n=>{const{tracks:r,...o}=n;return n.tracks.map(u=>({...u,album:o}))});s.forEach(n=>{const r=l.find(o=>o.track.id===n.id);r?(r.track.album=n.album,r.selected=!0):l.push({track:n,inPlaylist:!1,selected:!0})});function i(n){return s.findIndex(r=>r.id===n.track.id)}return l.sort((n,r)=>{const o=i(n),u=i(r);return o-u}),l})}function ea(a,t){t.update(e=>(e.forEach(l=>{l.track.album.id===a&&(l.selected=!1)}),e))}async function la(a,t){const e=await dl(a.id);t.update(l=>{e.data.forEach(o=>{const u=l.find(h=>h.track.id===o.id);o.album=a,u?(u.track.album=o.album,u.selected=!0):l.push({track:o,inPlaylist:!1,selected:!0})});function s(o){return e.data.findIndex(u=>u.id===o.track.id)+1}function i(o){return l.findIndex(u=>u.track.id===o.track.id)+1}const n=l.findIndex(o=>o.track.album.id===a.id);function r(o){const u=s(o);return u===0?i(o)*1e4:n*1e4+u}return console.log({startIndex:n}),l.sort((o,u)=>{const h=n*1e4+r(o),c=n*1e4+r(u);return h-c}),l})}function na(a){let t,e,l,s,i,n,r,o,u,h,c;const f=a[4].default,p=Ht(f,a,a[3],null);return i=new we({}),o=new pl({}),{c(){t=y("span"),p&&p.c(),e=O(),l=y("span"),s=y("button"),Z(i.$$.fragment),n=O(),r=y("button"),Z(o.$$.fragment),this.h()},l(d){t=$(d,"SPAN",{class:!0});var _=C(t);p&&p.l(_),e=I(_),l=$(_,"SPAN",{class:!0});var E=C(l);s=$(E,"BUTTON",{class:!0,title:!0});var k=C(s);M(i.$$.fragment,k),k.forEach(m),n=I(E),r=$(E,"BUTTON",{class:!0,title:!0});var B=C(r);M(o.$$.fragment,B),B.forEach(m),E.forEach(m),_.forEach(m),this.h()},h(){g(s,"class","!p-0 "),g(s,"title",a[0]),g(r,"class","!p-0"),g(r,"title","deselect all album titles from the playlist"),g(l,"class","btn-group-vertical btn btn-sm gap-y-1"),g(t,"class","flex flex-row justify-between w-full items-center gap-x-2")},m(d,_){P(d,t,_),p&&p.m(t,null),v(t,e),v(t,l),v(l,s),U(i,s,null),v(l,n),v(l,r),U(o,r,null),u=!0,h||(c=[X(s,"click",a[5]),X(r,"click",a[6])],h=!0)},p(d,[_]){p&&p.p&&(!u||_&8)&&Zt(p,f,d,d[3],u?Ut(f,d[3],_,null):Mt(d[3]),null),(!u||_&1)&&g(s,"title",d[0])},i(d){u||(A(p,d),A(i.$$.fragment,d),A(o.$$.fragment,d),u=!0)},o(d){N(p,d),N(i.$$.fragment,d),N(o.$$.fragment,d),u=!1},d(d){d&&m(t),p&&p.d(d),R(i),R(o),h=!1,ie(c)}}}function aa(a,t,e){let{$$slots:l={},$$scope:s}=t;const i=be();let{addTitle:n="add all album titles to the playlist"}=t,{removeTitle:r="deselect all album titles from the playlist"}=t;const o=()=>i("add"),u=()=>i("remove");return a.$$set=h=>{"addTitle"in h&&e(0,n=h.addTitle),"removeTitle"in h&&e(2,r=h.removeTitle),"$$scope"in h&&e(3,s=h.$$scope)},[n,i,r,s,l,o,u]}class vl extends pt{constructor(t){super(),vt(this,t,aa,na,gt,{addTitle:0,removeTitle:2})}}function Ke(a,t,e){const l=a.slice();l[49]=t[e],l[51]=t,l[52]=e;const s=l[49].track;return l[50]=s,l}function Ye(a,t,e){const l=a.slice();l[43]=t[e];const s=l[21](l[43].id);return l[44]=s,l}function sa(a){let t,e,l;function s(){a[34].call(t,a[51],a[52])}return{c(){t=y("input"),this.h()},l(i){t=$(i,"INPUT",{type:!0,class:!0}),this.h()},h(){g(t,"type","checkbox"),g(t,"class","checkbox")},m(i,n){P(i,t,n),t.checked=a[49].selected,e||(l=X(t,"change",s),e=!0)},p(i,n){a=i,n[0]&32&&(t.checked=a[49].selected)},d(i){i&&m(t),e=!1,l()}}}function ia(a){let t,e=a[52]+1+"",l;return{c(){t=y("span"),l=yt(e)},l(s){t=$(s,"SPAN",{});var i=C(t);l=$t(i,e),i.forEach(m)},m(s,i){P(s,t,i),v(t,l)},p:V,d(s){s&&m(t)}}}function ra(a){let t,e,l,s,i=a[50].title+"",n,r,o;return t=new gn({props:{src:a[50].preview,enabled:a[50].readable}}),{c(){Z(t.$$.fragment),e=O(),l=y("a"),s=y("span"),n=yt(i),this.h()},l(u){M(t.$$.fragment,u),e=I(u),l=$(u,"A",{href:!0,title:!0});var h=C(l);s=$(h,"SPAN",{});var c=C(s);n=$t(c,i),c.forEach(m),h.forEach(m),this.h()},h(){g(l,"href",r=a[50].link),g(l,"title","open track in Deezer web interface")},m(u,h){U(t,u,h),P(u,e,h),P(u,l,h),v(l,s),v(s,n),o=!0},p(u,h){const c={};h[0]&32&&(c.src=u[50].preview),h[0]&32&&(c.enabled=u[50].readable),t.$set(c),(!o||h[0]&32)&&i!==(i=u[50].title+"")&&zt(n,i),(!o||h[0]&32&&r!==(r=u[50].link))&&g(l,"href",r)},i(u){o||(A(t.$$.fragment,u),o=!0)},o(u){N(t.$$.fragment,u),o=!1},d(u){u&&(m(e),m(l)),R(t,u)}}}function oa(a){let t,e,l,s,i=a[50].album.title+"",n;return{c(){t=y("img"),l=O(),s=y("span"),n=yt(i),this.h()},l(r){t=$(r,"IMG",{src:!0,alt:!0}),l=I(r),s=$(r,"SPAN",{});var o=C(s);n=$t(o,i),o.forEach(m),this.h()},h(){Yt(t.src,e=a[50].album.cover_small)||g(t,"src",e),g(t,"alt","album cover")},m(r,o){P(r,t,o),P(r,l,o),P(r,s,o),v(s,n)},p(r,o){o[0]&32&&!Yt(t.src,e=r[50].album.cover_small)&&g(t,"src",e),o[0]&32&&i!==(i=r[50].album.title+"")&&zt(n,i)},d(r){r&&(m(t),m(l),m(s))}}}function ua(a){let t,e,l,s;return e=new re({props:{$$slots:{default:[oa]},$$scope:{ctx:a}}}),{c(){t=y("a"),Z(e.$$.fragment),this.h()},l(i){t=$(i,"A",{href:!0,title:!0});var n=C(t);M(e.$$.fragment,n),n.forEach(m),this.h()},h(){g(t,"href",l="https://www.deezer.com/album/"+a[50].album.id),g(t,"title","open album in Deezer web interface")},m(i,n){P(i,t,n),U(e,t,null),s=!0},p(i,n){const r={};n[0]&32|n[1]&4194304&&(r.$$scope={dirty:n,ctx:i}),e.$set(r),(!s||n[0]&32&&l!==(l="https://www.deezer.com/album/"+i[50].album.id))&&g(t,"href",l)},i(i){s||(A(e.$$.fragment,i),s=!0)},o(i){N(e.$$.fragment,i),s=!1},d(i){i&&m(t),R(e)}}}function ca(a){let t,e;function l(){return a[35](a[50])}function s(){return a[36](a[50])}return t=new vl({props:{addTitle:"add all album titles to the playlist",removeTitle:"deselect all album titles from the playlist",$$slots:{default:[ua]},$$scope:{ctx:a}}}),t.$on("add",l),t.$on("remove",s),{c(){Z(t.$$.fragment)},l(i){M(t.$$.fragment,i)},m(i,n){U(t,i,n),e=!0},p(i,n){a=i;const r={};n[0]&32|n[1]&4194304&&(r.$$scope={dirty:n,ctx:a}),t.$set(r)},i(i){e||(A(t.$$.fragment,i),e=!0)},o(i){N(t.$$.fragment,i),e=!1},d(i){R(t,i)}}}function fa(a){let t,e,l=a[50].artist.name+"",s,i;return{c(){t=y("a"),e=y("span"),s=yt(l),this.h()},l(n){t=$(n,"A",{href:!0,title:!0});var r=C(t);e=$(r,"SPAN",{});var o=C(e);s=$t(o,l),o.forEach(m),r.forEach(m),this.h()},h(){g(t,"href",i=a[50].artist.link),g(t,"title","open artist in Deezer web interface")},m(n,r){P(n,t,r),v(t,e),v(e,s)},p(n,r){r[0]&32&&l!==(l=n[50].artist.name+"")&&zt(s,l),r[0]&32&&i!==(i=n[50].artist.link)&&g(t,"href",i)},d(n){n&&m(t)}}}function ha(a){let t,e;function l(){return a[37](a[50])}function s(){return a[38](a[50])}return t=new vl({props:{addTitle:"add all artist titles to the playlist",removeTitle:"deselect all artist titles from the playlist",$$slots:{default:[fa]},$$scope:{ctx:a}}}),t.$on("add",l),t.$on("remove",s),{c(){Z(t.$$.fragment)},l(i){M(t.$$.fragment,i)},m(i,n){U(t,i,n),e=!0},p(i,n){a=i;const r={};n[0]&32|n[1]&4194304&&(r.$$scope={dirty:n,ctx:a}),t.$set(r)},i(i){e||(A(t.$$.fragment,i),e=!0)},o(i){N(t.$$.fragment,i),e=!1},d(i){R(t,i)}}}function ma(a){let t,e;return t=new Rn({}),{c(){Z(t.$$.fragment)},l(l){M(t.$$.fragment,l)},m(l,s){U(t,l,s),e=!0},i(l){e||(A(t.$$.fragment,l),e=!0)},o(l){N(t.$$.fragment,l),e=!1},d(l){R(t,l)}}}function da(a){let t,e;return t=new Jn({}),{c(){Z(t.$$.fragment)},l(l){M(t.$$.fragment,l)},m(l,s){U(t,l,s),e=!0},i(l){e||(A(t.$$.fragment,l),e=!0)},o(l){N(t.$$.fragment,l),e=!1},d(l){R(t,l)}}}function _a(a){let t,e;return t=new Kn({}),{c(){Z(t.$$.fragment)},l(l){M(t.$$.fragment,l)},m(l,s){U(t,l,s),e=!0},i(l){e||(A(t.$$.fragment,l),e=!0)},o(l){N(t.$$.fragment,l),e=!1},d(l){R(t,l)}}}function ga(a){let t,e;return t=new xl({props:{value:5*a[50].rank/a[4],max:5,$$slots:{full:[_a],half:[da],empty:[ma]},$$scope:{ctx:a}}}),{c(){Z(t.$$.fragment)},l(l){M(t.$$.fragment,l)},m(l,s){U(t,l,s),e=!0},p(l,s){const i={};s[0]&48&&(i.value=5*l[50].rank/l[4]),s[1]&4194304&&(i.$$scope={dirty:s,ctx:l}),t.$set(i)},i(l){e||(A(t.$$.fragment,l),e=!0)},o(l){N(t.$$.fragment,l),e=!1},d(l){R(t,l)}}}function pa(a){let t=Ae(a[50].duration*1e3,{units:["m","s"],largest:2})+"",e,l,s;return{c(){e=yt(t),l=O(),s=y("span"),this.h()},l(i){e=$t(i,t),l=I(i),s=$(i,"SPAN",{class:!0}),C(s).forEach(m),this.h()},h(){g(s,"class","grow")},m(i,n){P(i,e,n),P(i,l,n),P(i,s,n)},p(i,n){n[0]&32&&t!==(t=Ae(i[50].duration*1e3,{units:["m","s"],largest:2})+"")&&zt(e,t)},d(i){i&&(m(e),m(l),m(s))}}}function We(a){let t,e,l,s,i,n,r,o,u,h,c,f,p,d,_,E,k;return e=new xt({props:{$$slots:{default:[sa]},$$scope:{ctx:a}}}),s=new xt({props:{$$slots:{default:[ia]},$$scope:{ctx:a}}}),n=new xt({props:{justify:"start",$$slots:{default:[ra]},$$scope:{ctx:a}}}),o=new xt({props:{justify:"start",$$slots:{default:[ca]},$$scope:{ctx:a}}}),h=new xt({props:{justify:"start",$$slots:{default:[ha]},$$scope:{ctx:a}}}),f=new xt({props:{title:a[50].rank,$$slots:{default:[ga]},$$scope:{ctx:a}}}),d=new xt({props:{$$slots:{default:[pa]},$$scope:{ctx:a}}}),{c(){t=y("tr"),Z(e.$$.fragment),l=O(),Z(s.$$.fragment),i=O(),Z(n.$$.fragment),r=O(),Z(o.$$.fragment),u=O(),Z(h.$$.fragment),c=O(),Z(f.$$.fragment),p=O(),Z(d.$$.fragment),_=O(),this.h()},l(B){t=$(B,"TR",{class:!0});var b=C(t);M(e.$$.fragment,b),l=I(b),M(s.$$.fragment,b),i=I(b),M(n.$$.fragment,b),r=I(b),M(o.$$.fragment,b),u=I(b),M(h.$$.fragment,b),c=I(b),M(f.$$.fragment,b),p=I(b),M(d.$$.fragment,b),_=I(b),b.forEach(m),this.h()},h(){g(t,"class",E=Ne(tl(a[49]))+" svelte-p6m18c"),se(t,"!text-red-500",!a[50].readable)},m(B,b){P(B,t,b),U(e,t,null),v(t,l),U(s,t,null),v(t,i),U(n,t,null),v(t,r),U(o,t,null),v(t,u),U(h,t,null),v(t,c),U(f,t,null),v(t,p),U(d,t,null),v(t,_),k=!0},p(B,b){const S={};b[0]&32|b[1]&4194304&&(S.$$scope={dirty:b,ctx:B}),e.$set(S);const j={};b[1]&4194304&&(j.$$scope={dirty:b,ctx:B}),s.$set(j);const q={};b[0]&32|b[1]&4194304&&(q.$$scope={dirty:b,ctx:B}),n.$set(q);const Y={};b[0]&32|b[1]&4194304&&(Y.$$scope={dirty:b,ctx:B}),o.$set(Y);const lt={};b[0]&32|b[1]&4194304&&(lt.$$scope={dirty:b,ctx:B}),h.$set(lt);const ft={};b[0]&32&&(ft.title=B[50].rank),b[0]&48|b[1]&4194304&&(ft.$$scope={dirty:b,ctx:B}),f.$set(ft);const nt={};b[0]&32|b[1]&4194304&&(nt.$$scope={dirty:b,ctx:B}),d.$set(nt),(!k||b[0]&32&&E!==(E=Ne(tl(B[49]))+" svelte-p6m18c"))&&g(t,"class",E),(!k||b[0]&32)&&se(t,"!text-red-500",!B[50].readable)},i(B){k||(A(e.$$.fragment,B),A(s.$$.fragment,B),A(n.$$.fragment,B),A(o.$$.fragment,B),A(h.$$.fragment,B),A(f.$$.fragment,B),A(d.$$.fragment,B),k=!0)},o(B){N(e.$$.fragment,B),N(s.$$.fragment,B),N(n.$$.fragment,B),N(o.$$.fragment,B),N(h.$$.fragment,B),N(f.$$.fragment,B),N(d.$$.fragment,B),k=!1},d(B){B&&m(t),R(e),R(s),R(n),R(o),R(h),R(f),R(d)}}}function va(a){var Te;let t,e,l,s="Title",i,n,r,o,u,h="Description",c,f,p,d,_="",E,k,B,b=((Te=a[2])==null?void 0:Te.filter(nl).length)+"",S,j,q=a[0].playlist.tracks.data.length+"",Y,lt,ft,nt,ut="",at,st,kt,wt,Q,Tt,it,At,It,x,T,F="Pos.",dt,_t,Rt="Title",jt,qt,oe="Album",w,z,J="Artist",rt,H,ot="rank",bt,G,ct="duration",Vt,Ft,te,Jt,de,Gt,_e,ye,Xt=Wt(a[5]),tt=[];for(let D=0;D<Xt.length;D+=1)tt[D]=We(Ke(a,Xt,D));const bl=D=>N(tt[D],1,1,()=>{tt[D]=null});function kl(D){a[39](D)}let $e={showFirstLastButtons:!0,showPreviousNextButtons:!0};return a[1]!==void 0&&($e.settings=a[1]),Jt=new El({props:$e}),rl.push(()=>ul(Jt,"settings",kl)),{c(){t=y("form"),e=y("label"),l=y("span"),l.textContent=s,i=O(),n=y("input"),r=O(),o=y("label"),u=y("span"),u.textContent=h,c=O(),f=y("textarea"),p=O(),d=y("div"),d.innerHTML=_,E=O(),k=y("div"),B=y("span"),S=yt(b),j=yt(" Tracks ("),Y=yt(q),lt=yt(`
            in playlist)`),ft=O(),nt=y("span"),nt.innerHTML=ut,at=O(),st=y("span"),kt=y("table"),wt=y("thead"),Q=y("tr"),Tt=y("th"),it=y("input"),x=O(),T=y("th"),T.textContent=F,dt=O(),_t=y("th"),_t.textContent=Rt,jt=O(),qt=y("th"),qt.textContent=oe,w=O(),z=y("th"),z.textContent=J,rt=O(),H=y("th"),H.textContent=ot,bt=O(),G=y("th"),G.textContent=ct,Vt=O(),Ft=y("tbody");for(let D=0;D<tt.length;D+=1)tt[D].c();te=O(),Z(Jt.$$.fragment),this.h()},l(D){t=$(D,"FORM",{class:!0});var K=C(t);e=$(K,"LABEL",{class:!0});var Bt=C(e);l=$(Bt,"SPAN",{"data-svelte-h":!0}),mt(l)!=="svelte-7ccxmo"&&(l.textContent=s),i=I(Bt),n=$(Bt,"INPUT",{class:!0,type:!0,placeholder:!0}),Bt.forEach(m),r=I(K),o=$(K,"LABEL",{class:!0});var Qt=C(o);u=$(Qt,"SPAN",{"data-svelte-h":!0}),mt(u)!=="svelte-rmspr8"&&(u.textContent=h),c=I(Qt),f=$(Qt,"TEXTAREA",{class:!0,rows:!0,placeholder:!0}),C(f).forEach(m),Qt.forEach(m),p=I(K),d=$(K,"DIV",{class:!0,"data-svelte-h":!0}),mt(d)!=="svelte-10ijpzw"&&(d.innerHTML=_),K.forEach(m),E=I(D),k=$(D,"DIV",{class:!0});var ht=C(k);B=$(ht,"SPAN",{});var Kt=C(B);S=$t(Kt,b),j=$t(Kt," Tracks ("),Y=$t(Kt,q),lt=$t(Kt,`
            in playlist)`),Kt.forEach(m),ft=I(ht),nt=$(ht,"SPAN",{"data-svelte-h":!0}),mt(nt)!=="svelte-171hy05"&&(nt.innerHTML=ut),ht.forEach(m),at=I(D),st=$(D,"SPAN",{class:!0});var ue=C(st);kt=$(ue,"TABLE",{class:!0});var ce=C(kt);wt=$(ce,"THEAD",{});var Ee=C(wt);Q=$(Ee,"TR",{class:!0});var Et=C(Q);Tt=$(Et,"TH",{});var Ce=C(Tt);it=$(Ce,"INPUT",{type:!0,class:!0}),Ce.forEach(m),x=I(Et),T=$(Et,"TH",{"data-svelte-h":!0}),mt(T)!=="svelte-s1pt0e"&&(T.textContent=F),dt=I(Et),_t=$(Et,"TH",{class:!0,"data-svelte-h":!0}),mt(_t)!=="svelte-1b5qsso"&&(_t.textContent=Rt),jt=I(Et),qt=$(Et,"TH",{"data-svelte-h":!0}),mt(qt)!=="svelte-12o9w3z"&&(qt.textContent=oe),w=I(Et),z=$(Et,"TH",{"data-svelte-h":!0}),mt(z)!=="svelte-1tiipkx"&&(z.textContent=J),rt=I(Et),H=$(Et,"TH",{"data-svelte-h":!0}),mt(H)!=="svelte-1btrpio"&&(H.textContent=ot),bt=I(Et),G=$(Et,"TH",{"data-svelte-h":!0}),mt(G)!=="svelte-9uwuqy"&&(G.textContent=ct),Et.forEach(m),Ee.forEach(m),Vt=I(ce),Ft=$(ce,"TBODY",{});var Pe=C(Ft);for(let ge=0;ge<tt.length;ge+=1)tt[ge].l(Pe);Pe.forEach(m),ce.forEach(m),te=I(ue),M(Jt.$$.fragment,ue),ue.forEach(m),this.h()},h(){g(n,"class","input"),g(n,"type","text"),g(n,"placeholder","title"),g(e,"class","label"),g(f,"class","textarea"),g(f,"rows","4"),g(f,"placeholder","description"),g(o,"class","label"),g(d,"class","flex place-content-start"),g(t,"class","mb-10 space-y-2"),g(k,"class","flex justify-between w-full items-center gap-x-2 my-4"),g(it,"type","checkbox"),g(it,"class","checkbox"),it.checked=At=a[5].filter(al).length===a[5].length&&a[5].length>0,it.indeterminate=It=a[5].filter(sl).length!==a[5].length&&a[5].filter(il).length>0,g(_t,"class",".fitwidth"),g(Q,"class",""),g(kt,"class","table my-4"),g(st,"class","table-container")},m(D,K){P(D,t,K),v(t,e),v(e,l),v(e,i),v(e,n),le(n,a[0].playlist.title),v(t,r),v(t,o),v(o,u),v(o,c),v(o,f),le(f,a[0].playlist.description),v(t,p),v(t,d),P(D,E,K),P(D,k,K),v(k,B),v(B,S),v(B,j),v(B,Y),v(B,lt),v(k,ft),v(k,nt),P(D,at,K),P(D,st,K),v(st,kt),v(kt,wt),v(wt,Q),v(Q,Tt),v(Tt,it),v(Q,x),v(Q,T),v(Q,dt),v(Q,_t),v(Q,jt),v(Q,qt),v(Q,w),v(Q,z),v(Q,rt),v(Q,H),v(Q,bt),v(Q,G),v(kt,Vt),v(kt,Ft);for(let Bt=0;Bt<tt.length;Bt+=1)tt[Bt]&&tt[Bt].m(Ft,null);v(st,te),U(Jt,st,null),Gt=!0,_e||(ye=[X(n,"input",a[31]),X(f,"input",a[32]),X(it,"change",a[33])],_e=!0)},p(D,K){var Qt;if(K[0]&1&&n.value!==D[0].playlist.title&&le(n,D[0].playlist.title),K[0]&1&&le(f,D[0].playlist.description),(!Gt||K[0]&4)&&b!==(b=((Qt=D[2])==null?void 0:Qt.filter(nl).length)+"")&&zt(S,b),(!Gt||K[0]&1)&&q!==(q=D[0].playlist.tracks.data.length+"")&&zt(Y,q),(!Gt||K[0]&32&&At!==(At=D[5].filter(al).length===D[5].length&&D[5].length>0))&&(it.checked=At),(!Gt||K[0]&32&&It!==(It=D[5].filter(sl).length!==D[5].length&&D[5].filter(il).length>0))&&(it.indeterminate=It),K[0]&2096){Xt=Wt(D[5]);let ht;for(ht=0;ht<Xt.length;ht+=1){const Kt=Ke(D,Xt,ht);tt[ht]?(tt[ht].p(Kt,K),A(tt[ht],1)):(tt[ht]=We(Kt),tt[ht].c(),A(tt[ht],1),tt[ht].m(Ft,null))}for(Dt(),ht=Xt.length;ht<tt.length;ht+=1)bl(ht);Lt()}const Bt={};!de&&K[0]&2&&(de=!0,Bt.settings=D[1],ol(()=>de=!1)),Jt.$set(Bt)},i(D){if(!Gt){for(let K=0;K<Xt.length;K+=1)A(tt[K]);A(Jt.$$.fragment,D),Gt=!0}},o(D){tt=tt.filter(Boolean);for(let K=0;K<tt.length;K+=1)N(tt[K]);N(Jt.$$.fragment,D),Gt=!1},d(D){D&&(m(t),m(E),m(k),m(at),m(st)),ve(tt,D),R(Jt),_e=!1,ie(ye)}}}function ba(a){let t,e="Search Artist";return{c(){t=y("h4"),t.textContent=e},l(l){t=$(l,"H4",{"data-svelte-h":!0}),mt(t)!=="svelte-z92qpb"&&(t.textContent=e)},m(l,s){P(l,t,s)},p:V,d(l){l&&m(t)}}}function ka(a){let t,e,l,s,i,n=a[47].meta.name+"",r,o,u,h,c,f,p;h=new we({});function d(){return a[23](a[47])}return{c(){t=y("span"),e=y("span"),l=y("img"),i=O(),r=yt(n),o=O(),u=y("button"),Z(h.$$.fragment),this.h()},l(_){t=$(_,"SPAN",{class:!0});var E=C(t);e=$(E,"SPAN",{class:!0});var k=C(e);l=$(k,"IMG",{src:!0,alt:!0,class:!0}),i=I(k),r=$t(k,n),k.forEach(m),o=I(E),u=$(E,"BUTTON",{class:!0,title:!0});var B=C(u);M(h.$$.fragment,B),B.forEach(m),E.forEach(m),this.h()},h(){Yt(l.src,s=a[47].meta.picture_small)||g(l,"src",s),g(l,"alt","artist"),g(l,"class","mx-2"),g(e,"class","flex items-center"),g(u,"class","btn"),g(u,"title","add all artist titles to the playlist"),g(t,"class","flex justify-between w-full items-center py-1")},m(_,E){P(_,t,E),v(t,e),v(e,l),v(e,i),v(e,r),v(t,o),v(t,u),U(h,u,null),c=!0,f||(p=X(u,"click",d),f=!0)},p(_,E){a=_,(!c||E[1]&65536&&!Yt(l.src,s=a[47].meta.picture_small))&&g(l,"src",s),(!c||E[1]&65536)&&n!==(n=a[47].meta.name+"")&&zt(r,n)},i(_){c||(A(h.$$.fragment,_),c=!0)},o(_){N(h.$$.fragment,_),c=!1},d(_){_&&m(t),R(h),f=!1,p()}}}function Xe(a){let t,e,l,s,i,n,r;e=new re({props:{$$slots:{default:[wa]},$$scope:{ctx:a}}}),s=new re({props:{$$slots:{default:[Ca]},$$scope:{ctx:a}}});let o=Wt(a[9]),u=[];for(let c=0;c<o.length;c+=1)u[c]=Qe(Ye(a,o,c));const h=c=>N(u[c],1,1,()=>{u[c]=null});return{c(){t=y("span"),Z(e.$$.fragment),l=O(),Z(s.$$.fragment),i=O(),n=y("ul");for(let c=0;c<u.length;c+=1)u[c].c();this.h()},l(c){t=$(c,"SPAN",{class:!0});var f=C(t);M(e.$$.fragment,f),l=I(f),M(s.$$.fragment,f),f.forEach(m),i=I(c),n=$(c,"UL",{class:!0});var p=C(n);for(let d=0;d<u.length;d+=1)u[d].l(p);p.forEach(m),this.h()},h(){g(t,"class","flex justify-between w-full items-center gap-x-2 my-4"),g(n,"class","list")},m(c,f){P(c,t,f),U(e,t,null),v(t,l),U(s,t,null),P(c,i,f),P(c,n,f);for(let p=0;p<u.length;p+=1)u[p]&&u[p].m(n,null);r=!0},p(c,f){const p={};f[1]&4194304&&(p.$$scope={dirty:f,ctx:c}),e.$set(p);const d={};if(f[0]&8|f[1]&4194304&&(d.$$scope={dirty:f,ctx:c}),s.$set(d),f[0]&2099712){o=Wt(c[9]);let _;for(_=0;_<o.length;_+=1){const E=Ye(c,o,_);u[_]?(u[_].p(E,f),A(u[_],1)):(u[_]=Qe(E),u[_].c(),A(u[_],1),u[_].m(n,null))}for(Dt(),_=o.length;_<u.length;_+=1)h(_);Lt()}},i(c){if(!r){A(e.$$.fragment,c),A(s.$$.fragment,c);for(let f=0;f<o.length;f+=1)A(u[f]);r=!0}},o(c){N(e.$$.fragment,c),N(s.$$.fragment,c),u=u.filter(Boolean);for(let f=0;f<u.length;f+=1)N(u[f]);r=!1},d(c){c&&(m(t),m(i),m(n)),R(e),R(s),ve(u,c)}}}function wa(a){let t,e="Playlists Artists";return{c(){t=y("h4"),t.textContent=e},l(l){t=$(l,"H4",{"data-svelte-h":!0}),mt(t)!=="svelte-1fedd7v"&&(t.textContent=e)},m(l,s){P(l,t,s)},p:V,d(l){l&&m(t)}}}function ya(a){let t,e="alphabetical",l,s;return{c(){t=y("button"),t.textContent=e},l(i){t=$(i,"BUTTON",{"data-svelte-h":!0}),mt(t)!=="svelte-a0poae"&&(t.textContent=e)},m(i,n){P(i,t,n),l||(s=X(t,"click",a[26]),l=!0)},p:V,d(i){i&&m(t),l=!1,s()}}}function $a(a){let t,e="# tracks",l,s;return{c(){t=y("button"),t.textContent=e},l(i){t=$(i,"BUTTON",{"data-svelte-h":!0}),mt(t)!=="svelte-ms1gv1"&&(t.textContent=e)},m(i,n){P(i,t,n),l||(s=X(t,"click",a[25]),l=!0)},p:V,d(i){i&&m(t),l=!1,s()}}}function Ta(a){let t,e,l,s,i;return e=new ta({}),{c(){t=y("button"),Z(e.$$.fragment)},l(n){t=$(n,"BUTTON",{});var r=C(t);M(e.$$.fragment,r),r.forEach(m)},m(n,r){P(n,t,r),U(e,t,null),l=!0,s||(i=X(t,"click",a[28]),s=!0)},p:V,i(n){l||(A(e.$$.fragment,n),l=!0)},o(n){N(e.$$.fragment,n),l=!1},d(n){n&&m(t),R(e),s=!1,i()}}}function Ea(a){let t,e,l,s,i;return e=new Xn({}),{c(){t=y("button"),Z(e.$$.fragment)},l(n){t=$(n,"BUTTON",{});var r=C(t);M(e.$$.fragment,r),r.forEach(m)},m(n,r){P(n,t,r),U(e,t,null),l=!0,s||(i=X(t,"click",a[27]),s=!0)},p:V,i(n){l||(A(e.$$.fragment,n),l=!0)},o(n){N(e.$$.fragment,n),l=!1},d(n){n&&m(t),R(e),s=!1,i()}}}function Ca(a){let t,e,l,s,i;function n(f,p){if(f[3].orderBy==="trackCount")return $a;if(f[3].orderBy==="alphabetical")return ya}let r=n(a),o=r&&r(a);const u=[Ea,Ta],h=[];function c(f,p){return f[3].ascending?0:1}return e=c(a),l=h[e]=u[e](a),{c(){o&&o.c(),t=O(),l.c(),s=ae()},l(f){o&&o.l(f),t=I(f),l.l(f),s=ae()},m(f,p){o&&o.m(f,p),P(f,t,p),h[e].m(f,p),P(f,s,p),i=!0},p(f,p){r===(r=n(f))&&o?o.p(f,p):(o&&o.d(1),o=r&&r(f),o&&(o.c(),o.m(t.parentNode,t)));let d=e;e=c(f),e===d?h[e].p(f,p):(Dt(),N(h[d],1,1,()=>{h[d]=null}),Lt(),l=h[e],l?l.p(f,p):(l=h[e]=u[e](f),l.c()),A(l,1),l.m(s.parentNode,s))},i(f){i||(A(l),i=!0)},o(f){N(l),i=!1},d(f){f&&(m(t),m(s)),o&&o.d(f),h[e].d(f)}}}function Pa(a){let t,e,l,s,i,n=a[43].name+"",r,o,u,h,c=a[44]+"",f,p,d;return{c(){t=y("img"),s=O(),i=y("span"),r=yt(n),o=O(),u=y("small"),h=yt("(#"),f=yt(c),p=yt(")"),this.h()},l(_){t=$(_,"IMG",{src:!0,alt:!0}),s=I(_),i=$(_,"SPAN",{});var E=C(i);r=$t(E,n),E.forEach(m),o=I(_),u=$(_,"SMALL",{title:!0});var k=C(u);h=$t(k,"(#"),f=$t(k,c),p=$t(k,")"),k.forEach(m),this.h()},h(){Yt(t.src,e=a[43].picture_small)||g(t,"src",e),g(t,"alt",l=a[43].name),g(u,"title",d="artist has "+a[44]+" tracks in the playlist ")},m(_,E){P(_,t,E),P(_,s,E),P(_,i,E),v(i,r),P(_,o,E),P(_,u,E),v(u,h),v(u,f),v(u,p)},p(_,E){E[0]&512&&!Yt(t.src,e=_[43].picture_small)&&g(t,"src",e),E[0]&512&&l!==(l=_[43].name)&&g(t,"alt",l),E[0]&512&&n!==(n=_[43].name+"")&&zt(r,n),E[0]&512&&c!==(c=_[44]+"")&&zt(f,c),E[0]&512&&d!==(d="artist has "+_[44]+" tracks in the playlist ")&&g(u,"title",d)},d(_){_&&(m(t),m(s),m(i),m(o),m(u))}}}function Qe(a){let t,e,l,s,i,n,r,o,u,h,c,f,p,d,_,E;s=new re({props:{$$slots:{default:[Pa]},$$scope:{ctx:a}}}),u=new we({});function k(){return a[29](a[43])}f=new pl({});function B(){return a[30](a[43])}return{c(){t=y("li"),e=y("span"),l=y("a"),Z(s.$$.fragment),n=O(),r=y("div"),o=y("button"),Z(u.$$.fragment),h=O(),c=y("button"),Z(f.$$.fragment),p=O(),this.h()},l(b){t=$(b,"LI",{});var S=C(t);e=$(S,"SPAN",{class:!0});var j=C(e);l=$(j,"A",{href:!0,title:!0});var q=C(l);M(s.$$.fragment,q),q.forEach(m),n=I(j),r=$(j,"DIV",{class:!0});var Y=C(r);o=$(Y,"BUTTON",{class:!0,title:!0});var lt=C(o);M(u.$$.fragment,lt),lt.forEach(m),h=I(Y),c=$(Y,"BUTTON",{class:!0,title:!0});var ft=C(c);M(f.$$.fragment,ft),ft.forEach(m),Y.forEach(m),j.forEach(m),p=I(S),S.forEach(m),this.h()},h(){g(l,"href",i=a[43].link),g(l,"title","open artist in Deezer web interface"),g(o,"class","!p-0 "),g(o,"title","add all artist titles to the playlist"),g(c,"class","!p-0"),g(c,"title","deselect all artist titles from the playlist"),se(c,"text-gray-500",a[44]===0),g(r,"class","btn-group-vertical btn btn-sm gap-y-1"),g(e,"class","flex flex-row justify-between w-full items-center gap-x-2")},m(b,S){P(b,t,S),v(t,e),v(e,l),U(s,l,null),v(e,n),v(e,r),v(r,o),U(u,o,null),v(r,h),v(r,c),U(f,c,null),v(t,p),d=!0,_||(E=[X(o,"click",k),X(c,"click",B)],_=!0)},p(b,S){a=b;const j={};S[0]&512|S[1]&4194304&&(j.$$scope={dirty:S,ctx:a}),s.$set(j),(!d||S[0]&512&&i!==(i=a[43].link))&&g(l,"href",i),(!d||S[0]&2097664)&&se(c,"text-gray-500",a[44]===0)},i(b){d||(A(s.$$.fragment,b),A(u.$$.fragment,b),A(f.$$.fragment,b),d=!0)},o(b){N(s.$$.fragment,b),N(u.$$.fragment,b),N(f.$$.fragment,b),d=!1},d(b){b&&m(t),R(s),R(u),R(f),_=!1,ie(E)}}}function Aa(a){var B;let t,e,l,s,i,n,r,o,u,h,c,f,p,d;l=new re({props:{$$slots:{default:[ba]},$$scope:{ctx:a}}});function _(b){a[24](b)}let E={options:a[8],$$slots:{optionButton:[ka,({option:b,onSelection:S})=>({47:b,48:S}),({option:b,onSelection:S})=>[0,(b?65536:0)|(S?131072:0)]]},$$scope:{ctx:a}};a[7]!==void 0&&(E.input=a[7]),o=new $n({props:E}),rl.push(()=>ul(o,"input",_)),o.$on("selection",a[19]);let k=((B=a[9])==null?void 0:B.length)>0&&Xe(a);return{c(){t=y("span"),e=y("span"),Z(l.$$.fragment),s=O(),i=y("input"),n=O(),r=y("span"),Z(o.$$.fragment),h=O(),k&&k.c(),c=ae(),this.h()},l(b){t=$(b,"SPAN",{class:!0});var S=C(t);e=$(S,"SPAN",{class:!0});var j=C(e);M(l.$$.fragment,j),j.forEach(m),s=I(S),i=$(S,"INPUT",{class:!0,type:!0,name:!0,placeholder:!0}),n=I(S),r=$(S,"SPAN",{class:!0,tabindex:!0});var q=C(r);M(o.$$.fragment,q),q.forEach(m),S.forEach(m),h=I(b),k&&k.l(b),c=ae(),this.h()},h(){g(e,"class","mb-2"),g(i,"class","input"),g(i,"type","search"),g(i,"name","demo"),g(i,"placeholder","Search..."),g(r,"class","card w-full max-w-sm max-h-48 p-4 overflow-y-auto inline-block"),g(r,"tabindex","-1"),g(t,"class","my-4")},m(b,S){P(b,t,S),v(t,e),U(l,e,null),v(t,s),v(t,i),le(i,a[7]),v(t,n),v(t,r),U(o,r,null),P(b,h,S),k&&k.m(b,S),P(b,c,S),f=!0,p||(d=X(i,"input",a[22]),p=!0)},p(b,S){var Y;const j={};S[1]&4194304&&(j.$$scope={dirty:S,ctx:b}),l.$set(j),S[0]&128&&i.value!==b[7]&&le(i,b[7]);const q={};S[0]&256&&(q.options=b[8]),S[1]&4259840&&(q.$$scope={dirty:S,ctx:b}),!u&&S[0]&128&&(u=!0,q.input=b[7],ol(()=>u=!1)),o.$set(q),((Y=b[9])==null?void 0:Y.length)>0?k?(k.p(b,S),S[0]&512&&A(k,1)):(k=Xe(b),k.c(),A(k,1),k.m(c.parentNode,c)):k&&(Dt(),N(k,1,1,()=>{k=null}),Lt())},i(b){f||(A(l.$$.fragment,b),A(o.$$.fragment,b),A(k),f=!0)},o(b){N(l.$$.fragment,b),N(o.$$.fragment,b),N(k),f=!1},d(b){b&&(m(t),m(h),m(c)),R(l),R(o),k&&k.d(b),p=!1,d()}}}function xe(a){let t,e=a[6].message+"",l,s,i,n,r;return{c(){t=y("span"),l=yt(e),s=O(),i=y("progress"),this.h()},l(o){t=$(o,"SPAN",{});var u=C(t);l=$t(u,e),u.forEach(m),s=I(o),i=$(o,"PROGRESS",{max:!0}),C(i).forEach(m),this.h()},h(){i.value=n=a[6].value,g(i,"max",r=a[6].max)},m(o,u){P(o,t,u),v(t,l),P(o,s,u),P(o,i,u)},p(o,u){u[0]&64&&e!==(e=o[6].message+"")&&zt(l,e),u[0]&64&&n!==(n=o[6].value)&&(i.value=n),u[0]&64&&r!==(r=o[6].max)&&g(i,"max",r)},d(o){o&&(m(t),m(s),m(i))}}}function Ba(a){let t,e,l="Save to Deezer",s,i,n,r,o,u="Update playlist info",h,c,f,p,d,_="Update Tracks",E,k,B,b="Prepare playlist",S,j,q,Y,lt,ft="retrieve non readable tracks",nt,ut,at,st,kt,wt,Q="remove de-selected tracks",Tt,it,At,It;n=new qe({}),f=new qe({});let x=a[6]&&xe(a);return q=new Dn({}),st=new Nn({}),{c(){t=y("div"),e=y("h3"),e.textContent=l,s=O(),i=y("button"),Z(n.$$.fragment),r=O(),o=y("span"),o.textContent=u,h=O(),c=y("button"),Z(f.$$.fragment),p=O(),d=y("span"),d.textContent=_,E=O(),x&&x.c(),k=O(),B=y("h3"),B.textContent=b,S=O(),j=y("button"),Z(q.$$.fragment),Y=O(),lt=y("span"),lt.textContent=ft,ut=O(),at=y("button"),Z(st.$$.fragment),kt=O(),wt=y("span"),wt.textContent=Q,this.h()},l(T){t=$(T,"DIV",{class:!0});var F=C(t);e=$(F,"H3",{"data-svelte-h":!0}),mt(e)!=="svelte-1v8zjx5"&&(e.textContent=l),s=I(F),i=$(F,"BUTTON",{class:!0});var dt=C(i);M(n.$$.fragment,dt),r=I(dt),o=$(dt,"SPAN",{"data-svelte-h":!0}),mt(o)!=="svelte-wh4rhd"&&(o.textContent=u),dt.forEach(m),h=I(F),c=$(F,"BUTTON",{class:!0});var _t=C(c);M(f.$$.fragment,_t),p=I(_t),d=$(_t,"SPAN",{"data-svelte-h":!0}),mt(d)!=="svelte-67dhmv"&&(d.textContent=_),_t.forEach(m),E=I(F),x&&x.l(F),k=I(F),B=$(F,"H3",{"data-svelte-h":!0}),mt(B)!=="svelte-1oj9aef"&&(B.textContent=b),S=I(F),j=$(F,"BUTTON",{class:!0,title:!0});var Rt=C(j);M(q.$$.fragment,Rt),Y=I(Rt),lt=$(Rt,"SPAN",{"data-svelte-h":!0}),mt(lt)!=="svelte-dro7np"&&(lt.textContent=ft),Rt.forEach(m),ut=I(F),at=$(F,"BUTTON",{class:!0,title:!0});var jt=C(at);M(st.$$.fragment,jt),kt=I(jt),wt=$(jt,"SPAN",{"data-svelte-h":!0}),mt(wt)!=="svelte-13uzf89"&&(wt.textContent=Q),jt.forEach(m),F.forEach(m),this.h()},h(){g(i,"class","btn variant-filled-primary"),g(c,"class","btn variant-filled-secondary"),g(j,"class","btn variant-filled-tertiary"),j.disabled=nt=a[2].filter(el).length===0,g(j,"title","trye to find equivalent of tracks that are not readable anymore"),g(at,"class","btn variant-filled-tertiary"),at.disabled=Tt=a[2].filter(ll).length===0,g(at,"title","remove de-selected new tracks"),g(t,"class","flex flex-col gap-y-4 w-4/5")},m(T,F){P(T,t,F),v(t,e),v(t,s),v(t,i),U(n,i,null),v(i,r),v(i,o),v(t,h),v(t,c),U(f,c,null),v(c,p),v(c,d),v(t,E),x&&x.m(t,null),v(t,k),v(t,B),v(t,S),v(t,j),U(q,j,null),v(j,Y),v(j,lt),v(t,ut),v(t,at),U(st,at,null),v(at,kt),v(at,wt),it=!0,At||(It=[X(i,"click",he(a[13])),X(c,"click",he(a[15])),X(j,"click",he(a[16])),X(at,"click",he(a[17]))],At=!0)},p(T,F){T[6]?x?x.p(T,F):(x=xe(T),x.c(),x.m(t,k)):x&&(x.d(1),x=null),(!it||F[0]&4&&nt!==(nt=T[2].filter(el).length===0))&&(j.disabled=nt),(!it||F[0]&4&&Tt!==(Tt=T[2].filter(ll).length===0))&&(at.disabled=Tt)},i(T){it||(A(n.$$.fragment,T),A(f.$$.fragment,T),A(q.$$.fragment,T),A(st.$$.fragment,T),it=!0)},o(T){N(n.$$.fragment,T),N(f.$$.fragment,T),N(q.$$.fragment,T),N(st.$$.fragment,T),it=!1},d(T){T&&m(t),R(n),R(f),x&&x.d(),R(q),R(st),At=!1,ie(It)}}}function Na(a){let t,e;return t=new Tl({props:{$$slots:{sidebarRight:[Ba],sidebarLeft:[Aa],default:[va]},$$scope:{ctx:a}}}),{c(){Z(t.$$.fragment)},l(l){M(t.$$.fragment,l)},m(l,s){U(t,l,s),e=!0},p(l,s){const i={};s[0]&1023|s[1]&4194304&&(i.$$scope={dirty:s,ctx:l}),t.$set(i)},i(l){e||(A(t.$$.fragment,l),e=!0)},o(l){N(t.$$.fragment,l),e=!1},d(l){R(t,l)}}}function Sa(a,t){const e=[];for(let l=0;l<a.length;l+=t)e.push(a.slice(l,l+t));return e}function tl(a){return!a.inPlaylist&&a.selected?"!text-lime-500":a.inPlaylist&&!a.selected?"!line-through":""}const el=a=>a.selected&&!a.track.readable,ll=a=>!a.selected&&!a.inPlaylist,nl=a=>a.selected,al=a=>a.selected,sl=a=>a.selected,il=a=>a.selected;function Oa(a,t,e){let l,s,i,n,r,o,u;const h=Dl();let{data:c}=t;const f=fe([]);ee(a,f,w=>e(9,u=w));const p=fe([]);ee(a,p,w=>e(2,i=w));const d={ascending:!1,orderBy:"trackCount"};function _(w){w.ascending!==void 0&&e(3,d.ascending=w.ascending,d),w.orderBy!==void 0&&e(3,d.orderBy=w.orderBy,d),f.update(z=>{const J=d.ascending?1:-1,rt=(G,ct)=>nt(G.id)-nt(ct.id),H=(G,ct)=>G.name.localeCompare(ct.name),ot=(G,ct)=>(Vt,Ft)=>{const te=G(Vt,Ft);return te===0?ct(Vt,Ft):te};return z.sort((G,ct)=>{switch(d.orderBy){case"trackCount":return J*ot(rt,H)(G,ct);case"alphabetical":return J*ot(H,rt)(G,ct)}})})}async function E(){const w={request_method:"POST"};c.playlist.title&&(w.title=c.playlist.title),c.playlist.description&&(w.description=c.playlist.description),c.playlist.public&&(w.public=c.playlist.public);try{const z=await ne({apiPath:`/playlist/${c.playlist.id}`,searchParams:w});h.trigger({message:`Updated playlist: ${z?"OK":"KO"}`,timeout:3e3})}catch(z){h.trigger({message:`Updated playlist: error ${z}`,timeout:3e3})}}let k=fe(void 0);ee(a,k,w=>e(6,n=w));async function B(w,z,J){if(!w.length)return;k.set({message:`sending 0/${w.length} ${z} ${J} `,value:0,max:w.length});let rt=0;const H=100;for(const ot of Sa(w,H)){rt+=H,k.set({message:`sending ${rt} / ${w.length} ${z} ${J} `,value:rt,max:w.length}),console.log(`sending ${z} ${J}=${JSON.stringify(ot)}`);const bt={request_method:z};bt[J]=ot.join(",");const G=await ne({apiPath:`/playlist/${c.playlist.id}/tracks`,searchParams:bt});if(console.log({updateResult:G}),!G)throw new Error(`unable to send ${z} ${J}=${JSON.stringify(ot)}`)}}async function b(){try{const w=i.filter(J=>J.selected&&!J.inPlaylist).map(J=>J.track.id);await B(w,"POST","songs");const z=i.filter(J=>!J.selected&&J.inPlaylist).map(J=>J.track.id);if(await B(z,"DELETE","songs"),w.length>0){const J=i.filter(rt=>rt.selected).map(rt=>rt.track.id);await B(J,"POST","order")}if(k.set(void 0),w.length||z.length){const J=h.trigger({message:"Updated playlist tracks, refreshing playlist data"});await zl(),h.close(J)}}catch(w){h.trigger({message:`Updated playlist tracks: error ${w}`,timeout:3e3})}finally{k.set(void 0)}}async function S(w){const z=await _l(w.artist.id);if(!z){h.trigger({message:`Could not find artist ${w.artist.name}`,timeout:3e3});return}const J=z.flatMap(ot=>{const{tracks:bt,...G}=ot;return ot.tracks.map(ct=>({...ct,album:G}))}).filter(ot=>ot.id!==w.id&&ot.readable),rt={sensitivity:"base",ignorePunctuation:!0,numeric:!1,usage:"search"},H=J.filter(ot=>ot.title.localeCompare(w.title,void 0,rt)===0);switch(H.length){case 0:console.log("no match by title",{unreadableTrack:w}),h.trigger({message:`Could not find matching track for '${w.title}' in album '${w.album.title}'`,timeout:3e3});return;case 1:return H[0];default:{const ot=Object.values(H.reduce((G,ct)=>(G[ct.isrc]=ct,G),{}));if(ot.length===1)return ot[0];const bt=H.filter(G=>G.album.title.localeCompare(w.album.title,void 0,rt)===0);switch(bt.length){case 0:console.log("no match by title and album",{unreadableTrack:w}),h.trigger({message:`Could not find matching track for '${w.title}' in album '${w.album.title}'`,timeout:3e3});return;case 1:return bt[0];default:{const G=Object.values(bt.reduce((ct,Vt)=>(ct[Vt.isrc]=Vt,ct),{}));if(G.length===1)return G[0];console.log("multple match by title",{unreadableTrack:w,matchingTracksByTitleAndAlbum:bt}),h.trigger({message:`Found multiple matching tracks for '${w.title}' in album '${w.album.title}' : ${bt.map(ct=>ct.id)}`,timeout:3e3});return}}}}}async function j(){const w=Al(p),z=w.filter(H=>H.selected&&H.track.readable).length,J=w.filter(H=>H.selected&&!H.track.readable);for(const H of J){const ot=H.track,bt=await S(ot);if(bt){console.log("adding alternative to "+H.track.id+" : "+bt.title),H.selected=!1;const G=w.indexOf(H);w.splice(G+1,0,{selected:!0,inPlaylist:!1,track:bt})}}const rt=w.filter(H=>H.selected&&H.track.readable).length;h.trigger({message:`Reattached ${rt-z} track(s) to readable equivalents.<br/>(${w.filter(H=>H.selected).length-rt} unreadable track remaining)`,timeout:1e4}),p.set(w)}function q(){p.update(w=>{const z=w.filter(J=>J.selected||J.inPlaylist);return h.trigger({message:`Removed ${w.length-z.length} track(s) from the playlist`,timeout:3e3}),z})}let Y=fe("");ee(a,Y,w=>e(7,r=w));function lt(w){const z=w.detail.value;me(z,p)}const ft=wl(Y,(w,z)=>{if(!w){z([]);return}ne({apiPath:"/search/artist",searchParams:{q:w}}).then(J=>{const rt=J.data.map(H=>({label:`<span class="flex justify-between w-full items-center">
<span class="flex items-center"> <img src="${H.picture_small}" class="mx-2"/>${H.name}</span>
 <button class="btn-icon btn-icon-sm variant-outline-tertiary" title="add all artist titles to the playlist">add</button></span>`,value:H.id,meta:H}));z(rt)})});ee(a,ft,w=>e(8,o=w));function nt(w){return i.filter(z=>z.track.artist.id===w&&z.selected).length}let ut={page:0,limit:10,size:10,amounts:[10,20,50,100]};function at(){r=this.value,Y.set(r)}const st=w=>me(w.meta.id,p);function kt(w){r=w,Y.set(r)}const wt=()=>_({orderBy:"alphabetical"}),Q=()=>_({orderBy:"trackCount"}),Tt=()=>_({ascending:!1}),it=()=>_({ascending:!0}),At=w=>me(w.id,p),It=w=>Ge(w.id,p);function x(){c.playlist.title=this.value,e(0,c)}function T(){c.playlist.description=this.value,e(0,c)}const F=w=>{l.forEach(z=>z.selected=w.target.checked),p.update(z=>z)};function dt(w,z){w[z].selected=this.checked,e(5,l),e(2,i),e(1,ut)}const _t=w=>la(w.album,p),Rt=w=>ea(w.album.id,p),jt=w=>me(w.artist.id,p),qt=w=>Ge(w.artist.id,p);function oe(w){ut=w,e(1,ut),e(2,i)}return a.$$set=w=>{"data"in w&&e(0,c=w.data)},a.$$.update=()=>{if(a.$$.dirty[0]&1&&f.set(c.topArtists),a.$$.dirty[0]&1){const w=c.playlist.tracks.data.map(z=>({track:z,inPlaylist:!0,selected:!0}));p.set(w)}a.$$.dirty[0]&4&&e(1,ut.size=i.length,ut),a.$$.dirty[0]&6&&e(5,l=i.slice(ut.page*ut.limit,ut.page*ut.limit+ut.limit)),a.$$.dirty[0]&4&&e(4,s=i.reduce((w,z)=>Math.max(w,z.track.rank),0))},[c,ut,i,d,s,l,n,r,o,u,f,p,_,E,k,b,j,q,Y,lt,ft,nt,at,st,kt,wt,Q,Tt,it,At,It,x,T,F,dt,_t,Rt,jt,qt,oe]}class Ra extends pt{constructor(t){super(),vt(this,t,Oa,Na,gt,{data:0},null,[-1,-1])}}export{Ra as component,Ua as universal};
