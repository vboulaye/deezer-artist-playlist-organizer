import{d as El,w as mt}from"../chunks/paths.c561edac.js";import{e as qe,g as $l,R as Cl,c as lt,r as Al,p as Pl,u as Bl,o as Nl}from"../chunks/ProgressBar.svelte_svelte_type_style_lang.1fbac11b.js";import{g as kt,P as Sl,b as Ol,h as zt}from"../chunks/PlaylistApplicationShell.d3028105.js";import{s as ce,f as T,g as E,h as $,d as m,j as _,i as P,R as wt,T as yt,C as Z,D as X,e as nt,a as O,c as z,x as v,I as Y,w as Ze,y as He,z as Re,A as Me,L as Se,H as $e,M as Oe,G as Ce,N as ae,r as V,S as Ke,U as at,K as xe,F as tt,V as bt,l as ve,m as be,n as Ie,J as zl,k as Il,p as cl,O as _e,P as Je,Q as fl,W as pt,X as Dl,Y as It}from"../chunks/scheduler.637f0092.js";import{S as fe,i as he,a as A,g as De,c as je,t as B,b as R,d as M,m as U,e as F,j as jl,k as Ll,o as hl}from"../chunks/index.d7dc1d5e.js";import{i as Zl}from"../chunks/navigation.b498d3ad.js";import{a as ze,s as Dt,g as Hl}from"../chunks/index.9421d59c.js";function jt(n,e,t){const l=n.slice();return l[15]=e[t],l[17]=t,l}const Rl=n=>({}),Lt=n=>({}),Ml=n=>({}),Zt=n=>({}),Ul=n=>({}),Ht=n=>({}),Fl=n=>({}),Rt=n=>({}),Vl=n=>({}),Mt=n=>({}),Gl=n=>({}),Ut=n=>({});function Jl(n){let e,t,l,s,r,a,i,o;const u=[Wl,Yl,Kl],h=[];function c(f,b){return b&1&&(t=null),b&1&&(l=null),t==null&&(t=!!ml(f[0],f[17])),t?0:(l==null&&(l=!!dl(f[0],f[17])),l?1:2)}return s=c(n,-1),r=h[s]=u[s](n),{c(){e=T("span"),r.c(),a=O(),this.h()},l(f){e=E(f,"SPAN",{class:!0});var b=$(e);r.l(b),a=z(b),b.forEach(m),this.h()},h(){_(e,"class",i="rating-icon "+n[3])},m(f,b){P(f,e,b),h[s].m(e,null),v(e,a),o=!0},p(f,b){let g=s;s=c(f,b),s===g?h[s].p(f,b):(De(),B(h[g],1,1,()=>{h[g]=null}),je(),r=h[s],r?r.p(f,b):(r=h[s]=u[s](f),r.c()),A(r,1),r.m(e,a)),(!o||b&8&&i!==(i="rating-icon "+f[3]))&&_(e,"class",i)},i(f){o||(A(r),o=!0)},o(f){B(r),o=!1},d(f){f&&m(e),h[s].d()}}}function ql(n){let e,t,l,s,r,a,i,o,u,h;const c=[xl,Ql,Xl],f=[];function b(d,y){return y&1&&(t=null),y&1&&(l=null),t==null&&(t=!!ml(d[0],d[17])),t?0:(l==null&&(l=!!dl(d[0],d[17])),l?1:2)}s=b(n,-1),r=f[s]=c[s](n);function g(){return n[12](n[17])}return{c(){e=T("button"),r.c(),a=O(),this.h()},l(d){e=E(d,"BUTTON",{class:!0,type:!0});var y=$(e);r.l(y),a=z(y),y.forEach(m),this.h()},h(){_(e,"class",i="rating-icon "+n[3]),_(e,"type","button")},m(d,y){P(d,e,y),f[s].m(e,null),v(e,a),o=!0,u||(h=Y(e,"click",g),u=!0)},p(d,y){n=d;let k=s;s=b(n,y),s===k?f[s].p(n,y):(De(),B(f[k],1,1,()=>{f[k]=null}),je(),r=f[s],r?r.p(n,y):(r=f[s]=c[s](n),r.c()),A(r,1),r.m(e,a)),(!o||y&8&&i!==(i="rating-icon "+n[3]))&&_(e,"class",i)},i(d){o||(A(r),o=!0)},o(d){B(r),o=!1},d(d){d&&m(e),f[s].d(),u=!1,h()}}}function Kl(n){let e;const t=n[11].empty,l=Ze(t,n,n[10],Lt);return{c(){l&&l.c()},l(s){l&&l.l(s)},m(s,r){l&&l.m(s,r),e=!0},p(s,r){l&&l.p&&(!e||r&1024)&&He(l,t,s,s[10],e?Me(t,s[10],r,Rl):Re(s[10]),Lt)},i(s){e||(A(l,s),e=!0)},o(s){B(l,s),e=!1},d(s){l&&l.d(s)}}}function Yl(n){let e;const t=n[11].half,l=Ze(t,n,n[10],Zt);return{c(){l&&l.c()},l(s){l&&l.l(s)},m(s,r){l&&l.m(s,r),e=!0},p(s,r){l&&l.p&&(!e||r&1024)&&He(l,t,s,s[10],e?Me(t,s[10],r,Ml):Re(s[10]),Zt)},i(s){e||(A(l,s),e=!0)},o(s){B(l,s),e=!1},d(s){l&&l.d(s)}}}function Wl(n){let e;const t=n[11].full,l=Ze(t,n,n[10],Ht);return{c(){l&&l.c()},l(s){l&&l.l(s)},m(s,r){l&&l.m(s,r),e=!0},p(s,r){l&&l.p&&(!e||r&1024)&&He(l,t,s,s[10],e?Me(t,s[10],r,Ul):Re(s[10]),Ht)},i(s){e||(A(l,s),e=!0)},o(s){B(l,s),e=!1},d(s){l&&l.d(s)}}}function Xl(n){let e;const t=n[11].empty,l=Ze(t,n,n[10],Rt);return{c(){l&&l.c()},l(s){l&&l.l(s)},m(s,r){l&&l.m(s,r),e=!0},p(s,r){l&&l.p&&(!e||r&1024)&&He(l,t,s,s[10],e?Me(t,s[10],r,Fl):Re(s[10]),Rt)},i(s){e||(A(l,s),e=!0)},o(s){B(l,s),e=!1},d(s){l&&l.d(s)}}}function Ql(n){let e;const t=n[11].half,l=Ze(t,n,n[10],Mt);return{c(){l&&l.c()},l(s){l&&l.l(s)},m(s,r){l&&l.m(s,r),e=!0},p(s,r){l&&l.p&&(!e||r&1024)&&He(l,t,s,s[10],e?Me(t,s[10],r,Vl):Re(s[10]),Mt)},i(s){e||(A(l,s),e=!0)},o(s){B(l,s),e=!1},d(s){l&&l.d(s)}}}function xl(n){let e;const t=n[11].full,l=Ze(t,n,n[10],Ut);return{c(){l&&l.c()},l(s){l&&l.l(s)},m(s,r){l&&l.m(s,r),e=!0},p(s,r){l&&l.p&&(!e||r&1024)&&He(l,t,s,s[10],e?Me(t,s[10],r,Gl):Re(s[10]),Ut)},i(s){e||(A(l,s),e=!0)},o(s){B(l,s),e=!1},d(s){l&&l.d(s)}}}function Ft(n){let e,t,l,s;const r=[ql,Jl],a=[];function i(o,u){return o[2]?0:1}return e=i(n),t=a[e]=r[e](n),{c(){t.c(),l=nt()},l(o){t.l(o),l=nt()},m(o,u){a[e].m(o,u),P(o,l,u),s=!0},p(o,u){let h=e;e=i(o),e===h?a[e].p(o,u):(De(),B(a[h],1,1,()=>{a[h]=null}),je(),t=a[e],t?t.p(o,u):(t=a[e]=r[e](o),t.c()),A(t,1),t.m(l.parentNode,l))},i(o){s||(A(t),s=!0)},o(o){B(t),s=!1},d(o){o&&m(l),a[e].d(o)}}}function en(n){let e,t,l,s=qe({length:n[1]}),r=[];for(let i=0;i<s.length;i+=1)r[i]=Ft(jt(n,s,i));const a=i=>B(r[i],1,1,()=>{r[i]=null});return{c(){e=T("div");for(let i=0;i<r.length;i+=1)r[i].c();this.h()},l(i){e=E(i,"DIV",{class:!0,"data-testid":!0});var o=$(e);for(let u=0;u<r.length;u+=1)r[u].l(o);o.forEach(m),this.h()},h(){_(e,"class",t="ratings "+n[4]),_(e,"data-testid","rating-bar")},m(i,o){P(i,e,o);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);l=!0},p(i,[o]){if(o&1071){s=qe({length:i[1]});let u;for(u=0;u<s.length;u+=1){const h=jt(i,s,u);r[u]?(r[u].p(h,o),A(r[u],1)):(r[u]=Ft(h),r[u].c(),A(r[u],1),r[u].m(e,null))}for(De(),u=s.length;u<r.length;u+=1)a(u);je()}(!l||o&16&&t!==(t="ratings "+i[4]))&&_(e,"class",t)},i(i){if(!l){for(let o=0;o<s.length;o+=1)A(r[o]);l=!0}},o(i){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)B(r[o]);l=!1},d(i){i&&m(e),wt(r,i)}}}const tn="w-full flex";function ml(n,e){return Math.floor(n)>=e+1}function dl(n,e){return n===e+.5}function ln(n,e,t){let l,{$$slots:s={},$$scope:r}=e,{value:a=0}=e,{max:i=5}=e,{interactive:o=!1}=e,{text:u="text-token"}=e,{fill:h="fill-token"}=e,{justify:c="justify-center"}=e,{spacing:f="space-x-2"}=e,{regionIcon:b=""}=e;const g=yt();function d(k){g("icon",{index:k+1})}const y=k=>d(k);return n.$$set=k=>{t(14,e=Z(Z({},e),X(k))),"value"in k&&t(0,a=k.value),"max"in k&&t(1,i=k.max),"interactive"in k&&t(2,o=k.interactive),"text"in k&&t(6,u=k.text),"fill"in k&&t(7,h=k.fill),"justify"in k&&t(8,c=k.justify),"spacing"in k&&t(9,f=k.spacing),"regionIcon"in k&&t(3,b=k.regionIcon),"$$scope"in k&&t(10,r=k.$$scope)},n.$$.update=()=>{t(4,l=`${tn} ${u} ${h} ${c} ${f} ${e.class??""}`)},e=X(e),[a,i,o,b,l,d,u,h,c,f,r,s,y]}class nn extends fe{constructor(e){super(),he(this,e,ln,en,ce,{value:0,max:1,interactive:2,text:6,fill:7,justify:8,spacing:9,regionIcon:3})}}var Tt={exports:{}};function _l(){var n=Object.create(null),e=0,t=0,l=0,s=!1;this.put=function(a,i,o,u){if(s&&console.log("caching: %s = %j (@%s)",a,i,o),typeof o<"u"&&(typeof o!="number"||isNaN(o)||o<=0))throw new Error("Cache timeout must be a positive number");if(typeof u<"u"&&typeof u!="function")throw new Error("Cache timeout callback must be a function");var h=n[a];h?clearTimeout(h.timeout):l++;var c={value:i,expire:o+Date.now()};return isNaN(c.expire)||(c.timeout=setTimeout((function(){r(a),u&&u(a,i)}).bind(this),o)),n[a]=c,i},this.del=function(a){var i=!0,o=n[a];return o?(clearTimeout(o.timeout),!isNaN(o.expire)&&o.expire<Date.now()&&(i=!1)):i=!1,i&&r(a),i};function r(a){l--,delete n[a]}this.clear=function(){for(var a in n)clearTimeout(n[a].timeout);l=0,n=Object.create(null),s&&(e=0,t=0)},this.get=function(a){var i=n[a];if(typeof i<"u"){if(isNaN(i.expire)||i.expire>=Date.now())return s&&e++,i.value;s&&t++,l--,delete n[a]}else s&&t++;return null},this.size=function(){return l},this.memsize=function(){var a=0,i;for(i in n)a++;return a},this.debug=function(a){s=a},this.hits=function(){return e},this.misses=function(){return t},this.keys=function(){return Object.keys(n)},this.exportJson=function(){var a={};for(var i in n){var o=n[i];a[i]={value:o.value,expire:o.expire||"NaN"}}return JSON.stringify(a)},this.importJson=function(a,i){var o=JSON.parse(a),u=Date.now(),h=i&&i.skipDuplicates;for(var c in o)if(o.hasOwnProperty(c)){if(h){var f=n[c];if(f){s&&console.log("Skipping duplicate imported key '%s'",c);continue}}var b=o[c],g=b.expire-u;if(g<=0){this.del(c);continue}g=g>0?g:void 0,this.put(c,b.value,g)}return this.size()}}Tt.exports=new _l;Tt.exports.Cache=_l;var an=Tt.exports;const Vt=$l(an);class gl{constructor(e,t){this.cacheName=e,this.ttl=t}get(e){return Vt.get(this.buildKey(e))}buildKey(e){return this.cacheName+"~"+e}put(e,t){Vt.put(this.buildKey(e),t,this.ttl)}}const Et=Cl.extend("api-query"),Gt=new gl("ARTIST",3600*1e3),Jt=new gl("ARTIST-DISCOGRAPHY",3600*1e3);async function sn(n){Et("getDeezerArtist "+n);const e=Gt.get(n);if(e)return e;const t=await lt({apiPath:"/artist/"+n});return Gt.put(n,t),t}async function pl(n){return Et("getAlbumTracks "+n),await kt({apiPath:"/album/"+n+"/tracks",index:0,limit:100})}async function vl(n){Et("getDeezerArtistDiscography "+n);const e=Jt.get(n);if(e)return e;const t=await kt({apiPath:"/artist/"+n+"/albums",index:0,limit:100}),l=await Promise.all(t.data.map(async s=>{const r=await pl(s.id);return{...s,tracks:r.data}}));return Jt.put(n,l),l}const rn=!1;async function on(n){if(n==="NEW"){const e=new Date().toISOString(),t=await lt({apiPath:"/user/me/playlists",searchParams:{request_method:"POST",title:`New Playlist ${e}`,description:`Playlist created with deezer-artist-playlist-organizer on the ${e}`,public:!0}});throw Al(302,"./"+t.id)}return n}async function un({params:n}){const e=await on(n.id),t=await lt({apiPath:`/playlist/${e}`}),l=t.tracks.data.reduce((a,i)=>(a[i.artist.id]||(a[i.artist.id]={artist:i.artist,count:0}),a[i.artist.id].count++,a),{}),s=Object.values(l).sort((a,i)=>i.count-a.count);if(t.nb_tracks>400){const a=await kt({apiPath:`/playlist/${e}/tracks`,limit:100,index:t.tracks.data.length});t.tracks.data=[...t.tracks.data,...a.data]}const r=Promise.all(s.map(async a=>await sn(a.artist.id)));return{playlist:t,topArtists:r}}const Ka=Object.freeze(Object.defineProperty({__proto__:null,load:un,ssr:rn},Symbol.toStringTag,{value:"Module"}));function cn(n){let e,t,l='<path fill="currentColor" d="M128 20a108 108 0 1 0 108 108A108.12 108.12 0 0 0 128 20Zm0 192a84 84 0 1 1 84-84a84.09 84.09 0 0 1-84 84Zm40-84a12 12 0 0 1-5.12 9.83l-40 28A12 12 0 0 1 104 156v-56a12 12 0 0 1 18.88-9.83l40 28A12 12 0 0 1 168 128Z"/>',s=[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},n[0]],r={};for(let a=0;a<s.length;a+=1)r=Z(r,s[a]);return{c(){e=Se("svg"),t=new $e(!0),this.h()},l(a){e=Oe(a,"svg",{viewBox:!0,width:!0,height:!0});var i=$(e);t=Ce(i,!0),i.forEach(m),this.h()},h(){t.a=null,ae(e,r)},m(a,i){P(a,e,i),t.m(l,e)},p(a,[i]){ae(e,r=ze(s,[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},i&1&&a[0]]))},i:V,o:V,d(a){a&&m(e)}}}function fn(n,e,t){return n.$$set=l=>{t(0,e=Z(Z({},e),X(l)))},e=X(e),[e]}class hn extends fe{constructor(e){super(),he(this,e,fn,cn,ce,{})}}function mn(n){let e,t,l='<path fill="currentColor" d="M128 20a108 108 0 1 0 108 108A108.12 108.12 0 0 0 128 20Zm0 192a84 84 0 1 1 84-84a84.09 84.09 0 0 1-84 84ZM116 96v64a12 12 0 0 1-24 0V96a12 12 0 0 1 24 0Zm48 0v64a12 12 0 0 1-24 0V96a12 12 0 0 1 24 0Z"/>',s=[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},n[0]],r={};for(let a=0;a<s.length;a+=1)r=Z(r,s[a]);return{c(){e=Se("svg"),t=new $e(!0),this.h()},l(a){e=Oe(a,"svg",{viewBox:!0,width:!0,height:!0});var i=$(e);t=Ce(i,!0),i.forEach(m),this.h()},h(){t.a=null,ae(e,r)},m(a,i){P(a,e,i),t.m(l,e)},p(a,[i]){ae(e,r=ze(s,[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},i&1&&a[0]]))},i:V,o:V,d(a){a&&m(e)}}}function dn(n,e,t){return n.$$set=l=>{t(0,e=Z(Z({},e),X(l)))},e=X(e),[e]}class _n extends fe{constructor(e){super(),he(this,e,dn,mn,ce,{})}}function gn(n){let e,t,l,s,r;return t=new _n({}),{c(){e=T("span"),R(t.$$.fragment),this.h()},l(a){e=E(a,"SPAN",{role:!0});var i=$(e);M(t.$$.fragment,i),i.forEach(m),this.h()},h(){_(e,"role","button")},m(a,i){P(a,e,i),U(t,e,null),l=!0,s||(r=Y(e,"click",n[4]),s=!0)},p:V,i(a){l||(A(t.$$.fragment,a),l=!0)},o(a){B(t.$$.fragment,a),l=!1},d(a){a&&m(e),F(t),s=!1,r()}}}function pn(n){let e,t,l,s,r;return t=new hn({}),{c(){e=T("span"),R(t.$$.fragment),this.h()},l(a){e=E(a,"SPAN",{role:!0});var i=$(e);M(t.$$.fragment,i),i.forEach(m),this.h()},h(){_(e,"role","button")},m(a,i){P(a,e,i),U(t,e,null),l=!0,s||(r=Y(e,"click",n[4]),s=!0)},p:V,i(a){l||(A(t.$$.fragment,a),l=!0)},o(a){B(t.$$.fragment,a),l=!1},d(a){a&&m(e),F(t),s=!1,r()}}}function vn(n){let e,t,l=!0,s,r,a,i,o,u,h;const c=[pn,gn],f=[];function b(g,d){return g[0]?0:1}return a=b(n),i=f[a]=c[a](n),{c(){e=T("audio"),s=O(),r=T("span"),i.c(),this.h()},l(g){e=E(g,"AUDIO",{src:!0}),$(e).forEach(m),s=z(g),r=E(g,"SPAN",{});var d=$(r);i.l(d),d.forEach(m),this.h()},h(){Ke(e.src,t=n[1])||_(e,"src",t),e.loop=n[2],at(r,"text-gray-500",!n[3])},m(g,d){P(g,e,d),P(g,s,d),P(g,r,d),f[a].m(r,null),o=!0,u||(h=[Y(e,"play",n[5]),Y(e,"pause",n[5])],u=!0)},p(g,[d]){(!o||d&2&&!Ke(e.src,t=g[1]))&&_(e,"src",t),(!o||d&4)&&(e.loop=g[2]),d&1&&l!==(l=g[0])&&e[l?"pause":"play"]();let y=a;a=b(g),a===y?f[a].p(g,d):(De(),B(f[y],1,1,()=>{f[y]=null}),je(),i=f[a],i?i.p(g,d):(i=f[a]=c[a](g),i.c()),A(i,1),i.m(r,null)),(!o||d&8)&&at(r,"text-gray-500",!g[3])},i(g){o||(A(i),o=!0)},o(g){B(i),o=!1},d(g){g&&(m(e),m(s),m(r)),f[a].d(),u=!1,xe(h)}}}function bn(n,e,t){let{src:l}=e,{loop:s=!1}=e,{enabled:r=!0}=e,{paused:a=!0}=e;function i(){r&&t(0,a=!a)}function o(){a=this.paused,t(0,a)}return n.$$set=u=>{"src"in u&&t(1,l=u.src),"loop"in u&&t(2,s=u.loop),"enabled"in u&&t(3,r=u.enabled),"paused"in u&&t(0,a=u.paused)},[a,l,s,r,i,o]}class kn extends fe{constructor(e){super(),he(this,e,bn,vn,ce,{src:1,loop:2,enabled:3,paused:0})}}function qt(n,e,t){const l=n.slice();return l[37]=e[t],l}const wn=n=>({option:n[0]&16512,classesButton:n[0]&512}),Kt=n=>({option:n[37],classesButton:n[9],onSelection:n[15]});function yn(n){let e,t,l;return{c(){e=T("div"),t=ve(n[1]),this.h()},l(s){e=E(s,"DIV",{class:!0});var r=$(e);t=be(r,n[1]),r.forEach(m),this.h()},h(){_(e,"class",l="autocomplete-empty "+n[8])},m(s,r){P(s,e,r),v(e,t)},p(s,r){r[0]&2&&Ie(t,s[1]),r[0]&256&&l!==(l="autocomplete-empty "+s[8])&&_(e,"class",l)},i:V,o:V,d(s){s&&m(e)}}}function Tn(n){let e,t,l=[],s=new Map,r,a,i,o=qe(n[7].slice(0,n[14]));const u=h=>h[37];for(let h=0;h<o.length;h+=1){let c=qt(n,o,h),f=u(c);s.set(f,l[h]=Yt(f,c))}return{c(){e=T("nav"),t=T("ul");for(let h=0;h<l.length;h+=1)l[h].c();this.h()},l(h){e=E(h,"NAV",{class:!0});var c=$(e);t=E(c,"UL",{class:!0});var f=$(t);for(let b=0;b<l.length;b+=1)l[b].l(f);f.forEach(m),c.forEach(m),this.h()},h(){_(t,"class",r="autocomplete-list "+n[11]),_(e,"class",a="autocomplete-nav "+n[12])},m(h,c){P(h,e,c),v(e,t);for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(t,null);i=!0},p(h,c){c[0]&134268644&&(o=qe(h[7].slice(0,h[14])),De(),l=Bl(l,c,u,1,h,o,s,t,Nl,Yt,null,qt),je()),(!i||c[0]&2048&&r!==(r="autocomplete-list "+h[11]))&&_(t,"class",r),(!i||c[0]&4096&&a!==(a="autocomplete-nav "+h[12]))&&_(e,"class",a)},i(h){if(!i){for(let c=0;c<o.length;c+=1)A(l[c]);i=!0}},o(h){for(let c=0;c<l.length;c+=1)B(l[c]);i=!1},d(h){h&&m(e);for(let c=0;c<l.length;c+=1)l[c].d()}}}function En(n){let e,t,l=n[37].label+"",s,r,a;function i(){return n[31](n[37])}return{c(){e=T("button"),t=new $e(!1),this.h()},l(o){e=E(o,"BUTTON",{class:!0,type:!0});var u=$(e);t=Ce(u,!1),u.forEach(m),this.h()},h(){t.a=null,_(e,"class",s="autocomplete-button "+n[9]),_(e,"type","button")},m(o,u){P(o,e,u),t.m(l,e),r||(a=[Y(e,"click",i),Y(e,"click",n[29]),Y(e,"keypress",n[30])],r=!0)},p(o,u){n=o,u[0]&16512&&l!==(l=n[37].label+"")&&t.p(l),u[0]&512&&s!==(s="autocomplete-button "+n[9])&&_(e,"class",s)},d(o){o&&m(e),r=!1,xe(a)}}}function Yt(n,e){let t,l,s,r,a,i;const o=e[28].optionButton,u=Ze(o,e,e[27],Kt),h=u||En(e);return{key:n,first:null,c(){t=T("li"),h&&h.c(),l=O(),this.h()},l(c){t=E(c,"LI",{class:!0});var f=$(t);h&&h.l(f),l=z(f),f.forEach(m),this.h()},h(){_(t,"class",s="autocomplete-item "+e[10]),this.first=t},m(c,f){P(c,t,f),h&&h.m(t,null),v(t,l),i=!0},p(c,f){e=c,u?u.p&&(!i||f[0]&134234752)&&He(u,o,e,e[27],i?Me(o,e[27],f,wn):Re(e[27]),Kt):h&&h.p&&(!i||f[0]&17024)&&h.p(e,i?f:[-1,-1]),(!i||f[0]&1024&&s!==(s="autocomplete-item "+e[10]))&&_(t,"class",s)},i(c){i||(A(h,c),c&&zl(()=>{i&&(a&&a.end(1),r=jl(t,e[0],{transition:e[3],params:e[4],enabled:e[2]}),r.start())}),i=!0)},o(c){B(h,c),r&&r.invalidate(),c&&(a=Ll(t,e[0],{transition:e[5],params:e[6],enabled:e[2]})),i=!1},d(c){c&&m(t),h&&h.d(c),c&&a&&a.end()}}}function $n(n){let e,t,l,s,r;const a=[Tn,yn],i=[];function o(u,h){return u[7].length>0?0:1}return t=o(n),l=i[t]=a[t](n),{c(){e=T("div"),l.c(),this.h()},l(u){e=E(u,"DIV",{class:!0,"data-testid":!0});var h=$(e);l.l(h),h.forEach(m),this.h()},h(){_(e,"class",s="autocomplete "+n[13]),_(e,"data-testid","autocomplete")},m(u,h){P(u,e,h),i[t].m(e,null),r=!0},p(u,h){let c=t;t=o(u),t===c?i[t].p(u,h):(De(),B(i[c],1,1,()=>{i[c]=null}),je(),l=i[t],l?l.p(u,h):(l=i[t]=a[t](u),l.c()),A(l,1),l.m(e,null)),(!r||h[0]&8192&&s!==(s="autocomplete "+u[13]))&&_(e,"class",s)},i(u){r||(A(l),r=!0)},o(u){B(l),r=!1},d(u){u&&m(e),i[t].d()}}}function bl(n,e){const{transition:t,params:l,enabled:s}=e;return s?t(n,l):"duration"in l?t(n,{duration:0}):{duration:0}}function Cn(n,e,t){let l,s,r,a,i,o,u,h,c,f;tt(n,Pl,N=>t(32,f=N));let{$$slots:b={},$$scope:g}=e;const d=yt();let{input:y=void 0}=e,{options:k=[]}=e,{limit:C=void 0}=e,{allowlist:p=[]}=e,{denylist:S=[]}=e,{emptyState:K="No Results Found."}=e,{regionNav:D=""}=e,{regionList:G="list-nav"}=e,{regionItem:ie=""}=e,{regionButton:te="w-full"}=e,{regionEmpty:Q="text-center"}=e,{transitions:me=!f}=e,{transitionIn:pe=Dt}=e,{transitionInParams:Ae={duration:200}}=e,{transitionOut:we=Dt}=e,{transitionOutParams:q={duration:200}}=e;function x(N,ge){let Ee=[...k];N.length&&(Ee=Ee.filter(Le=>N.includes(Le.value))),ge.length&&(Ee=Ee.filter(Le=>!ge.includes(Le.value))),!N.length&&!ge.length&&(Ee=k),t(26,l=Ee)}function j(){let N=[...l];return N=N.filter(ge=>{const Ee=String(y).toLowerCase().trim();if(JSON.stringify([ge.label,ge.value,ge.keywords]).toLowerCase().includes(Ee))return ge}),N}function ke(N){d("selection",N)}function de(N){bt.call(this,n,N)}function Te(N){bt.call(this,n,N)}const Fe=N=>ke(N);return n.$$set=N=>{t(36,e=Z(Z({},e),X(N))),"input"in N&&t(16,y=N.input),"options"in N&&t(17,k=N.options),"limit"in N&&t(18,C=N.limit),"allowlist"in N&&t(19,p=N.allowlist),"denylist"in N&&t(20,S=N.denylist),"emptyState"in N&&t(1,K=N.emptyState),"regionNav"in N&&t(21,D=N.regionNav),"regionList"in N&&t(22,G=N.regionList),"regionItem"in N&&t(23,ie=N.regionItem),"regionButton"in N&&t(24,te=N.regionButton),"regionEmpty"in N&&t(25,Q=N.regionEmpty),"transitions"in N&&t(2,me=N.transitions),"transitionIn"in N&&t(3,pe=N.transitionIn),"transitionInParams"in N&&t(4,Ae=N.transitionInParams),"transitionOut"in N&&t(5,we=N.transitionOut),"transitionOutParams"in N&&t(6,q=N.transitionOutParams),"$$scope"in N&&t(27,g=N.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&131072&&t(26,l=k),n.$$.dirty[0]&1572864&&x(p,S),n.$$.dirty[0]&67174400&&t(7,s=y?j():l),n.$$.dirty[0]&262272&&t(14,r=C!==void 0?C:s.length),t(13,a=`${e.class??""}`),n.$$.dirty[0]&2097152&&t(12,i=`${D}`),n.$$.dirty[0]&4194304&&t(11,o=`${G}`),n.$$.dirty[0]&8388608&&t(10,u=`${ie}`),n.$$.dirty[0]&16777216&&t(9,h=`${te}`),n.$$.dirty[0]&33554432&&t(8,c=`${Q}`)},e=X(e),[bl,K,me,pe,Ae,we,q,s,c,h,u,o,i,a,r,ke,y,k,C,p,S,D,G,ie,te,Q,l,g,b,de,Te,Fe]}class An extends fe{constructor(e){super(),he(this,e,Cn,$n,ce,{dynamicTransition:0,input:16,options:17,limit:18,allowlist:19,denylist:20,emptyState:1,regionNav:21,regionList:22,regionItem:23,regionButton:24,regionEmpty:25,transitions:2,transitionIn:3,transitionInParams:4,transitionOut:5,transitionOutParams:6},null,[-1,-1])}get dynamicTransition(){return bl}}function Pn(n){let e,t;const l=n[1].default,s=Ze(l,n,n[0],null);return{c(){e=T("span"),s&&s.c(),this.h()},l(r){e=E(r,"SPAN",{class:!0});var a=$(e);s&&s.l(a),a.forEach(m),this.h()},h(){_(e,"class","flex gap-x-2 items-center mx-2")},m(r,a){P(r,e,a),s&&s.m(e,null),t=!0},p(r,[a]){s&&s.p&&(!t||a&1)&&He(s,l,r,r[0],t?Me(l,r[0],a,null):Re(r[0]),null)},i(r){t||(A(s,r),t=!0)},o(r){B(s,r),t=!1},d(r){r&&m(e),s&&s.d(r)}}}function Bn(n,e,t){let{$$slots:l={},$$scope:s}=e;return n.$$set=r=>{"$$scope"in r&&t(0,s=r.$$scope)},[s,l]}class ot extends fe{constructor(e){super(),he(this,e,Bn,Pn,ce,{})}}function Nn(n){let e,t,l,s;const r=n[3].default,a=Ze(r,n,n[2],null);return{c(){e=T("td"),t=T("div"),a&&a.c(),this.h()},l(i){e=E(i,"TD",{style:!0,title:!0});var o=$(e);t=E(o,"DIV",{class:!0});var u=$(t);a&&a.l(u),u.forEach(m),o.forEach(m),this.h()},h(){_(t,"class",l="flex items-center justify-"+n[0]+" gap-x-2 h-full"),Il(e,"vertical-align","middle"),_(e,"title",n[1])},m(i,o){P(i,e,o),v(e,t),a&&a.m(t,null),s=!0},p(i,[o]){a&&a.p&&(!s||o&4)&&He(a,r,i,i[2],s?Me(r,i[2],o,null):Re(i[2]),null),(!s||o&1&&l!==(l="flex items-center justify-"+i[0]+" gap-x-2 h-full"))&&_(t,"class",l),(!s||o&2)&&_(e,"title",i[1])},i(i){s||(A(a,i),s=!0)},o(i){B(a,i),s=!1},d(i){i&&m(e),a&&a.d(i)}}}function Sn(n,e,t){let{$$slots:l={},$$scope:s}=e,{justify:r="center"}=e,{title:a=""}=e;return n.$$set=i=>{"justify"in i&&t(0,r=i.justify),"title"in i&&t(1,a=i.title),"$$scope"in i&&t(2,s=i.$$scope)},[r,a,s,l]}class Qe extends fe{constructor(e){super(),he(this,e,Sn,Nn,ce,{justify:0,title:1})}}function On(n){let e,t,l='<path fill="currentColor" d="M216 36H68.53a20.09 20.09 0 0 0-17.15 9.71L5.71 121.83a12 12 0 0 0 0 12.34l45.67 76.12A20.09 20.09 0 0 0 68.53 220H216a20 20 0 0 0 20-20V56a20 20 0 0 0-20-20Zm-4 160H70.8L30 128l40.8-68H212Zm-108.49-52.49L119 128l-15.52-15.51a12 12 0 0 1 17-17L136 111l15.51-15.52a12 12 0 0 1 17 17L153 128l15.52 15.51a12 12 0 0 1-17 17L136 145l-15.51 15.52a12 12 0 0 1-17-17Z"/>',s=[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},n[0]],r={};for(let a=0;a<s.length;a+=1)r=Z(r,s[a]);return{c(){e=Se("svg"),t=new $e(!0),this.h()},l(a){e=Oe(a,"svg",{viewBox:!0,width:!0,height:!0});var i=$(e);t=Ce(i,!0),i.forEach(m),this.h()},h(){t.a=null,ae(e,r)},m(a,i){P(a,e,i),t.m(l,e)},p(a,[i]){ae(e,r=ze(s,[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},i&1&&a[0]]))},i:V,o:V,d(a){a&&m(e)}}}function zn(n,e,t){return n.$$set=l=>{t(0,e=Z(Z({},e),X(l)))},e=X(e),[e]}class In extends fe{constructor(e){super(),he(this,e,zn,On,ce,{})}}function Dn(n){let e,t,l='<path fill="currentColor" d="M160 36a92.09 92.09 0 0 0-81 48.36A68 68 0 1 0 72 220h88a92 92 0 0 0 0-184Zm0 160H72a44 44 0 0 1-1.82-88A91.86 91.86 0 0 0 68 128a12 12 0 0 0 24 0a68 68 0 1 1 68 68Zm40.49-92.49a12 12 0 0 1 0 17l-48 48a12 12 0 0 1-17 0l-24-24a12 12 0 1 1 17-17L144 143l39.51-39.52a12 12 0 0 1 16.98.03Z"/>',s=[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},n[0]],r={};for(let a=0;a<s.length;a+=1)r=Z(r,s[a]);return{c(){e=Se("svg"),t=new $e(!0),this.h()},l(a){e=Oe(a,"svg",{viewBox:!0,width:!0,height:!0});var i=$(e);t=Ce(i,!0),i.forEach(m),this.h()},h(){t.a=null,ae(e,r)},m(a,i){P(a,e,i),t.m(l,e)},p(a,[i]){ae(e,r=ze(s,[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},i&1&&a[0]]))},i:V,o:V,d(a){a&&m(e)}}}function jn(n,e,t){return n.$$set=l=>{t(0,e=Z(Z({},e),X(l)))},e=X(e),[e]}class Ln extends fe{constructor(e){super(),he(this,e,jn,Dn,ce,{})}}function Zn(n){let e,t,l='<path fill="currentColor" d="M136.37 187.53a12 12 0 0 1 0 17l-5.94 5.94a60 60 0 0 1-84.88-84.88l24.12-24.11A60 60 0 0 1 152 99a12 12 0 1 1-16 18a36 36 0 0 0-49.37 1.47l-24.1 24.08a36 36 0 0 0 50.92 50.92l5.94-5.94a12 12 0 0 1 16.98 0Zm74.08-142a60.09 60.09 0 0 0-84.88 0l-5.94 5.94a12 12 0 0 0 17 17l5.94-5.94a36 36 0 0 1 50.92 50.92l-24.11 24.12A36 36 0 0 1 120 139a12 12 0 1 0-16 18a60 60 0 0 0 82.3-2.43l24.12-24.11a60.09 60.09 0 0 0 .03-84.91Z"/>',s=[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},n[0]],r={};for(let a=0;a<s.length;a+=1)r=Z(r,s[a]);return{c(){e=Se("svg"),t=new $e(!0),this.h()},l(a){e=Oe(a,"svg",{viewBox:!0,width:!0,height:!0});var i=$(e);t=Ce(i,!0),i.forEach(m),this.h()},h(){t.a=null,ae(e,r)},m(a,i){P(a,e,i),t.m(l,e)},p(a,[i]){ae(e,r=ze(s,[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},i&1&&a[0]]))},i:V,o:V,d(a){a&&m(e)}}}function Hn(n,e,t){return n.$$set=l=>{t(0,e=Z(Z({},e),X(l)))},e=X(e),[e]}class Rn extends fe{constructor(e){super(),he(this,e,Hn,Zn,ce,{})}}function Mn(n){let e,t,l='<path fill="currentColor" d="M180 128a12 12 0 0 1-12 12H88a12 12 0 0 1 0-24h80a12 12 0 0 1 12 12Zm56 0A108 108 0 1 1 128 20a108.12 108.12 0 0 1 108 108Zm-24 0a84 84 0 1 0-84 84a84.09 84.09 0 0 0 84-84Z"/>',s=[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},n[0]],r={};for(let a=0;a<s.length;a+=1)r=Z(r,s[a]);return{c(){e=Se("svg"),t=new $e(!0),this.h()},l(a){e=Oe(a,"svg",{viewBox:!0,width:!0,height:!0});var i=$(e);t=Ce(i,!0),i.forEach(m),this.h()},h(){t.a=null,ae(e,r)},m(a,i){P(a,e,i),t.m(l,e)},p(a,[i]){ae(e,r=ze(s,[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},i&1&&a[0]]))},i:V,o:V,d(a){a&&m(e)}}}function Un(n,e,t){return n.$$set=l=>{t(0,e=Z(Z({},e),X(l)))},e=X(e),[e]}class kl extends fe{constructor(e){super(),he(this,e,Un,Mn,ce,{})}}function Fn(n){let e,t,l='<path fill="currentColor" d="M128 20a108 108 0 1 0 108 108A108.12 108.12 0 0 0 128 20Zm0 192a84 84 0 1 1 84-84a84.09 84.09 0 0 1-84 84Zm52-84a12 12 0 0 1-12 12h-28v28a12 12 0 0 1-24 0v-28H88a12 12 0 0 1 0-24h28V88a12 12 0 0 1 24 0v28h28a12 12 0 0 1 12 12Z"/>',s=[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},n[0]],r={};for(let a=0;a<s.length;a+=1)r=Z(r,s[a]);return{c(){e=Se("svg"),t=new $e(!0),this.h()},l(a){e=Oe(a,"svg",{viewBox:!0,width:!0,height:!0});var i=$(e);t=Ce(i,!0),i.forEach(m),this.h()},h(){t.a=null,ae(e,r)},m(a,i){P(a,e,i),t.m(l,e)},p(a,[i]){ae(e,r=ze(s,[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},i&1&&a[0]]))},i:V,o:V,d(a){a&&m(e)}}}function Vn(n,e,t){return n.$$set=l=>{t(0,e=Z(Z({},e),X(l)))},e=X(e),[e]}class $t extends fe{constructor(e){super(),he(this,e,Vn,Fn,ce,{})}}function Gn(n){let e,t,l='<path fill="currentColor" d="M128 128a12 12 0 0 1-12 12H48a12 12 0 0 1 0-24h68a12 12 0 0 1 12 12ZM48 76h132a12 12 0 0 0 0-24H48a12 12 0 0 0 0 24Zm52 104H48a12 12 0 0 0 0 24h52a12 12 0 0 0 0-24Zm132.49-20.49a12 12 0 0 0-17 0L196 179v-67a12 12 0 0 0-24 0v67l-19.51-19.52a12 12 0 0 0-17 17l40 40a12 12 0 0 0 17 0l40-40a12 12 0 0 0 0-16.97Z"/>',s=[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},n[0]],r={};for(let a=0;a<s.length;a+=1)r=Z(r,s[a]);return{c(){e=Se("svg"),t=new $e(!0),this.h()},l(a){e=Oe(a,"svg",{viewBox:!0,width:!0,height:!0});var i=$(e);t=Ce(i,!0),i.forEach(m),this.h()},h(){t.a=null,ae(e,r)},m(a,i){P(a,e,i),t.m(l,e)},p(a,[i]){ae(e,r=ze(s,[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},i&1&&a[0]]))},i:V,o:V,d(a){a&&m(e)}}}function Jn(n,e,t){return n.$$set=l=>{t(0,e=Z(Z({},e),X(l)))},e=X(e),[e]}class qn extends fe{constructor(e){super(),he(this,e,Jn,Gn,ce,{})}}function Kn(n){let e,t,l='<path fill="currentColor" d="M36 128a12 12 0 0 1 12-12h68a12 12 0 0 1 0 24H48a12 12 0 0 1-12-12Zm12-52h52a12 12 0 0 0 0-24H48a12 12 0 0 0 0 24Zm132 104H48a12 12 0 0 0 0 24h132a12 12 0 0 0 0-24Zm52.49-100.49l-40-40a12 12 0 0 0-17 0l-40 40a12 12 0 0 0 17 17L172 77v67a12 12 0 0 0 24 0V77l19.51 19.52a12 12 0 0 0 17-17Z"/>',s=[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},n[0]],r={};for(let a=0;a<s.length;a+=1)r=Z(r,s[a]);return{c(){e=Se("svg"),t=new $e(!0),this.h()},l(a){e=Oe(a,"svg",{viewBox:!0,width:!0,height:!0});var i=$(e);t=Ce(i,!0),i.forEach(m),this.h()},h(){t.a=null,ae(e,r)},m(a,i){P(a,e,i),t.m(l,e)},p(a,[i]){ae(e,r=ze(s,[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},i&1&&a[0]]))},i:V,o:V,d(a){a&&m(e)}}}function Yn(n,e,t){return n.$$set=l=>{t(0,e=Z(Z({},e),X(l)))},e=X(e),[e]}class Wn extends fe{constructor(e){super(),he(this,e,Yn,Kn,ce,{})}}function Xn(n){let e,t,l='<path fill="currentColor" d="M243 96.05a20 20 0 0 0-17.26-13.72l-57-4.93l-22.3-53.14a20 20 0 0 0-36.82 0L87.29 77.4l-57 4.93a20 20 0 0 0-11.42 35.07l43.32 37.8l-13 56.24A20 20 0 0 0 79 233.1l49-29.76l49 29.76a20 20 0 0 0 29.8-21.66l-13-56.24l43.32-37.8A20 20 0 0 0 243 96.05Zm-66.75 42.62a20 20 0 0 0-6.35 19.63l11.39 49.32l-42.94-26.08a19.9 19.9 0 0 0-20.7 0l-42.94 26.08L86.1 158.3a20 20 0 0 0-6.35-19.63l-38.09-33.23l50.14-4.34a19.92 19.92 0 0 0 16.69-12.19L128 42.42l19.51 46.49a19.92 19.92 0 0 0 16.69 12.19l50.14 4.34Z"/>',s=[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},n[0]],r={};for(let a=0;a<s.length;a+=1)r=Z(r,s[a]);return{c(){e=Se("svg"),t=new $e(!0),this.h()},l(a){e=Oe(a,"svg",{viewBox:!0,width:!0,height:!0});var i=$(e);t=Ce(i,!0),i.forEach(m),this.h()},h(){t.a=null,ae(e,r)},m(a,i){P(a,e,i),t.m(l,e)},p(a,[i]){ae(e,r=ze(s,[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},i&1&&a[0]]))},i:V,o:V,d(a){a&&m(e)}}}function Qn(n,e,t){return n.$$set=l=>{t(0,e=Z(Z({},e),X(l)))},e=X(e),[e]}class xn extends fe{constructor(e){super(),he(this,e,Qn,Xn,ce,{})}}function ea(n){let e,t,l='<g fill="currentColor"><path d="M184.13 147.7a8.08 8.08 0 0 0-2.54 7.89l13.52 58.54a8 8 0 0 1-11.89 8.69l-51.1-31a7.93 7.93 0 0 0-8.24 0l-51.1 31a8 8 0 0 1-11.89-8.69l13.52-58.54a8.08 8.08 0 0 0-2.54-7.89l-45.11-39.35a8 8 0 0 1 4.54-14.07l59.46-5.14a8 8 0 0 0 6.67-4.88l23.23-55.36a8 8 0 0 1 14.68 0l23.23 55.36a8 8 0 0 0 6.67 4.88l59.46 5.14a8 8 0 0 1 4.54 14.07Z" opacity=".2"/><path d="M239.2 97.29a16 16 0 0 0-13.81-11L166 81.17l-23.28-55.36a15.95 15.95 0 0 0-29.44 0L90.07 81.17l-59.46 5.15a16 16 0 0 0-9.11 28.06l45.11 39.42l-13.52 58.54a16 16 0 0 0 23.84 17.34l51-31l51.11 31a16 16 0 0 0 23.84-17.34l-13.51-58.6l45.1-39.36a16 16 0 0 0 4.73-17.09Zm-15.22 5l-45.1 39.36a16 16 0 0 0-5.08 15.71L187.35 216l-51.07-31a15.9 15.9 0 0 0-16.54 0l-51 31l13.46-58.6a16 16 0 0 0-5.08-15.71L32 102.35a.37.37 0 0 1 0-.09l59.44-5.14a16 16 0 0 0 13.35-9.75L128 32.08l23.2 55.29a16 16 0 0 0 13.35 9.75l59.45 5.14v.07Z"/></g>',s=[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},n[0]],r={};for(let a=0;a<s.length;a+=1)r=Z(r,s[a]);return{c(){e=Se("svg"),t=new $e(!0),this.h()},l(a){e=Oe(a,"svg",{viewBox:!0,width:!0,height:!0});var i=$(e);t=Ce(i,!0),i.forEach(m),this.h()},h(){t.a=null,ae(e,r)},m(a,i){P(a,e,i),t.m(l,e)},p(a,[i]){ae(e,r=ze(s,[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},i&1&&a[0]]))},i:V,o:V,d(a){a&&m(e)}}}function ta(n,e,t){return n.$$set=l=>{t(0,e=Z(Z({},e),X(l)))},e=X(e),[e]}class la extends fe{constructor(e){super(),he(this,e,ta,ea,ce,{})}}function na(n){let e,t,l='<path fill="currentColor" d="m234.5 114.38l-45.1 39.36l13.51 58.6a16 16 0 0 1-23.84 17.34l-51.11-31l-51 31a16 16 0 0 1-23.84-17.34l13.49-58.54l-45.11-39.42a16 16 0 0 1 9.11-28.06l59.46-5.15l23.21-55.36a15.95 15.95 0 0 1 29.44 0L166 81.17l59.44 5.15a16 16 0 0 1 9.11 28.06Z"/>',s=[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},n[0]],r={};for(let a=0;a<s.length;a+=1)r=Z(r,s[a]);return{c(){e=Se("svg"),t=new $e(!0),this.h()},l(a){e=Oe(a,"svg",{viewBox:!0,width:!0,height:!0});var i=$(e);t=Ce(i,!0),i.forEach(m),this.h()},h(){t.a=null,ae(e,r)},m(a,i){P(a,e,i),t.m(l,e)},p(a,[i]){ae(e,r=ze(s,[{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},i&1&&a[0]]))},i:V,o:V,d(a){a&&m(e)}}}function aa(n,e,t){return n.$$set=l=>{t(0,e=Z(Z({},e),X(l)))},e=X(e),[e]}class sa extends fe{constructor(e){super(),he(this,e,aa,na,ce,{})}}function ra(n){let e,t,l,s,r,a=n[0].name+"",i,o,u,h,c,f,b,g,d;return c=new $t({}),{c(){e=T("span"),t=T("span"),l=T("img"),r=O(),i=ve(a),o=O(),u=T("span"),h=T("button"),R(c.$$.fragment),this.h()},l(y){e=E(y,"SPAN",{class:!0});var k=$(e);t=E(k,"SPAN",{class:!0});var C=$(t);l=E(C,"IMG",{src:!0,alt:!0,class:!0}),r=z(C),i=be(C,a),C.forEach(m),o=z(k),u=E(k,"SPAN",{class:!0});var p=$(u);h=E(p,"BUTTON",{class:!0,title:!0});var S=$(h);M(c.$$.fragment,S),S.forEach(m),p.forEach(m),k.forEach(m),this.h()},h(){Ke(l.src,s=n[0].picture_small)||_(l,"src",s),_(l,"alt","artist"),_(l,"class","mx-2"),_(t,"class","flex items-center"),_(h,"class","!p-0"),_(h,"title","add all artist titles to the playlist"),_(u,"class","btn-group-vertical btn btn-sm gap-y-1"),_(e,"class",f="flex justify-between w-full items-center py-1 "+n[1])},m(y,k){P(y,e,k),v(e,t),v(t,l),v(t,r),v(t,i),v(e,o),v(e,u),v(u,h),U(c,h,null),b=!0,g||(d=[Y(h,"click",n[2]),Y(h,"pointerenter",n[3]),Y(h,"pointerleave",n[4])],g=!0)},p(y,[k]){(!b||k&1&&!Ke(l.src,s=y[0].picture_small))&&_(l,"src",s),(!b||k&1)&&a!==(a=y[0].name+"")&&Ie(i,a),(!b||k&2&&f!==(f="flex justify-between w-full items-center py-1 "+y[1]))&&_(e,"class",f)},i(y){b||(A(c.$$.fragment,y),b=!0)},o(y){B(c.$$.fragment,y),b=!1},d(y){y&&m(e),F(c),g=!1,xe(d)}}}function ia(n,e,t){let{artist:l}=e,s="";function r(o){bt.call(this,n,o)}const a=()=>t(1,s="variant-ghost-success"),i=()=>t(1,s="");return n.$$set=o=>{"artist"in o&&t(0,l=o.artist)},[l,s,r,a,i]}class oa extends fe{constructor(e){super(),he(this,e,ia,ra,ce,{artist:0})}}function Wt(n,e){e.update(t=>(t.forEach(l=>{l.track.artist.id===n&&(l.selected=!1)}),t))}async function vt(n,e){const t=await vl(n);e.update(l=>{const s=t.sort((a,i)=>a.release_date.localeCompare(i.release_date)).flatMap(a=>{const{tracks:i,...o}=a;return a.tracks.map(u=>({...u,album:o}))});s.forEach(a=>{const i=l.find(o=>o.track.id===a.id);i?(i.track.album=a.album,i.selected=!0):l.push({track:a,inPlaylist:!1,selected:!0})});function r(a){return s.findIndex(i=>i.id===a.track.id)}return l.sort((a,i)=>{const o=r(a),u=r(i);return o-u}),l})}function ua(n,e){e.update(t=>(t.forEach(l=>{l.track.album.id===n&&(l.selected=!1)}),t))}async function ca(n,e){const t=await pl(n.id);e.update(l=>{t.data.forEach(o=>{const u=l.find(h=>h.track.id===o.id);o.album=n,u?(u.track.album=o.album,u.selected=!0):l.push({track:o,inPlaylist:!1,selected:!0})});function s(o){return t.data.findIndex(u=>u.id===o.track.id)+1}function r(o){return l.findIndex(u=>u.track.id===o.track.id)+1}const a=l.findIndex(o=>o.track.album.id===n.id);function i(o){const u=s(o);return u===0?r(o)*1e4:a*1e4+u}return console.log({startIndex:a}),l.sort((o,u)=>{const h=a*1e4+i(o),c=a*1e4+i(u);return h-c}),l})}function fa(n){let e,t,l,s,r,a,i,o,u,h,c,f;const b=n[5].default,g=Ze(b,n,n[4],null);return r=new $t({}),o=new kl({}),{c(){e=T("span"),g&&g.c(),t=O(),l=T("span"),s=T("button"),R(r.$$.fragment),a=O(),i=T("button"),R(o.$$.fragment),this.h()},l(d){e=E(d,"SPAN",{class:!0});var y=$(e);g&&g.l(y),t=z(y),l=E(y,"SPAN",{class:!0});var k=$(l);s=E(k,"BUTTON",{class:!0,title:!0});var C=$(s);M(r.$$.fragment,C),C.forEach(m),a=z(k),i=E(k,"BUTTON",{class:!0,title:!0});var p=$(i);M(o.$$.fragment,p),p.forEach(m),k.forEach(m),y.forEach(m),this.h()},h(){_(s,"class","!p-0 "),_(s,"title",n[0]),_(i,"class","!p-0"),_(i,"title",n[1]),_(l,"class","btn-group-vertical btn btn-sm gap-y-1"),_(e,"class",u="flex flex-row justify-between w-full items-center py-1 gap-x-2 "+n[2])},m(d,y){P(d,e,y),g&&g.m(e,null),v(e,t),v(e,l),v(l,s),U(r,s,null),v(l,a),v(l,i),U(o,i,null),h=!0,c||(f=[Y(s,"click",n[6]),Y(s,"pointerenter",n[7]),Y(s,"pointerleave",n[8]),Y(i,"click",n[9]),Y(i,"pointerenter",n[10]),Y(i,"pointerleave",n[11])],c=!0)},p(d,[y]){g&&g.p&&(!h||y&16)&&He(g,b,d,d[4],h?Me(b,d[4],y,null):Re(d[4]),null),(!h||y&1)&&_(s,"title",d[0]),(!h||y&2)&&_(i,"title",d[1]),(!h||y&4&&u!==(u="flex flex-row justify-between w-full items-center py-1 gap-x-2 "+d[2]))&&_(e,"class",u)},i(d){h||(A(g,d),A(r.$$.fragment,d),A(o.$$.fragment,d),h=!0)},o(d){B(g,d),B(r.$$.fragment,d),B(o.$$.fragment,d),h=!1},d(d){d&&m(e),g&&g.d(d),F(r),F(o),c=!1,xe(f)}}}function ha(n,e,t){let{$$slots:l={},$$scope:s}=e;const r=yt();let{addTitle:a="add all album titles to the playlist"}=e,{removeTitle:i="deselect all album titles from the playlist"}=e,o="";const u=()=>r("add"),h=()=>t(2,o="variant-ghost-success"),c=()=>t(2,o=""),f=()=>r("remove"),b=()=>t(2,o="variant-ghost-error"),g=()=>t(2,o="");return n.$$set=d=>{"addTitle"in d&&t(0,a=d.addTitle),"removeTitle"in d&&t(1,i=d.removeTitle),"$$scope"in d&&t(4,s=d.$$scope)},[a,i,o,r,s,l,u,h,c,f,b,g]}class wl extends fe{constructor(e){super(),he(this,e,ha,fa,ce,{addTitle:0,removeTitle:1})}}function Xt(n,e,t){const l=n.slice();l[50]=e[t],l[52]=e,l[53]=t;const s=l[50].track;return l[51]=s,l}function Qt(n,e,t){const l=n.slice();l[45]=e[t];const s=l[20](l[45].id);return l[46]=s,l}function ma(n){let e,t,l;function s(){n[35].call(e,n[52],n[53])}return{c(){e=T("input"),this.h()},l(r){e=E(r,"INPUT",{type:!0,class:!0}),this.h()},h(){_(e,"type","checkbox"),_(e,"class","checkbox")},m(r,a){P(r,e,a),e.checked=n[50].selected,t||(l=Y(e,"change",s),t=!0)},p(r,a){n=r,a[0]&64&&(e.checked=n[50].selected)},d(r){r&&m(e),t=!1,l()}}}function da(n){let e,t=n[53]+1+"",l;return{c(){e=T("span"),l=ve(t)},l(s){e=E(s,"SPAN",{});var r=$(e);l=be(r,t),r.forEach(m)},m(s,r){P(s,e,r),v(e,l)},p:V,d(s){s&&m(e)}}}function _a(n){let e,t,l,s,r=n[51].title+"",a,i,o;return e=new kn({props:{src:n[51].preview,enabled:n[51].readable}}),{c(){R(e.$$.fragment),t=O(),l=T("a"),s=T("span"),a=ve(r),this.h()},l(u){M(e.$$.fragment,u),t=z(u),l=E(u,"A",{href:!0,title:!0});var h=$(l);s=E(h,"SPAN",{});var c=$(s);a=be(c,r),c.forEach(m),h.forEach(m),this.h()},h(){_(l,"href",i=n[51].link),_(l,"title","open track in Deezer web interface")},m(u,h){U(e,u,h),P(u,t,h),P(u,l,h),v(l,s),v(s,a),o=!0},p(u,h){const c={};h[0]&64&&(c.src=u[51].preview),h[0]&64&&(c.enabled=u[51].readable),e.$set(c),(!o||h[0]&64)&&r!==(r=u[51].title+"")&&Ie(a,r),(!o||h[0]&64&&i!==(i=u[51].link))&&_(l,"href",i)},i(u){o||(A(e.$$.fragment,u),o=!0)},o(u){B(e.$$.fragment,u),o=!1},d(u){u&&(m(t),m(l)),F(e,u)}}}function ga(n){let e,t,l,s,r=n[51].album.title+"",a;return{c(){e=T("img"),l=O(),s=T("span"),a=ve(r),this.h()},l(i){e=E(i,"IMG",{src:!0,alt:!0}),l=z(i),s=E(i,"SPAN",{});var o=$(s);a=be(o,r),o.forEach(m),this.h()},h(){Ke(e.src,t=n[51].album.cover_small)||_(e,"src",t),_(e,"alt","album cover")},m(i,o){P(i,e,o),P(i,l,o),P(i,s,o),v(s,a)},p(i,o){o[0]&64&&!Ke(e.src,t=i[51].album.cover_small)&&_(e,"src",t),o[0]&64&&r!==(r=i[51].album.title+"")&&Ie(a,r)},d(i){i&&(m(e),m(l),m(s))}}}function pa(n){let e,t,l,s;return t=new ot({props:{$$slots:{default:[ga]},$$scope:{ctx:n}}}),{c(){e=T("a"),R(t.$$.fragment),this.h()},l(r){e=E(r,"A",{href:!0,title:!0});var a=$(e);M(t.$$.fragment,a),a.forEach(m),this.h()},h(){_(e,"href",l="https://www.deezer.com/album/"+n[51].album.id),_(e,"title","open album in Deezer web interface")},m(r,a){P(r,e,a),U(t,e,null),s=!0},p(r,a){const i={};a[0]&64|a[1]&8388608&&(i.$$scope={dirty:a,ctx:r}),t.$set(i),(!s||a[0]&64&&l!==(l="https://www.deezer.com/album/"+r[51].album.id))&&_(e,"href",l)},i(r){s||(A(t.$$.fragment,r),s=!0)},o(r){B(t.$$.fragment,r),s=!1},d(r){r&&m(e),F(t)}}}function va(n){let e,t;function l(){return n[36](n[51])}function s(){return n[37](n[51])}return e=new wl({props:{addTitle:"add all album titles to the playlist",removeTitle:"deselect all album titles from the playlist",$$slots:{default:[pa]},$$scope:{ctx:n}}}),e.$on("add",l),e.$on("remove",s),{c(){R(e.$$.fragment)},l(r){M(e.$$.fragment,r)},m(r,a){U(e,r,a),t=!0},p(r,a){n=r;const i={};a[0]&64|a[1]&8388608&&(i.$$scope={dirty:a,ctx:n}),e.$set(i)},i(r){t||(A(e.$$.fragment,r),t=!0)},o(r){B(e.$$.fragment,r),t=!1},d(r){F(e,r)}}}function ba(n){let e,t,l=n[51].artist.name+"",s,r;return{c(){e=T("a"),t=T("span"),s=ve(l),this.h()},l(a){e=E(a,"A",{href:!0,title:!0});var i=$(e);t=E(i,"SPAN",{});var o=$(t);s=be(o,l),o.forEach(m),i.forEach(m),this.h()},h(){_(e,"href",r=n[51].artist.link),_(e,"title","open artist in Deezer web interface")},m(a,i){P(a,e,i),v(e,t),v(t,s)},p(a,i){i[0]&64&&l!==(l=a[51].artist.name+"")&&Ie(s,l),i[0]&64&&r!==(r=a[51].artist.link)&&_(e,"href",r)},d(a){a&&m(e)}}}function ka(n){let e,t;function l(){return n[38](n[51])}function s(){return n[39](n[51])}return e=new wl({props:{addTitle:"add all artist titles to the playlist",removeTitle:"deselect all artist titles from the playlist",$$slots:{default:[ba]},$$scope:{ctx:n}}}),e.$on("add",l),e.$on("remove",s),{c(){R(e.$$.fragment)},l(r){M(e.$$.fragment,r)},m(r,a){U(e,r,a),t=!0},p(r,a){n=r;const i={};a[0]&64|a[1]&8388608&&(i.$$scope={dirty:a,ctx:n}),e.$set(i)},i(r){t||(A(e.$$.fragment,r),t=!0)},o(r){B(e.$$.fragment,r),t=!1},d(r){F(e,r)}}}function wa(n){let e,t;return e=new xn({}),{c(){R(e.$$.fragment)},l(l){M(e.$$.fragment,l)},m(l,s){U(e,l,s),t=!0},i(l){t||(A(e.$$.fragment,l),t=!0)},o(l){B(e.$$.fragment,l),t=!1},d(l){F(e,l)}}}function ya(n){let e,t;return e=new la({}),{c(){R(e.$$.fragment)},l(l){M(e.$$.fragment,l)},m(l,s){U(e,l,s),t=!0},i(l){t||(A(e.$$.fragment,l),t=!0)},o(l){B(e.$$.fragment,l),t=!1},d(l){F(e,l)}}}function Ta(n){let e,t;return e=new sa({}),{c(){R(e.$$.fragment)},l(l){M(e.$$.fragment,l)},m(l,s){U(e,l,s),t=!0},i(l){t||(A(e.$$.fragment,l),t=!0)},o(l){B(e.$$.fragment,l),t=!1},d(l){F(e,l)}}}function Ea(n){let e,t;return e=new nn({props:{value:5*n[51].rank/n[5],max:5,$$slots:{full:[Ta],half:[ya],empty:[wa]},$$scope:{ctx:n}}}),{c(){R(e.$$.fragment)},l(l){M(e.$$.fragment,l)},m(l,s){U(e,l,s),t=!0},p(l,s){const r={};s[0]&96&&(r.value=5*l[51].rank/l[5]),s[1]&8388608&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){t||(A(e.$$.fragment,l),t=!0)},o(l){B(e.$$.fragment,l),t=!1},d(l){F(e,l)}}}function $a(n){let e=zt(n[51].duration*1e3,{units:["m","s"],largest:2})+"",t,l,s;return{c(){t=ve(e),l=O(),s=T("span"),this.h()},l(r){t=be(r,e),l=z(r),s=E(r,"SPAN",{class:!0}),$(s).forEach(m),this.h()},h(){_(s,"class","grow")},m(r,a){P(r,t,a),P(r,l,a),P(r,s,a)},p(r,a){a[0]&64&&e!==(e=zt(r[51].duration*1e3,{units:["m","s"],largest:2})+"")&&Ie(t,e)},d(r){r&&(m(t),m(l),m(s))}}}function xt(n){let e,t,l,s,r,a,i,o,u,h,c,f,b,g,d,y,k;return t=new Qe({props:{$$slots:{default:[ma]},$$scope:{ctx:n}}}),s=new Qe({props:{$$slots:{default:[da]},$$scope:{ctx:n}}}),a=new Qe({props:{justify:"start",$$slots:{default:[_a]},$$scope:{ctx:n}}}),o=new Qe({props:{justify:"start",$$slots:{default:[va]},$$scope:{ctx:n}}}),h=new Qe({props:{justify:"start",$$slots:{default:[ka]},$$scope:{ctx:n}}}),f=new Qe({props:{title:n[51].rank,$$slots:{default:[Ea]},$$scope:{ctx:n}}}),g=new Qe({props:{$$slots:{default:[$a]},$$scope:{ctx:n}}}),{c(){e=T("tr"),R(t.$$.fragment),l=O(),R(s.$$.fragment),r=O(),R(a.$$.fragment),i=O(),R(o.$$.fragment),u=O(),R(h.$$.fragment),c=O(),R(f.$$.fragment),b=O(),R(g.$$.fragment),d=O(),this.h()},l(C){e=E(C,"TR",{class:!0});var p=$(e);M(t.$$.fragment,p),l=z(p),M(s.$$.fragment,p),r=z(p),M(a.$$.fragment,p),i=z(p),M(o.$$.fragment,p),u=z(p),M(h.$$.fragment,p),c=z(p),M(f.$$.fragment,p),b=z(p),M(g.$$.fragment,p),d=z(p),p.forEach(m),this.h()},h(){_(e,"class",y=It(nl(n[50]))+" svelte-p6m18c"),at(e,"!text-red-500",!n[51].readable)},m(C,p){P(C,e,p),U(t,e,null),v(e,l),U(s,e,null),v(e,r),U(a,e,null),v(e,i),U(o,e,null),v(e,u),U(h,e,null),v(e,c),U(f,e,null),v(e,b),U(g,e,null),v(e,d),k=!0},p(C,p){const S={};p[0]&64|p[1]&8388608&&(S.$$scope={dirty:p,ctx:C}),t.$set(S);const K={};p[1]&8388608&&(K.$$scope={dirty:p,ctx:C}),s.$set(K);const D={};p[0]&64|p[1]&8388608&&(D.$$scope={dirty:p,ctx:C}),a.$set(D);const G={};p[0]&64|p[1]&8388608&&(G.$$scope={dirty:p,ctx:C}),o.$set(G);const ie={};p[0]&64|p[1]&8388608&&(ie.$$scope={dirty:p,ctx:C}),h.$set(ie);const te={};p[0]&64&&(te.title=C[51].rank),p[0]&96|p[1]&8388608&&(te.$$scope={dirty:p,ctx:C}),f.$set(te);const Q={};p[0]&64|p[1]&8388608&&(Q.$$scope={dirty:p,ctx:C}),g.$set(Q),(!k||p[0]&64&&y!==(y=It(nl(C[50]))+" svelte-p6m18c"))&&_(e,"class",y),(!k||p[0]&64)&&at(e,"!text-red-500",!C[51].readable)},i(C){k||(A(t.$$.fragment,C),A(s.$$.fragment,C),A(a.$$.fragment,C),A(o.$$.fragment,C),A(h.$$.fragment,C),A(f.$$.fragment,C),A(g.$$.fragment,C),k=!0)},o(C){B(t.$$.fragment,C),B(s.$$.fragment,C),B(a.$$.fragment,C),B(o.$$.fragment,C),B(h.$$.fragment,C),B(f.$$.fragment,C),B(g.$$.fragment,C),k=!1},d(C){C&&m(e),F(t),F(s),F(a),F(o),F(h),F(f),F(g)}}}function Ca(n){var Pt;let e,t,l,s="Title",r,a,i,o,u,h="Description",c,f,b,g,d="",y,k,C,p,S,K,D,G=((Pt=n[3])==null?void 0:Pt.filter(rl).length)+"",ie,te,Q=n[0].playlist.tracks.data.length+"",me,pe,Ae,we,q,x,j,ke,de,Te,Fe,N,ge,Ee="Pos.",Le,Ue,ut="Title",st,Ve,ct="Album",rt,w,L="Artist",H,le,J="rank",se,oe,ee="duration",re,Pe,et,Be,dt,Ge,_t,Ct,Ye=qe(n[6]),ne=[];for(let I=0;I<Ye.length;I+=1)ne[I]=xt(Xt(n,Ye,I));const yl=I=>B(ne[I],1,1,()=>{ne[I]=null});function Tl(I){n[40](I)}let At={showFirstLastButtons:!0,showPreviousNextButtons:!0};return n[1]!==void 0&&(At.settings=n[1]),Be=new Ol({props:At}),cl.push(()=>hl(Be,"settings",Tl)),{c(){e=T("form"),t=T("label"),l=T("span"),l.textContent=s,r=O(),a=T("input"),i=O(),o=T("label"),u=T("span"),u.textContent=h,c=O(),f=T("textarea"),b=O(),g=T("div"),g.innerHTML=d,y=O(),k=T("span"),C=T("table"),p=T("thead"),S=T("tr"),K=T("td"),D=T("span"),ie=ve(G),te=ve(" Tracks ("),me=ve(Q),pe=ve(`
                            in playlist)`),Ae=O(),we=T("td"),q=T("input"),x=O(),j=T("tr"),ke=T("th"),de=T("input"),N=O(),ge=T("th"),ge.textContent=Ee,Le=O(),Ue=T("th"),Ue.textContent=ut,st=O(),Ve=T("th"),Ve.textContent=ct,rt=O(),w=T("th"),w.textContent=L,H=O(),le=T("th"),le.textContent=J,se=O(),oe=T("th"),oe.textContent=ee,re=O(),Pe=T("tbody");for(let I=0;I<ne.length;I+=1)ne[I].c();et=O(),R(Be.$$.fragment),this.h()},l(I){e=E(I,"FORM",{class:!0});var W=$(e);t=E(W,"LABEL",{class:!0});var Ne=$(t);l=E(Ne,"SPAN",{"data-svelte-h":!0}),_e(l)!=="svelte-7ccxmo"&&(l.textContent=s),r=z(Ne),a=E(Ne,"INPUT",{class:!0,type:!0,placeholder:!0}),Ne.forEach(m),i=z(W),o=E(W,"LABEL",{class:!0});var We=$(o);u=E(We,"SPAN",{"data-svelte-h":!0}),_e(u)!=="svelte-rmspr8"&&(u.textContent=h),c=z(We),f=E(We,"TEXTAREA",{class:!0,rows:!0,placeholder:!0}),$(f).forEach(m),We.forEach(m),b=z(W),g=E(W,"DIV",{class:!0,"data-svelte-h":!0}),_e(g)!=="svelte-10ijpzw"&&(g.innerHTML=d),W.forEach(m),y=z(I),k=E(I,"SPAN",{class:!0});var ue=$(k);C=E(ue,"TABLE",{class:!0});var Xe=$(C);p=E(Xe,"THEAD",{});var ft=$(p);S=E(ft,"TR",{});var ht=$(S);K=E(ht,"TD",{colspan:!0});var Bt=$(K);D=E(Bt,"SPAN",{});var it=$(D);ie=be(it,G),te=be(it," Tracks ("),me=be(it,Q),pe=be(it,`
                            in playlist)`),it.forEach(m),Bt.forEach(m),Ae=z(ht),we=E(ht,"TD",{colspan:!0});var Nt=$(we);q=E(Nt,"INPUT",{class:!0,title:!0,type:!0,placeholder:!0}),Nt.forEach(m),ht.forEach(m),x=z(ft),j=E(ft,"TR",{class:!0});var ye=$(j);ke=E(ye,"TH",{});var St=$(ke);de=E(St,"INPUT",{type:!0,class:!0}),St.forEach(m),N=z(ye),ge=E(ye,"TH",{"data-svelte-h":!0}),_e(ge)!=="svelte-s1pt0e"&&(ge.textContent=Ee),Le=z(ye),Ue=E(ye,"TH",{class:!0,"data-svelte-h":!0}),_e(Ue)!=="svelte-1b5qsso"&&(Ue.textContent=ut),st=z(ye),Ve=E(ye,"TH",{"data-svelte-h":!0}),_e(Ve)!=="svelte-12o9w3z"&&(Ve.textContent=ct),rt=z(ye),w=E(ye,"TH",{"data-svelte-h":!0}),_e(w)!=="svelte-1tiipkx"&&(w.textContent=L),H=z(ye),le=E(ye,"TH",{"data-svelte-h":!0}),_e(le)!=="svelte-1btrpio"&&(le.textContent=J),se=z(ye),oe=E(ye,"TH",{"data-svelte-h":!0}),_e(oe)!=="svelte-9uwuqy"&&(oe.textContent=ee),ye.forEach(m),ft.forEach(m),re=z(Xe),Pe=E(Xe,"TBODY",{});var Ot=$(Pe);for(let gt=0;gt<ne.length;gt+=1)ne[gt].l(Ot);Ot.forEach(m),Xe.forEach(m),et=z(ue),M(Be.$$.fragment,ue),ue.forEach(m),this.h()},h(){_(a,"class","input"),_(a,"type","text"),_(a,"placeholder","title"),_(t,"class","label"),_(f,"class","textarea"),_(f,"rows","4"),_(f,"placeholder","description"),_(o,"class","label"),_(g,"class","flex place-content-start"),_(e,"class","mb-10 space-y-2"),_(K,"colspan","3"),_(q,"class","input"),_(q,"title","Input (search)"),_(q,"type","search"),_(q,"placeholder","Search..."),_(we,"colspan","4"),_(de,"type","checkbox"),_(de,"class","checkbox"),de.checked=Te=n[6].filter(il).length===n[6].length&&n[6].length>0,de.indeterminate=Fe=n[6].filter(ol).length!==n[6].length&&n[6].filter(ul).length>0,_(Ue,"class",".fitwidth"),_(j,"class",""),_(C,"class","table table-compact my-4"),_(k,"class","table-container")},m(I,W){P(I,e,W),v(e,t),v(t,l),v(t,r),v(t,a),Je(a,n[0].playlist.title),v(e,i),v(e,o),v(o,u),v(o,c),v(o,f),Je(f,n[0].playlist.description),v(e,b),v(e,g),P(I,y,W),P(I,k,W),v(k,C),v(C,p),v(p,S),v(S,K),v(K,D),v(D,ie),v(D,te),v(D,me),v(D,pe),v(S,Ae),v(S,we),v(we,q),Je(q,n[2]),v(p,x),v(p,j),v(j,ke),v(ke,de),v(j,N),v(j,ge),v(j,Le),v(j,Ue),v(j,st),v(j,Ve),v(j,rt),v(j,w),v(j,H),v(j,le),v(j,se),v(j,oe),v(C,re),v(C,Pe);for(let Ne=0;Ne<ne.length;Ne+=1)ne[Ne]&&ne[Ne].m(Pe,null);v(k,et),U(Be,k,null),Ge=!0,_t||(Ct=[Y(a,"input",n[31]),Y(f,"input",n[32]),Y(q,"input",n[33]),Y(de,"change",n[34])],_t=!0)},p(I,W){var We;if(W[0]&1&&a.value!==I[0].playlist.title&&Je(a,I[0].playlist.title),W[0]&1&&Je(f,I[0].playlist.description),(!Ge||W[0]&8)&&G!==(G=((We=I[3])==null?void 0:We.filter(rl).length)+"")&&Ie(ie,G),(!Ge||W[0]&1)&&Q!==(Q=I[0].playlist.tracks.data.length+"")&&Ie(me,Q),W[0]&4&&q.value!==I[2]&&Je(q,I[2]),(!Ge||W[0]&64&&Te!==(Te=I[6].filter(il).length===I[6].length&&I[6].length>0))&&(de.checked=Te),(!Ge||W[0]&64&&Fe!==(Fe=I[6].filter(ol).length!==I[6].length&&I[6].filter(ul).length>0))&&(de.indeterminate=Fe),W[0]&4192){Ye=qe(I[6]);let ue;for(ue=0;ue<Ye.length;ue+=1){const Xe=Xt(I,Ye,ue);ne[ue]?(ne[ue].p(Xe,W),A(ne[ue],1)):(ne[ue]=xt(Xe),ne[ue].c(),A(ne[ue],1),ne[ue].m(Pe,null))}for(De(),ue=Ye.length;ue<ne.length;ue+=1)yl(ue);je()}const Ne={};!dt&&W[0]&2&&(dt=!0,Ne.settings=I[1],fl(()=>dt=!1)),Be.$set(Ne)},i(I){if(!Ge){for(let W=0;W<Ye.length;W+=1)A(ne[W]);A(Be.$$.fragment,I),Ge=!0}},o(I){ne=ne.filter(Boolean);for(let W=0;W<ne.length;W+=1)B(ne[W]);B(Be.$$.fragment,I),Ge=!1},d(I){I&&(m(e),m(y),m(k)),wt(ne,I),F(Be),_t=!1,xe(Ct)}}}function Aa(n){let e,t="Search Artist";return{c(){e=T("h4"),e.textContent=t},l(l){e=E(l,"H4",{"data-svelte-h":!0}),_e(e)!=="svelte-z92qpb"&&(e.textContent=t)},m(l,s){P(l,e,s)},p:V,d(l){l&&m(e)}}}function Pa(n){let e,t;function l(){return n[23](n[49])}return e=new oa({props:{artist:n[49].meta}}),e.$on("click",l),{c(){R(e.$$.fragment)},l(s){M(e.$$.fragment,s)},m(s,r){U(e,s,r),t=!0},p(s,r){n=s;const a={};r[1]&262144&&(a.artist=n[49].meta),e.$set(a)},i(s){t||(A(e.$$.fragment,s),t=!0)},o(s){B(e.$$.fragment,s),t=!1},d(s){F(e,s)}}}function el(n){let e,t,l,s,r,a,i;t=new ot({props:{$$slots:{default:[Ba]},$$scope:{ctx:n}}}),s=new ot({props:{$$slots:{default:[Ia]},$$scope:{ctx:n}}});let o=qe(n[10]),u=[];for(let c=0;c<o.length;c+=1)u[c]=tl(Qt(n,o,c));const h=c=>B(u[c],1,1,()=>{u[c]=null});return{c(){e=T("span"),R(t.$$.fragment),l=O(),R(s.$$.fragment),r=O(),a=T("ul");for(let c=0;c<u.length;c+=1)u[c].c();this.h()},l(c){e=E(c,"SPAN",{class:!0});var f=$(e);M(t.$$.fragment,f),l=z(f),M(s.$$.fragment,f),f.forEach(m),r=z(c),a=E(c,"UL",{class:!0});var b=$(a);for(let g=0;g<u.length;g+=1)u[g].l(b);b.forEach(m),this.h()},h(){_(e,"class","flex justify-between w-full items-center gap-x-2 my-4"),_(a,"class","list")},m(c,f){P(c,e,f),U(t,e,null),v(e,l),U(s,e,null),P(c,r,f),P(c,a,f);for(let b=0;b<u.length;b+=1)u[b]&&u[b].m(a,null);i=!0},p(c,f){const b={};f[1]&8388608&&(b.$$scope={dirty:f,ctx:c}),t.$set(b);const g={};if(f[0]&16|f[1]&8388608&&(g.$$scope={dirty:f,ctx:c}),s.$set(g),f[0]&1053696){o=qe(c[10]);let d;for(d=0;d<o.length;d+=1){const y=Qt(c,o,d);u[d]?(u[d].p(y,f),A(u[d],1)):(u[d]=tl(y),u[d].c(),A(u[d],1),u[d].m(a,null))}for(De(),d=o.length;d<u.length;d+=1)h(d);je()}},i(c){if(!i){A(t.$$.fragment,c),A(s.$$.fragment,c);for(let f=0;f<o.length;f+=1)A(u[f]);i=!0}},o(c){B(t.$$.fragment,c),B(s.$$.fragment,c),u=u.filter(Boolean);for(let f=0;f<u.length;f+=1)B(u[f]);i=!1},d(c){c&&(m(e),m(r),m(a)),F(t),F(s),wt(u,c)}}}function Ba(n){let e,t="Playlists Artists";return{c(){e=T("h4"),e.textContent=t},l(l){e=E(l,"H4",{"data-svelte-h":!0}),_e(e)!=="svelte-1fedd7v"&&(e.textContent=t)},m(l,s){P(l,e,s)},p:V,d(l){l&&m(e)}}}function Na(n){let e,t="alphabetical",l,s;return{c(){e=T("button"),e.textContent=t},l(r){e=E(r,"BUTTON",{"data-svelte-h":!0}),_e(e)!=="svelte-a0poae"&&(e.textContent=t)},m(r,a){P(r,e,a),l||(s=Y(e,"click",n[26]),l=!0)},p:V,d(r){r&&m(e),l=!1,s()}}}function Sa(n){let e,t="# tracks",l,s;return{c(){e=T("button"),e.textContent=t},l(r){e=E(r,"BUTTON",{"data-svelte-h":!0}),_e(e)!=="svelte-ms1gv1"&&(e.textContent=t)},m(r,a){P(r,e,a),l||(s=Y(e,"click",n[25]),l=!0)},p:V,d(r){r&&m(e),l=!1,s()}}}function Oa(n){let e,t,l,s,r;return t=new Wn({}),{c(){e=T("button"),R(t.$$.fragment)},l(a){e=E(a,"BUTTON",{});var i=$(e);M(t.$$.fragment,i),i.forEach(m)},m(a,i){P(a,e,i),U(t,e,null),l=!0,s||(r=Y(e,"click",n[28]),s=!0)},p:V,i(a){l||(A(t.$$.fragment,a),l=!0)},o(a){B(t.$$.fragment,a),l=!1},d(a){a&&m(e),F(t),s=!1,r()}}}function za(n){let e,t,l,s,r;return t=new qn({}),{c(){e=T("button"),R(t.$$.fragment)},l(a){e=E(a,"BUTTON",{});var i=$(e);M(t.$$.fragment,i),i.forEach(m)},m(a,i){P(a,e,i),U(t,e,null),l=!0,s||(r=Y(e,"click",n[27]),s=!0)},p:V,i(a){l||(A(t.$$.fragment,a),l=!0)},o(a){B(t.$$.fragment,a),l=!1},d(a){a&&m(e),F(t),s=!1,r()}}}function Ia(n){let e,t,l,s,r;function a(f,b){if(f[4].orderBy==="trackCount")return Sa;if(f[4].orderBy==="alphabetical")return Na}let i=a(n),o=i&&i(n);const u=[za,Oa],h=[];function c(f,b){return f[4].ascending?0:1}return t=c(n),l=h[t]=u[t](n),{c(){o&&o.c(),e=O(),l.c(),s=nt()},l(f){o&&o.l(f),e=z(f),l.l(f),s=nt()},m(f,b){o&&o.m(f,b),P(f,e,b),h[t].m(f,b),P(f,s,b),r=!0},p(f,b){i===(i=a(f))&&o?o.p(f,b):(o&&o.d(1),o=i&&i(f),o&&(o.c(),o.m(e.parentNode,e)));let g=t;t=c(f),t===g?h[t].p(f,b):(De(),B(h[g],1,1,()=>{h[g]=null}),je(),l=h[t],l?l.p(f,b):(l=h[t]=u[t](f),l.c()),A(l,1),l.m(s.parentNode,s))},i(f){r||(A(l),r=!0)},o(f){B(l),r=!1},d(f){f&&(m(e),m(s)),o&&o.d(f),h[t].d(f)}}}function Da(n){let e,t,l,s,r,a=n[45].name+"",i,o,u,h,c=n[46]+"",f,b,g;return{c(){e=T("img"),s=O(),r=T("span"),i=ve(a),o=O(),u=T("small"),h=ve("(#"),f=ve(c),b=ve(")"),this.h()},l(d){e=E(d,"IMG",{src:!0,alt:!0}),s=z(d),r=E(d,"SPAN",{});var y=$(r);i=be(y,a),y.forEach(m),o=z(d),u=E(d,"SMALL",{title:!0});var k=$(u);h=be(k,"(#"),f=be(k,c),b=be(k,")"),k.forEach(m),this.h()},h(){Ke(e.src,t=n[45].picture_small)||_(e,"src",t),_(e,"alt",l=n[45].name),_(u,"title",g="artist has "+n[46]+" tracks in the playlist ")},m(d,y){P(d,e,y),P(d,s,y),P(d,r,y),v(r,i),P(d,o,y),P(d,u,y),v(u,h),v(u,f),v(u,b)},p(d,y){y[0]&1024&&!Ke(e.src,t=d[45].picture_small)&&_(e,"src",t),y[0]&1024&&l!==(l=d[45].name)&&_(e,"alt",l),y[0]&1024&&a!==(a=d[45].name+"")&&Ie(i,a),y[0]&1024&&c!==(c=d[46]+"")&&Ie(f,c),y[0]&1024&&g!==(g="artist has "+d[46]+" tracks in the playlist ")&&_(u,"title",g)},d(d){d&&(m(e),m(s),m(r),m(o),m(u))}}}function tl(n){let e,t,l,s,r,a,i,o,u,h,c,f,b,g,d,y;s=new ot({props:{$$slots:{default:[Da]},$$scope:{ctx:n}}}),u=new $t({});function k(){return n[29](n[45])}f=new kl({});function C(){return n[30](n[45])}return{c(){e=T("li"),t=T("span"),l=T("a"),R(s.$$.fragment),a=O(),i=T("div"),o=T("button"),R(u.$$.fragment),h=O(),c=T("button"),R(f.$$.fragment),b=O(),this.h()},l(p){e=E(p,"LI",{});var S=$(e);t=E(S,"SPAN",{class:!0});var K=$(t);l=E(K,"A",{href:!0,title:!0});var D=$(l);M(s.$$.fragment,D),D.forEach(m),a=z(K),i=E(K,"DIV",{class:!0});var G=$(i);o=E(G,"BUTTON",{class:!0,title:!0});var ie=$(o);M(u.$$.fragment,ie),ie.forEach(m),h=z(G),c=E(G,"BUTTON",{class:!0,title:!0});var te=$(c);M(f.$$.fragment,te),te.forEach(m),G.forEach(m),K.forEach(m),b=z(S),S.forEach(m),this.h()},h(){_(l,"href",r=n[45].link),_(l,"title","open artist in Deezer web interface"),_(o,"class","!p-0 "),_(o,"title","add all artist titles to the playlist"),_(c,"class","!p-0"),_(c,"title","deselect all artist titles from the playlist"),at(c,"text-gray-500",n[46]===0),_(i,"class","btn-group-vertical btn btn-sm gap-y-1"),_(t,"class","flex flex-row justify-between w-full items-center gap-x-2")},m(p,S){P(p,e,S),v(e,t),v(t,l),U(s,l,null),v(t,a),v(t,i),v(i,o),U(u,o,null),v(i,h),v(i,c),U(f,c,null),v(e,b),g=!0,d||(y=[Y(o,"click",k),Y(c,"click",C)],d=!0)},p(p,S){n=p;const K={};S[0]&1024|S[1]&8388608&&(K.$$scope={dirty:S,ctx:n}),s.$set(K),(!g||S[0]&1024&&r!==(r=n[45].link))&&_(l,"href",r),(!g||S[0]&1049600)&&at(c,"text-gray-500",n[46]===0)},i(p){g||(A(s.$$.fragment,p),A(u.$$.fragment,p),A(f.$$.fragment,p),g=!0)},o(p){B(s.$$.fragment,p),B(u.$$.fragment,p),B(f.$$.fragment,p),g=!1},d(p){p&&m(e),F(s),F(u),F(f),d=!1,xe(y)}}}function ja(n){var C;let e,t,l,s,r,a,i,o,u,h,c,f,b,g;l=new ot({props:{$$slots:{default:[Aa]},$$scope:{ctx:n}}});function d(p){n[24](p)}let y={options:n[9],$$slots:{optionButton:[Pa,({option:p})=>({49:p}),({option:p})=>[0,p?262144:0]]},$$scope:{ctx:n}};n[8]!==void 0&&(y.input=n[8]),o=new An({props:y}),cl.push(()=>hl(o,"input",d));let k=((C=n[10])==null?void 0:C.length)>0&&el(n);return{c(){e=T("span"),t=T("span"),R(l.$$.fragment),s=O(),r=T("input"),a=O(),i=T("span"),R(o.$$.fragment),h=O(),k&&k.c(),c=nt(),this.h()},l(p){e=E(p,"SPAN",{class:!0});var S=$(e);t=E(S,"SPAN",{class:!0});var K=$(t);M(l.$$.fragment,K),K.forEach(m),s=z(S),r=E(S,"INPUT",{class:!0,type:!0,name:!0,placeholder:!0}),a=z(S),i=E(S,"SPAN",{class:!0,tabindex:!0});var D=$(i);M(o.$$.fragment,D),D.forEach(m),S.forEach(m),h=z(p),k&&k.l(p),c=nt(),this.h()},h(){_(t,"class","mb-2"),_(r,"class","input"),_(r,"type","search"),_(r,"name","demo"),_(r,"placeholder","Search..."),_(i,"class","card w-full max-w-sm max-h-48 p-4 overflow-y-auto inline-block"),_(i,"tabindex","-1"),_(e,"class","my-4")},m(p,S){P(p,e,S),v(e,t),U(l,t,null),v(e,s),v(e,r),Je(r,n[8]),v(e,a),v(e,i),U(o,i,null),P(p,h,S),k&&k.m(p,S),P(p,c,S),f=!0,b||(g=Y(r,"input",n[22]),b=!0)},p(p,S){var G;const K={};S[1]&8388608&&(K.$$scope={dirty:S,ctx:p}),l.$set(K),S[0]&256&&r.value!==p[8]&&Je(r,p[8]);const D={};S[0]&512&&(D.options=p[9]),S[1]&8650752&&(D.$$scope={dirty:S,ctx:p}),!u&&S[0]&256&&(u=!0,D.input=p[8],fl(()=>u=!1)),o.$set(D),((G=p[10])==null?void 0:G.length)>0?k?(k.p(p,S),S[0]&1024&&A(k,1)):(k=el(p),k.c(),A(k,1),k.m(c.parentNode,c)):k&&(De(),B(k,1,1,()=>{k=null}),je())},i(p){f||(A(l.$$.fragment,p),A(o.$$.fragment,p),A(k),f=!0)},o(p){B(l.$$.fragment,p),B(o.$$.fragment,p),B(k),f=!1},d(p){p&&(m(e),m(h),m(c)),F(l),F(o),k&&k.d(p),b=!1,g()}}}function ll(n){let e,t=n[7].message+"",l,s,r,a,i;return{c(){e=T("span"),l=ve(t),s=O(),r=T("progress"),this.h()},l(o){e=E(o,"SPAN",{});var u=$(e);l=be(u,t),u.forEach(m),s=z(o),r=E(o,"PROGRESS",{max:!0}),$(r).forEach(m),this.h()},h(){r.value=a=n[7].value,_(r,"max",i=n[7].max)},m(o,u){P(o,e,u),v(e,l),P(o,s,u),P(o,r,u)},p(o,u){u[0]&128&&t!==(t=o[7].message+"")&&Ie(l,t),u[0]&128&&a!==(a=o[7].value)&&(r.value=a),u[0]&128&&i!==(i=o[7].max)&&_(r,"max",i)},d(o){o&&(m(e),m(s),m(r))}}}function La(n){let e,t,l="Save to Deezer",s,r,a,i,o,u="Update playlist",h,c,f,b="Prepare playlist",g,d,y,k,C,p="retrieve non readable tracks",S,K,D,G,ie,te,Q="remove de-selected tracks",me,pe,Ae,we;a=new Ln({});let q=n[7]&&ll(n);return y=new Rn({}),G=new In({}),{c(){e=T("div"),t=T("h3"),t.textContent=l,s=O(),r=T("button"),R(a.$$.fragment),i=O(),o=T("span"),o.textContent=u,h=O(),q&&q.c(),c=O(),f=T("h3"),f.textContent=b,g=O(),d=T("button"),R(y.$$.fragment),k=O(),C=T("span"),C.textContent=p,K=O(),D=T("button"),R(G.$$.fragment),ie=O(),te=T("span"),te.textContent=Q,this.h()},l(x){e=E(x,"DIV",{class:!0});var j=$(e);t=E(j,"H3",{"data-svelte-h":!0}),_e(t)!=="svelte-1v8zjx5"&&(t.textContent=l),s=z(j),r=E(j,"BUTTON",{class:!0});var ke=$(r);M(a.$$.fragment,ke),i=z(ke),o=E(ke,"SPAN",{"data-svelte-h":!0}),_e(o)!=="svelte-w41jv5"&&(o.textContent=u),ke.forEach(m),h=z(j),q&&q.l(j),c=z(j),f=E(j,"H3",{"data-svelte-h":!0}),_e(f)!=="svelte-1oj9aef"&&(f.textContent=b),g=z(j),d=E(j,"BUTTON",{class:!0,title:!0});var de=$(d);M(y.$$.fragment,de),k=z(de),C=E(de,"SPAN",{"data-svelte-h":!0}),_e(C)!=="svelte-dro7np"&&(C.textContent=p),de.forEach(m),K=z(j),D=E(j,"BUTTON",{class:!0,title:!0});var Te=$(D);M(G.$$.fragment,Te),ie=z(Te),te=E(Te,"SPAN",{"data-svelte-h":!0}),_e(te)!=="svelte-13uzf89"&&(te.textContent=Q),Te.forEach(m),j.forEach(m),this.h()},h(){_(r,"class","btn variant-filled-primary"),_(d,"class","btn variant-filled-tertiary"),d.disabled=S=n[3].filter(al).length===0,_(d,"title","trye to find equivalent of tracks that are not readable anymore"),_(D,"class","btn variant-filled-tertiary"),D.disabled=me=n[3].filter(sl).length===0,_(D,"title","remove de-selected new tracks"),_(e,"class","flex flex-col gap-y-4 w-4/5")},m(x,j){P(x,e,j),v(e,t),v(e,s),v(e,r),U(a,r,null),v(r,i),v(r,o),v(e,h),q&&q.m(e,null),v(e,c),v(e,f),v(e,g),v(e,d),U(y,d,null),v(d,k),v(d,C),v(e,K),v(e,D),U(G,D,null),v(D,ie),v(D,te),pe=!0,Ae||(we=[Y(r,"click",pt(n[14])),Y(d,"click",pt(n[16])),Y(D,"click",pt(n[17]))],Ae=!0)},p(x,j){x[7]?q?q.p(x,j):(q=ll(x),q.c(),q.m(e,c)):q&&(q.d(1),q=null),(!pe||j[0]&8&&S!==(S=x[3].filter(al).length===0))&&(d.disabled=S),(!pe||j[0]&8&&me!==(me=x[3].filter(sl).length===0))&&(D.disabled=me)},i(x){pe||(A(a.$$.fragment,x),A(y.$$.fragment,x),A(G.$$.fragment,x),pe=!0)},o(x){B(a.$$.fragment,x),B(y.$$.fragment,x),B(G.$$.fragment,x),pe=!1},d(x){x&&m(e),F(a),q&&q.d(),F(y),F(G),Ae=!1,xe(we)}}}function Za(n){let e,t;return e=new Sl({props:{$$slots:{sidebarRight:[La],sidebarLeft:[ja],default:[Ca]},$$scope:{ctx:n}}}),{c(){R(e.$$.fragment)},l(l){M(e.$$.fragment,l)},m(l,s){U(e,l,s),t=!0},p(l,s){const r={};s[0]&2047|s[1]&8388608&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){t||(A(e.$$.fragment,l),t=!0)},o(l){B(e.$$.fragment,l),t=!1},d(l){F(e,l)}}}function Ha(n,e){const t=[];for(let l=0;l<n.length;l+=e)t.push(n.slice(l,l+e));return t}function nl(n){return!n.inPlaylist&&n.selected?"!text-lime-500":n.inPlaylist&&!n.selected?"!line-through":""}const al=n=>n.selected&&!n.track.readable,sl=n=>!n.selected&&!n.inPlaylist,rl=n=>n.selected,il=n=>n.selected,ol=n=>n.selected,ul=n=>n.selected;function Ra(n,e,t){let l,s,r,a,i,o,u;const h=Hl();let{data:c}=e;const f=mt([]);tt(n,f,w=>t(10,u=w));const b=mt([]);tt(n,b,w=>t(3,r=w));const g={ascending:!1,orderBy:"trackCount"};function d(w){w.ascending!==void 0&&t(4,g.ascending=w.ascending,g),w.orderBy!==void 0&&t(4,g.orderBy=w.orderBy,g),f.update(L=>{const H=g.ascending?1:-1,le=(ee,re)=>te(ee.id)-te(re.id),J=(ee,re)=>ee.name.localeCompare(re.name),se=(ee,re)=>(Pe,et)=>{const Be=ee(Pe,et);return Be===0?re(Pe,et):Be};return L.sort((ee,re)=>{switch(g.orderBy){case"trackCount":return H*se(le,J)(ee,re);case"alphabetical":return H*se(J,le)(ee,re)}})})}async function y(){const w={request_method:"POST"};c.playlist.title&&(w.title=c.playlist.title),c.playlist.description&&(w.description=c.playlist.description),c.playlist.public&&(w.public=c.playlist.public);try{const L=await lt({apiPath:`/playlist/${c.playlist.id}`,searchParams:w});h.trigger({message:`Updated playlist: ${L?"OK":"KO"}`,timeout:3e3})}catch(L){h.trigger({message:`Updated playlist: error ${L}`,timeout:3e3})}await p()}let k=mt(void 0);tt(n,k,w=>t(7,a=w));async function C(w,L,H){if(!w.length)return;k.set({message:`sending 0/${w.length} ${L} ${H} `,value:0,max:w.length});let le=0;const J=100;for(const se of Ha(w,J)){le+=J,k.set({message:`sending ${le} / ${w.length} ${L} ${H} `,value:le,max:w.length}),console.log(`sending ${L} ${H}=${JSON.stringify(se)}`);const oe={request_method:L};oe[H]=se.join(",");const ee=await lt({apiPath:`/playlist/${c.playlist.id}/tracks`,searchParams:oe});if(console.log({updateResult:ee}),!ee)throw new Error(`unable to send ${L} ${H}=${JSON.stringify(se)}`)}}async function p(){try{const w=r.filter(H=>H.selected&&!H.inPlaylist).map(H=>H.track.id);await C(w,"POST","songs");const L=r.filter(H=>!H.selected&&H.inPlaylist).map(H=>H.track.id);if(await C(L,"DELETE","songs"),w.length>0){const H=r.filter(le=>le.selected).map(le=>le.track.id);await C(H,"POST","order")}if(k.set(void 0),w.length||L.length){const H=h.trigger({message:"Updated playlist tracks, refreshing playlist data"});await Zl(),h.close(H)}}catch(w){h.trigger({message:`Updated playlist tracks: error ${w}`,timeout:3e3})}finally{k.set(void 0)}}async function S(w){const L=await vl(w.artist.id);if(!L){h.trigger({message:`Could not find artist ${w.artist.name}`,timeout:3e3});return}const H=L.flatMap(se=>{const{tracks:oe,...ee}=se;return se.tracks.map(re=>({...re,album:ee}))}).filter(se=>se.id!==w.id&&se.readable),le={sensitivity:"base",ignorePunctuation:!0,numeric:!1,usage:"search"},J=H.filter(se=>se.title.localeCompare(w.title,void 0,le)===0);switch(J.length){case 0:console.log("no match by title",{unreadableTrack:w}),h.trigger({message:`Could not find matching track for '${w.title}' in album '${w.album.title}'`,timeout:3e3});return;case 1:return J[0];default:{const se=Object.values(J.reduce((ee,re)=>(ee[re.isrc]=re,ee),{}));if(se.length===1)return se[0];const oe=J.filter(ee=>ee.album.title.localeCompare(w.album.title,void 0,le)===0);switch(oe.length){case 0:console.log("no match by title and album",{unreadableTrack:w}),h.trigger({message:`Could not find matching track for '${w.title}' in album '${w.album.title}'`,timeout:3e3});return;case 1:return oe[0];default:{const ee=Object.values(oe.reduce((re,Pe)=>(re[Pe.isrc]=Pe,re),{}));if(ee.length===1)return ee[0];console.log("multple match by title",{unreadableTrack:w,matchingTracksByTitleAndAlbum:oe}),h.trigger({message:`Found multiple matching tracks for '${w.title}' in album '${w.album.title}' : ${oe.map(re=>re.id)}`,timeout:3e3});return}}}}}async function K(){const w=Dl(b),L=w.filter(J=>J.selected&&J.track.readable).length,H=w.filter(J=>J.selected&&!J.track.readable);for(const J of H){const se=J.track,oe=await S(se);if(oe){console.log("adding alternative to "+J.track.id+" : "+oe.title),J.selected=!1;const ee=w.indexOf(J);w.splice(ee+1,0,{selected:!0,inPlaylist:!1,track:oe})}}const le=w.filter(J=>J.selected&&J.track.readable).length;h.trigger({message:`Reattached ${le-L} track(s) to readable equivalents.<br/>(${w.filter(J=>J.selected).length-le} unreadable track remaining)`,timeout:1e4}),b.set(w)}function D(){b.update(w=>{const L=w.filter(H=>H.selected||H.inPlaylist);return h.trigger({message:`Removed ${w.length-L.length} track(s) from the playlist`,timeout:3e3}),L})}let G=mt("");tt(n,G,w=>t(8,i=w));const ie=El(G,(w,L)=>{if(!w){L([]);return}lt({apiPath:"/search/artist",searchParams:{q:w}}).then(H=>{const le=H.data.map(J=>({label:`<span class="flex justify-between w-full items-center">
<span class="flex items-center"> <img src="${J.picture_small}" class="mx-2"/>${J.name}</span>
 <button class="btn-icon btn-icon-sm variant-outline-tertiary" title="add all artist titles to the playlist">add</button></span>`,value:J.id,meta:J}));L(le)})});tt(n,ie,w=>t(9,o=w));function te(w){return r.filter(L=>L.track.artist.id===w&&L.selected).length}let Q={page:0,limit:10,size:10,amounts:[10,20,50,100]},me="";function pe(w){r.length===0&&t(0,c.playlist.title=w.name+" - Full Discography",c),vt(w.id,b)}function Ae(){i=this.value,G.set(i)}const we=w=>pe(w.meta);function q(w){i=w,G.set(i)}const x=()=>d({orderBy:"alphabetical"}),j=()=>d({orderBy:"trackCount"}),ke=()=>d({ascending:!1}),de=()=>d({ascending:!0}),Te=w=>vt(w.id,b),Fe=w=>Wt(w.id,b);function N(){c.playlist.title=this.value,t(0,c)}function ge(){c.playlist.description=this.value,t(0,c)}function Ee(){me=this.value,t(2,me)}const Le=w=>{l.forEach(L=>L.selected=w.target.checked),b.update(L=>L)};function Ue(w,L){w[L].selected=this.checked,t(6,l),t(3,r),t(2,me),t(1,Q)}const ut=w=>ca(w.album,b),st=w=>ua(w.album.id,b),Ve=w=>vt(w.artist.id,b),ct=w=>Wt(w.artist.id,b);function rt(w){Q=w,t(1,Q),t(3,r)}return n.$$set=w=>{"data"in w&&t(0,c=w.data)},n.$$.update=()=>{if(n.$$.dirty[0]&1&&f.set(c.topArtists),n.$$.dirty[0]&1){const w=c.playlist.tracks.data.map(L=>({track:L,inPlaylist:!0,selected:!0}));b.set(w)}n.$$.dirty[0]&8&&t(1,Q.size=r.length,Q),n.$$.dirty[0]&14&&t(6,l=r.filter(w=>!me||JSON.stringify(w.track).toLowerCase().includes(me.toLowerCase())).slice(Q.page*Q.limit,Q.page*Q.limit+Q.limit)),n.$$.dirty[0]&8&&t(5,s=r.reduce((w,L)=>Math.max(w,L.track.rank),0))},[c,Q,me,r,g,s,l,a,i,o,u,f,b,d,y,k,K,D,G,ie,te,pe,Ae,we,q,x,j,ke,de,Te,Fe,N,ge,Ee,Le,Ue,ut,st,Ve,ct,rt]}class Ya extends fe{constructor(e){super(),he(this,e,Ra,Za,ce,{data:0},null,[-1,-1])}}export{Ya as component,Ka as universal};
