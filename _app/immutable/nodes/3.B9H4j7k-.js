import{s as g,t as f,d,i as u,n as i,f as h,k}from"../chunks/scheduler.pzfbVsGb.js";import{S as _,i as x}from"../chunks/index.43Z_d8hB.js";import{b as l,g as b}from"../chunks/entry.BE-gc76k.js";import{p as v}from"../chunks/stores.C2JL4_hK.js";import{T as y,R as m}from"../chunks/CookieManager.P34oS-qs.js";function C(a){let e;return{c(){e=f("processing deezer signin...")},l(t){e=d(t,"processing deezer signin...")},m(t,o){u(t,e,o)},p:i,i,o:i,d(t){t&&h(e)}}}const c="#access_token=";function P(a,e,t){let o;k(a,v,s=>t(0,o=s));async function p(s){y.set(s);const r=m.get()||l+"/";console.log({redirectPath:r,base:l}),m.remove(),await b(r,{invalidateAll:!0})}const n=o.url.hash;if(n.includes(c)){const s=n.substring(n.indexOf(c)+c.length,n.indexOf("&"));console.log("callback access token: ",{access_token:s}),setTimeout(async()=>{await p(s)},1)}return[]}class R extends _{constructor(e){super(),x(this,e,P,C,g,{})}}export{R as component};
