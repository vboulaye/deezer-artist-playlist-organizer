import{s as k,l as x,m as _,i as b,r,d as v,F as P}from"../chunks/scheduler.dc0f26dd.js";import{S as C,i as w}from"../chunks/index.b6753c13.js";import{i as z,g as T}from"../chunks/navigation.dc21a5ff.js";import{p as $}from"../chunks/stores.b1d85663.js";import{T as y,U as A,R as c}from"../chunks/CookieManager.d8697515.js";import{c as O}from"../chunks/DeezerCall.c6022a75.js";function R(n){let e;return{c(){e=x("callback from deezer")},l(t){e=_(t,"callback from deezer")},m(t,o){b(t,e,o)},p:r,i:r,o:r,d(t){t&&v(e)}}}const i="#access_token=";function S(n,e,t){let o;P(n,$,a=>t(0,o=a));async function l(a){y.set(a),await z(),await O({apiPath:"/user/me",accessToken:a}).then(p=>{const{id:f,name:d,picture:u,lang:g}=p,h={id:f,name:d,picture:u,lang:g};A.set(h)});const m=c.get()||"/";c.remove(),await T(m,{invalidateAll:!0})}const s=o.url.hash;if(s.includes(i)){const a=s.substring(s.indexOf(i)+i.length,s.indexOf("&"));console.log("callback access token: ",{access_token:a}),Promise.resolve(a).then(l)}return[]}class B extends C{constructor(e){super(),w(this,e,S,R,k,{})}}export{B as component};
