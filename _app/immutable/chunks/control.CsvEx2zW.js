import{n as l,s as m,y as w,w as E,z as S}from"./scheduler.pzfbVsGb.js";const a=[];function x(t,r){return{subscribe:q(t,r).subscribe}}function q(t,r=l){let s;const n=new Set;function c(i){if(m(t,i)&&(t=i,s)){const o=!a.length;for(const e of n)e[1](),a.push(e,t);if(o){for(let e=0;e<a.length;e+=2)a[e][0](a[e+1]);a.length=0}}}function f(i){c(i(t))}function b(i,o=l){const e=[i,o];return n.add(e),n.size===1&&(s=r(c,f)||l),i(t),()=>{n.delete(e),n.size===0&&s&&(s(),s=null)}}return{set:c,update:f,subscribe:b}}function A(t,r,s){const n=!Array.isArray(t),c=n?[t]:t;if(!c.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const f=r.length<2;return x(s,(b,i)=>{let o=!1;const e=[];let d=0,h=l;const g=()=>{if(d)return;h();const u=r(n?e[0]:e,b,i);f?b(u):h=S(u)?u:l},y=c.map((u,p)=>w(u,_=>{e[p]=_,d&=~(1<<p),o&&g()},()=>{d|=1<<p}));return o=!0,g(),function(){E(y),h(),o=!1}})}class H{constructor(r,s){this.status=r,typeof s=="string"?this.body={message:s}:s?this.body=s:this.body={message:`Error: ${r}`}}toString(){return JSON.stringify(this.body)}}class R{constructor(r,s){this.status=r,this.location=s}}class v extends Error{constructor(r,s,n){super(n),this.status=r,this.text=s}}export{H,R,v as S,A as d,x as r,q as w};
